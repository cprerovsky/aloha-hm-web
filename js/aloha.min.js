(function () {function errorLink$$module$assert(a){return"\u2718 Error ("+a+"). See http://www.aloha-editor.org/docs/errors/"+a}var NOT_IMPLEMENTED$$module$assert=0,NOU$$module$assert=1,NOT_NOU$$module$assert=2,ASSERT_TYPE_NOU$$module$assert=15;function error$$module$assert(a){throw Error(a?errorLink$$module$assert(a):"assertion failed");}function assert$$module$assert(a,b){a||error$$module$assert(b)}function notImplemented$$module$assert(){error$$module$assert(NOT_IMPLEMENTED$$module$assert)}
function assertNotNou$$module$assert(a){assert$$module$assert(null!=a,NOU$$module$assert)}function assertNou$$module$assert(a){assert$$module$assert(null==a,NOT_NOU$$module$assert)}
var module$assert={assert:assert$$module$assert,error:error$$module$assert,notImplemented:notImplemented$$module$assert,assertNou:assertNou$$module$assert,assertNotNou:assertNotNou$$module$assert,NOT_IMPLEMENTED:NOT_IMPLEMENTED$$module$assert,NOU:NOU$$module$assert,NOT_NOU:NOT_NOU$$module$assert,ASSERT_TYPE_NOU:ASSERT_TYPE_NOU$$module$assert,READ_FROM_DISCARDED_TRANSIENT:3,PERSISTENT_WRITE_TO_TRANSIENT:4,TRANSIENT_WRITE_TO_PERSISTENT:5,RECORD_WRONG_TYPE:16,STYLE_NOT_AS_ATTR:8,EXPECT_ELEMENT:9,EXPECT_TEXT_NODE:10,
ELEMENT_NOT_ATTACHED:11,MISSING_SYMBOL:12,GETTER_AT_LEAST_1_ARG:13,SETTER_1_MORE_THAN_GETTER:14};var module$browsers={},exports$$module$browsers=module$browsers,VENDOR_PREFIX$$module$browsers="",testElem$$module$browsers=document.createElement("div"),prefixes$$module$browsers=["-webkit","-moz","-o"],style$$module$browsers=testElem$$module$browsers.style,i$$module$browsers;
for(i$$module$browsers=0;i$$module$browsers<prefixes$$module$browsers.length;i$$module$browsers++)style$$module$browsers.hasOwnProperty(prefixes$$module$browsers[i$$module$browsers]+"-transform")&&(VENDOR_PREFIX$$module$browsers=prefixes$$module$browsers[i$$module$browsers]+"-");
var ua$$module$browsers=navigator.userAgent.toLowerCase(),info$$module$browsers=/(chrome)[ \/]([\w.]+)/.exec(ua$$module$browsers)||/(webkit)[ \/]([\w.]+)/.exec(ua$$module$browsers)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua$$module$browsers)||/(msie) ([\w.]+)/.exec(ua$$module$browsers)||0>ua$$module$browsers.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua$$module$browsers),vendor$$module$browsers,version$$module$browsers,ie7$$module$browsers,chrome$$module$browsers,safari$$module$browsers,
webkit$$module$browsers;ie7$$module$browsers=chrome$$module$browsers=safari$$module$browsers=webkit$$module$browsers=!1;info$$module$browsers&&(vendor$$module$browsers=info$$module$browsers[1],version$$module$browsers=info$$module$browsers[2],ie7$$module$browsers="msie"===version$$module$browsers&&8>parseInt(version$$module$browsers,10),"chrome"===vendor$$module$browsers?webkit$$module$browsers=!0:"webkit"===vendor$$module$browsers&&(safari$$module$browsers=!0));
exports$$module$browsers={ie7:ie7$$module$browsers,chrome:chrome$$module$browsers,webkit:webkit$$module$browsers,safari:safari$$module$browsers,vendor:vendor$$module$browsers,version:version$$module$browsers,VENDOR_PREFIX:VENDOR_PREFIX$$module$browsers};info$$module$browsers&&(exports$$module$browsers[vendor$$module$browsers]=!0);module$browsers=exports$$module$browsers;var COLOR_PREFIX$$module$colors=/^(#|rgba?|hsl)\(?([^\(\)]+)/i,COMMA$$module$colors=/\s*,\s*/;function toString$$module$colors(a){return"string"===typeof a[0]?"#"+a.join(""):4===a.length?"rgba("+a.join(",")+")":"rgb("+a.join(",")+")"}function equals$$module$colors(a,b){return hex$$module$colors(a)===hex$$module$colors(b)}
function normalizeHex$$module$colors(a){var b,c;4===a.length?(b=a.substr(1,1),c=a.substr(2,1),a=a.substr(3,1),b+=b,c+=c,a+=a):(b=a.substr(1,2),c=a.substr(3,2),a=a.substr(5,2));return[b,c,a]}function rgb2hex$$module$colors(a){return a.reduce(function(a,c){var d=parseInt(c,10).toString(16);return a.concat(1===d.length?d+d:d)},[])}function hex2rgb$$module$colors(a){return normalizeHex$$module$colors(a).reduce(function(a,c){return a.concat(parseInt(c,16))},[])}
function hex$$module$colors(a){a=a.match(COLOR_PREFIX$$module$colors);switch(a&&a[1]){case "#":return"#"+normalizeHex$$module$colors(a[0]).join("");case "rgb":case "rgba":return"#"+rgb2hex$$module$colors(a[2].split(COMMA$$module$colors)).join("")}}
function rgb$$module$colors(a){a=a.match(COLOR_PREFIX$$module$colors);switch(a&&a[1]){case "#":return hex2rgb$$module$colors(a[0]);case "rgb":case "rgba":return a[2].split(COMMA$$module$colors).reduce(function(a,c){return a.concat(parseInt(c,10))},[])}}function cross$$module$colors(a,b,c){var d=b[1]-a[1],e=b[2]-a[2];return[a[0]+Math.round((b[0]-a[0])*c),a[1]+Math.round(d*c),a[2]+Math.round(e*c)]}
var module$colors={hex:hex$$module$colors,rgb:rgb$$module$colors,cross:cross$$module$colors,equals:equals$$module$colors,toString:toString$$module$colors};var TABLE_CHILDREN$$module$content={CAPTION:!0,COLGROUP:!0,THEAD:!0,TBODY:!0,TFOOT:!0,TR:!0},TR_CHILDREN$$module$content={TH:!0,TD:!0},SELECT_CHILDREN$$module$content={OPTION:!0,OPTGROUP:!0},RUBY_CHILDREN$$module$content={_PHRASING_:!0,RT:!0,RP:!0},MENU_CHILDREN$$module$content={LI:!0,_FLOW_:!0},HGROUP_CHILDREN$$module$content={H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0},FIGURE_CHILDREN$$module$content={FIGCAPTION:!0,_FLOW_:!0},FIELDSET_CHILDREN$$module$content={LEGEND:!0,_FLOW_:!0},DL_CHILDREN$$module$content=
{DT:!0,DD:!0},DETAILS$$module$content={SUMMARY:!0,_FLOW_:!0},DATALIST$$module$content={_PHRASING_:!0,OPTION:!0},ALLOWED_CHILDREN$$module$content={A:"_PHRASING_",ABBR:"_PHRASING_",ADDRESS:"_FLOW_",AREA:"_EMPTY_",ARTICLE:"_FLOW_",ASIDE:"_FLOW_",AUDIO:"SOURCE",B:"_PHRASING_",BASE:"_EMPTY_",BDO:"_PHRASING_",BLOCKQUOTE:"_PHRASING_",BODY:"_FLOW_",BR:"_EMPTY_",BUTTON:"_PHRASING_",CANVAS:"_PHRASING_",CAPTION:"_FLOW_",CITE:"_PHRASING_",CODE:"_PHRASING_",COL:"_EMPTY_",COLGROUP:"COL",COMMAND:"_EMPTY_",DATALIST:DATALIST$$module$content,
DD:"_FLOW_",DEL:"_PHRASING_",DIV:"_FLOW_",DETAILS:DETAILS$$module$content,DFN:"_FLOW_",DL:DL_CHILDREN$$module$content,DT:"_PHRASING_",EM:"_PHRASING_",EMBED:"_EMPTY_",FIELDSET:FIELDSET_CHILDREN$$module$content,FIGCAPTION:"_FLOW_",FIGURE:FIGURE_CHILDREN$$module$content,FONT:"_PHRASING_",FOOTER:"_FLOW_",FORM:"_FLOW_",H1:"_PHRASING_",H2:"_PHRASING_",H3:"_PHRASING_",H4:"_PHRASING_",H5:"_PHRASING_",H6:"_PHRASING_",HEADER:"_FLOW_",HGROUP:HGROUP_CHILDREN$$module$content,HR:"_EMPTY_",I:"_PHRASING_",IFRAME:"#TEXT",
IMG:"_EMPTY_",INPUT:"_EMPTY_",INS:"_PHRASING_",KBD:"_PHRASING_",KEYGEN:"_EMPTY_",LABEL:"_PHRASING_",LEGEND:"_PHRASING_",LI:"_FLOW_",LINK:"_EMPTY_",MAP:"AREA",MARK:"_PHRASING_",MENU:MENU_CHILDREN$$module$content,META:"_EMPTY_",METER:"_PHRASING_",NAV:"_FLOW_",NOSCRIPT:"_PHRASING_",OBJECT:"PARAM",OL:"LI",OPTGROUP:"OPTION",OPTION:"#TEXT",OUTPUT:"_PHRASING_",P:"_PHRASING_",PARAM:"_EMPTY_",PRE:"_PHRASING_",PROGRESS:"_PHRASING_",Q:"_PHRASING_",RP:"_PHRASING_",RT:"_PHRASING_",RUBY:RUBY_CHILDREN$$module$content,
S:"_PHRASING_",SAMP:"pharsing",SCRIPT:"#script",SECTION:"_FLOW_",SELECT:SELECT_CHILDREN$$module$content,SMALL:"_PHRASING_",SOURCE:"_EMPTY_",SPAN:"_PHRASING_",STRONG:"_PHRASING_",STYLE:"_PHRASING_",SUB:"_PHRASING_",SUMMARY:"_PHRASING_",SUP:"_PHRASING_",TABLE:TABLE_CHILDREN$$module$content,TBODY:"TR",TD:"_FLOW_",TEXTAREA:"#TEXT",TFOOT:"TR",TH:"_PHRASING_",THEAD:"TR",TIME:"_PHRASING_",TITLE:"#TEXT",TR:TR_CHILDREN$$module$content,TRACK:"_EMPTY_",U:"_PHRASING_",UL:"LI",VAR:"_PHRASING_",VIDEO:"SOURCE",
WBR:"_EMPTY_","#DOCUMENT-FRAGMENT":"_FLOW_"},FLOW_PHRASING_CATEGORY$$module$content={_FLOW_:!0,_PHRASING_:!0},FLOW_SECTIONING_CATEGORY$$module$content={_FLOW_:!0,_PHRASING_:!0},FLOW_HEADING_CATEGORY$$module$content={_FLOW_:!0,_HEADER_:!0},FLOW_CATEGORY$$module$content={_FLOW_:!0},CONTENT_CATEGORIES$$module$content={A:{_FLOW_:!0,_INTERACTIVE_:!0,_PHRASING_:!0},ABBR:FLOW_PHRASING_CATEGORY$$module$content,ADDRESS:FLOW_CATEGORY$$module$content,AREA:FLOW_PHRASING_CATEGORY$$module$content,ARTICLE:FLOW_SECTIONING_CATEGORY$$module$content,
ASIDE:FLOW_SECTIONING_CATEGORY$$module$content,AUDIO:{_EMBEDDED_:!0,_FLOW_:!0,_INTERACTIVE_:!0,_PHRASING_:!0},B:FLOW_PHRASING_CATEGORY$$module$content,BASE:{_META_DATA_:!0},BDI:FLOW_PHRASING_CATEGORY$$module$content,BDO:FLOW_PHRASING_CATEGORY$$module$content,BLOCKQUOTE:{_FLOW_:!0,_SECTIONING_ROOT_:!0},BODY:{_SECTIONING_ROOT_:!0},BR:FLOW_PHRASING_CATEGORY$$module$content,BUTTON:{_EMBEDDED_:!0,_FLOW_:!0,_INTERACTIVE_:!0,_PHRASING_:!0,_LISTED_:!0,_LABELABLE_:!0,_SUBMITTABLE_:!0,_REASSOCIATABLE_:!0,_FORM_ASSOCIATED_:!0},
CANVAS:{_EMBEDDED_:!0,_FLOW_:!0,_PHRASING_:!0},CAPTION:{},CITE:FLOW_PHRASING_CATEGORY$$module$content,CODE:FLOW_PHRASING_CATEGORY$$module$content,COL:{},COLGROUP:{},COMMAND:{},DATALIST:FLOW_PHRASING_CATEGORY$$module$content,DD:{},DEL:FLOW_PHRASING_CATEGORY$$module$content,DETAILS:{_FLOW_:!0,_SECTIONING_ROOT_:!0,_INTERACTIVE_:!0},DFN:FLOW_PHRASING_CATEGORY$$module$content,DIV:FLOW_CATEGORY$$module$content,DL:FLOW_CATEGORY$$module$content,DT:{},EM:FLOW_PHRASING_CATEGORY$$module$content,EMBED:{_EMBEDDED_:!0,
_FLOW_:!0,_INTERACTIVE_:!0,_PHRASING_:!0},FIELDSET:{_FLOW_:!0,_FORM_ASSOCIATED_:!0,_LISTED_:!0,_REASSOCIATABLE_:!0,_SECTIONING_ROOT_:!0},FIGCAPTION:{},FIGURE:{_FLOW_:!0,_SECTIONING_ROOT_:!0},FONT:FLOW_PHRASING_CATEGORY$$module$content,FOOTER:FLOW_CATEGORY$$module$content,FORM:FLOW_CATEGORY$$module$content,H1:FLOW_HEADING_CATEGORY$$module$content,H2:FLOW_HEADING_CATEGORY$$module$content,H3:FLOW_HEADING_CATEGORY$$module$content,H4:FLOW_HEADING_CATEGORY$$module$content,H5:FLOW_HEADING_CATEGORY$$module$content,
H6:FLOW_HEADING_CATEGORY$$module$content,HEADER:FLOW_CATEGORY$$module$content,HGROUP:FLOW_HEADING_CATEGORY$$module$content,HR:FLOW_CATEGORY$$module$content,I:FLOW_PHRASING_CATEGORY$$module$content,IFRAME:{_EMBEDDED_:!0,_FLOW_:!0,_INTERACTIVE_:!0,_PHRASING_:!0},IMG:{_EMBEDDED_:!0,_FLOW_:!0,_FORM_ASSOCIATED_:!0,_INTERACTIVE_:!0,_PHRASING_:!0},INPUT:{_FLOW_:!0,_FORM_ASSOCIATED_:!0,_INTERACTIVE_:!0,_LABELABLE_:!0,_LISTED_:!0,_PHRASING_:!0,_REASSOCIATABLE_:!0,_RESETTABLE_:!0,_SUBMITTABLE_:!0},INS:FLOW_PHRASING_CATEGORY$$module$content,
KBD:FLOW_PHRASING_CATEGORY$$module$content,KEYGEN:{_FLOW_:!0,_FORM_ASSOCIATED_:!0,_INTERACTIVE_:!0,_LABELABLE_:!0,_LISTED_:!0,_PHRASING_:!0,_REASSOCIATABLE_:!0,_RESETTABLE_:!0,_SUBMITTABLE_:!0},LABEL:{_FLOW_:!0,_FORM_ASSOCIATED_:!0,_INTERACTIVE_:!0,_PHRASING_:!0,_REASSOCIATABLE_:!0},LEGEND:{},LI:{},LINK:{_FLOW_:!0,_METADATA_:!0,_PHRASING_:!0},MAIN:FLOW_CATEGORY$$module$content,MAP:FLOW_PHRASING_CATEGORY$$module$content,MARK:FLOW_PHRASING_CATEGORY$$module$content,MENU:FLOW_CATEGORY$$module$content,
MENUITEM:FLOW_CATEGORY$$module$content,META:{_FLOW_:!0,_METADATA_:!0,_PHRASING_:!0},METER:{_FLOW_:!0,_LABELABLE_:!0,_PHRASING_:!0},NAV:{_FLOW_:!0,_SECTIONING_:!0},NOSCRIPT:{_FLOW_:!0,_METADATA_:!0,_PHRASING_:!0},OBJECT:{_FLOW_:!0,_EMBEDDABLE_:!0,_FORM_ASSOCIATED_:!0,_INTERACTIVE_:!0,_LISTED_:!0,_PHRASING_:!0,_REASSOCIATABLE_:!0,_SUBMITTABLE_:!0},OL:FLOW_CATEGORY$$module$content,OPTGROUP:{},OPTION:{},OUTPUT:{_FLOW_:!0,_PHRASING_:!0,_LISTED_:!0,_LABELABLE_:!0,_RESETTALBE_:!0,_REASSOCIATABLE_:!0,_FORM_ASSOCIATED_:!0},
P:FLOW_CATEGORY$$module$content,PARAM:{},PRE:FLOW_CATEGORY$$module$content,PROGRESS:{_FLOW_:!0,_PHRASING_:!0,_LABELABLE_:!0},Q:FLOW_PHRASING_CATEGORY$$module$content,RP:{},RT:{},RUBY:FLOW_PHRASING_CATEGORY$$module$content,S:FLOW_PHRASING_CATEGORY$$module$content,SAMP:FLOW_PHRASING_CATEGORY$$module$content,SCRIPT:{_FLOW_:!0,_PHRASING_:!0,_METADATA_:!0,_SCRIPT_SUPPORTING_:!0},SECTION:{_FLOW_:!0,_SECTIONING_:!0},SELECT:{_FLOW_:!0,_PHRASING_:!0,_INTERACTIVE_:!0,_LISTED_:!0,_LABELABLE_:!0,_SUBMITTALBE_:!0,
_RESETTALBE_:!0,_REASSOCIATABLE_:!0,_FORM_ASSOCIATED_:!0},SMALL:FLOW_PHRASING_CATEGORY$$module$content,SOURCE:{},SPAN:FLOW_PHRASING_CATEGORY$$module$content,STRONG:FLOW_PHRASING_CATEGORY$$module$content,STYLE:{_FLOW_:!0,_METADATA_:!0},SUB:FLOW_PHRASING_CATEGORY$$module$content,SUMMARY:{},SUP:FLOW_PHRASING_CATEGORY$$module$content,TABLE:FLOW_CATEGORY$$module$content,TBODY:{},TD:{_SECTIONING_ROOT_:!0},TEMPLATE:{_FLOW_:!0,_METADATA_:!0,_PHRASING_:!0,_SCRIPT_SUPPORTING_:!0},TEXTAREA:{_FLOW_:!0,_PHRASING_:!0,
_INTERACTIVE_:!0,_LISTED_:!0,_LABELABLE_:!0,_SUBMITTALBE_:!0,_RESETTALBE_:!0,_REASSOCIATABLE_:!0,_FORM_ASSOCIATED_:!0},TFOOT:{},TH:{},THEAD:{},TIME:FLOW_PHRASING_CATEGORY$$module$content,TITLE:{_METADATA_:!0},TR:{},TRACK:{},U:FLOW_PHRASING_CATEGORY$$module$content,UL:FLOW_CATEGORY$$module$content,VAR:FLOW_PHRASING_CATEGORY$$module$content,VIDEO:{_FLOW_:!0,_PHRASING_:!0,_EMBEDDED_:!0,_INTERACTIVE_:!0},WBR:FLOW_PHRASING_CATEGORY$$module$content,"#TEXT":FLOW_PHRASING_CATEGORY$$module$content},ATTRIBUTES_WHITELIST$$module$content=
{IMG:["alt","src"],A:["href","name","_target"],TD:["colspan","rowspan"],TH:["colspan","rowspan"],OL:["start","type"],"*":["xstyle"]},STYLES_WHITELIST$$module$content={TABLE:["width"],IMG:["width","height"],"*":"color font-family font-size font-weight font-stlye font-decoration background background-image background-color".split(" ")},NODES_BLACKLIST$$module$content="AUDIO COMMAND COLGROUP IFRAME INPUT INS KBD KEYGEN LINK META NOSCRIPT OUTPUT Q RUBY SAMP SCRIPT SELECT STYLE TEMPLATE TEXTAREA TITLE WBR".split(" ");
function allowsNesting$$module$content(a,b){var c;a=a.toUpperCase();b=b.toUpperCase();var d=ALLOWED_CHILDREN$$module$content[a];if(!d)return!1;if("string"===typeof d){if(d===b||(c=CONTENT_CATEGORIES$$module$content[b])&&c[d])return!0}else{if(d[b])return!0;c=CONTENT_CATEGORIES$$module$content[b];for(var e in c)if(c.hasOwnProperty(e)&&d[e])return!0}return!1}
var module$content={allowsNesting:allowsNesting$$module$content,NODES_BLACKLIST:NODES_BLACKLIST$$module$content,STYLES_WHITELIST:STYLES_WHITELIST$$module$content,ATTRIBUTES_WHITELIST:ATTRIBUTES_WHITELIST$$module$content};function identity$$module$functions(a){return a}function noop$$module$functions(){}function returnTrue$$module$functions(){return!0}function returnFalse$$module$functions(){return!1}function isNou$$module$functions(a){return null==a}function complement$$module$functions(a){return function(){return!a.apply(this,arguments)}}function partial$$module$functions(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments,0)))}}
function outparameter$$module$functions(a){var b=a;return function(){arguments.length&&(b=arguments[0]);return b}}function strictEquals$$module$functions(a,b){return a===b}function comp$$module$functions(){var a=arguments,b=a.length;return function(){var c,d=b;for(0<d--&&(c=a[d].apply(this,arguments));0<d--;)c=a[d].call(this,c);return c}}function and$$module$functions(){var a=arguments,b=a.length;return function(){for(var c=0;c<b;c++)if(!a[c].apply(this,arguments))return!1;return!0}}
function constantly$$module$functions(a){return function(){return a}}function is$$module$functions(a){return"function"===typeof a}function asMethod$$module$functions(a){var b=a.length;return 1===b?function(){return a(this)}:2===b?function(b){return a(this,b)}:3===b?function(b,d){return a(this,b,d)}:4===b?function(b,d,e){return a(this,b,d,e)}:function(){var b=Array.prototype.slice.call(arguments,0);b.unshift(this);return a.apply(null,b)}}
function extendType$$module$functions(a,b){for(var c in b)b.hasOwnProperty(c)&&(a.prototype[c]=asMethod$$module$functions(b[c]))}
var module$functions={identity:identity$$module$functions,noop:noop$$module$functions,returnTrue:returnTrue$$module$functions,returnFalse:returnFalse$$module$functions,complement:complement$$module$functions,partial:partial$$module$functions,outparameter:outparameter$$module$functions,strictEquals:strictEquals$$module$functions,comp:comp$$module$functions,and:and$$module$functions,constantly:constantly$$module$functions,is:is$$module$functions,isNou:isNou$$module$functions,asMethod:asMethod$$module$functions,
extendType:extendType$$module$functions};var Fn$$module$accessor=module$functions,Assert$$module$accessor=module$assert;function ensureAccessorLength$$module$accessor(a,b){var c=a.length,d=b.length;Assert$$module$accessor.assert(1<=c,Assert$$module$accessor.GETTER_AT_LEAST_1_ARG);Assert$$module$accessor.assert(2<=d,Assert$$module$accessor.SETTER_1_MORE_THAN_GETTER);Assert$$module$accessor.assert(c===d-1,Assert$$module$accessor.SETTER_1_MORE_THAN_GETTER);return c}
function accessorFn$$module$accessor(a,b,c){return function(){return 0<arguments.length-c?b.apply(null,arguments):a.apply(null,arguments)}}function Accessor$$module$accessor(a,b){var c=ensureAccessorLength$$module$accessor(a,b),c=1===c?function(c,e){return 1<arguments.length?b(c,e):a(c)}:2===c?function(c,e,f){return 2<arguments.length?b(c,e,f):a(c,e)}:accessorFn$$module$accessor(a,b,c);c.get=a;c.set=b;return c}
function asMethod$$module$accessor(a){var b=a.get,c=a.set;a=ensureAccessorLength$$module$accessor(b,c);a=1===a?function(a){return arguments.length?c(this,a):b(this)}:2===a?function(a,e){return 1<arguments.length?c(this,a,e):b(this,a)}:Fn$$module$accessor.asMethod(accessorFn$$module$accessor(b,c,a));a.get=b;a.set=c;return a}function fromString$$module$accessor(a){return Accessor$$module$accessor(function(b){return b[a]},function(b,c){b[a]=c;return b})}
function fromSymbol$$module$accessor(a){for(var b in a)if(a.hasOwnProperty(b))return fromString$$module$accessor(b);Assert$$module$accessor.error(Assert$$module$accessor.MISSING_SYMBOL)}Accessor$$module$accessor.fromString=fromString$$module$accessor;Accessor$$module$accessor.fromSymbol=fromSymbol$$module$accessor;Accessor$$module$accessor.asMethod=asMethod$$module$accessor;var module$accessor=Accessor$$module$accessor;var Fn$$module$animation=module$functions,requestAnimationFrame$$module$animation=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)};function easeLinear$$module$animation(a,b,c,d,e){return c+(d-c)*a}function easeOutQuint$$module$animation(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c}
function easeInOutQuint$$module$animation(a,b,c,d,e){return 1>(b/=e/2)?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c}function step$$module$animation(a){var b=(new Date).getTime();a.starttime||(a.starttime=b);var c=b-a.starttime,b=Math.min(1,c/a.duration),c=a.easing(b,c,0,1,a.duration);return a.interval(a.start+a.delta*c,b)?1:b}
function animate$$module$animation(a,b,c,d,e){var f={start:a,delta:b-a,duration:d||1,interval:e||Fn$$module$animation.noop,easing:c||easeOutQuint$$module$animation};(function h(){1>step$$module$animation(f)&&requestAnimationFrame$$module$animation(h)})();return f}var module$animation={step:step$$module$animation,animate:animate$$module$animation,easeLinear:easeLinear$$module$animation,easeOutQuint:easeOutQuint$$module$animation,easeInOutQuint:easeInOutQuint$$module$animation,requestAnimationFrame:requestAnimationFrame$$module$animation};var Fn$$module$arrays=module$functions;function equal$$module$arrays(a,b,c){var d,e=a.length;if(e!==b.length)return!1;c=c||Fn$$module$arrays.strictEquals;for(d=0;d<e;d++)if(!c(a[d],b[d]))return!1;return!0}function contains$$module$arrays(a,b){return-1!==a.indexOf(b)}function intersect$$module$arrays(a,b){return a.filter(function(a){return contains$$module$arrays(b,a)})}function difference$$module$arrays(a,b){return a.filter(function(a){return!contains$$module$arrays(b,a)})}
function last$$module$arrays(a){return a.length?a[a.length-1]:null}function second$$module$arrays(a){return a[1]}function coerce$$module$arrays(a){return Array.prototype.slice.call(a,0)}function mapcat$$module$arrays(a,b){return a.reduce(function(a,d){return a.concat(b(d))},[])}function partition$$module$arrays(a,b){return a.reduce(function(a,d){var e=last$$module$arrays(a);e&&e.length<b?e.push(d):a.push([d]);return a},[])}
function someIndex$$module$arrays(a,b){var c=-1;a.some(function(a,e){if(b(a))return c=e,!0});return c}function some$$module$arrays(a,b){var c=someIndex$$module$arrays(a,b);return-1===c?null:a[c]}function split$$module$arrays(a,b){var c=someIndex$$module$arrays(a,b),c=-1===c?a.length:c;return[a.slice(0,c),a.slice(c)]}function unique$$module$arrays(a){var b=[];a.forEach(function(a){-1===b.indexOf(a)&&b.push(a)});return b}
var module$arrays={contains:contains$$module$arrays,difference:difference$$module$arrays,equal:equal$$module$arrays,intersect:intersect$$module$arrays,second:second$$module$arrays,last:last$$module$arrays,coerce:coerce$$module$arrays,mapcat:mapcat$$module$arrays,partition:partition$$module$arrays,some:some$$module$arrays,someIndex:someIndex$$module$arrays,split:split$$module$arrays,unique:unique$$module$arrays};var VOID_ELEMENTS$$module$html$predicates={AREA:!0,BASE:!0,BR:!0,COL:!0,COMMAND:!0,EMBED:!0,HR:!0,IMG:!0,INPUT:!0,KEYGEN:!0,LINK:!0,META:!0,PARAM:!0,SOURCE:!0,TRACK:!0,WBR:!0},BLOCK_LEVEL_ELEMENTS$$module$html$predicates={ADDRESS:!0,ARTICLE:!0,ASIDE:!0,AUDIO:!0,BLOCKQUOTE:!0,CANVAS:!0,DD:!0,DIV:!0,DL:!0,FIELDSET:!0,FIGCAPTION:!0,FIGURE:!0,FOOTER:!0,FORM:!0,H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0,HEADER:!0,HGROUP:!0,HR:!0,NOSCRIPT:!0,OL:!0,OUTPUT:!0,P:!0,PRE:!0,SECTION:!0,TABLE:!0,TFOOT:!0,UL:!0,VIDEO:!0},
TEXT_LEVEL_SEMANTIC_ELEMENTS$$module$html$predicates={A:!0,ABBR:!0,B:!0,BDI:!0,BDO:!0,BR:!0,CITE:!0,CODE:!0,DATA:!0,DFN:!0,EM:!0,I:!0,KBD:!0,MARK:!0,Q:!0,RP:!0,RT:!0,RUBY:!0,S:!0,SAMP:!0,SMALL:!0,SPAN:!0,STRONG:!0,SUB:!0,SUP:!0,TIME:!0,U:!0,VAR:!0,WBR:!0},LIST_CONTAINERS$$module$html$predicates={OL:!0,UL:!0,DL:!0,MENU:!0},LIST_ITEMS$$module$html$predicates={LI:!0,DT:!0,DD:!0},GROUP_CONTAINERS$$module$html$predicates={FIELDSET:!0,OBJECT:!0,FIGURE:!0,AUDIO:!0,SELECT:!0,COLGROUP:!0,HGROUP:!0,TABLE:!0,
TBODY:!0,TR:!0,OL:!0,UL:!0,DL:!0,MENU:!0},GROUPED_ELEMENTS$$module$html$predicates={LI:["OL","UL","DL"],DT:["DL"],DD:["DL"],TBODY:["TABLE"],TR:["TABLE","TBODY"],TH:["TABLE","TBODY"],TD:["TR","TH"]};function isGroupContainer$$module$html$predicates(a){return GROUP_CONTAINERS$$module$html$predicates[a.nodeName]}function isGroupedElement$$module$html$predicates(a){return!!GROUPED_ELEMENTS$$module$html$predicates[a.nodeName]}
function isListItem$$module$html$predicates(a){return!!LIST_ITEMS$$module$html$predicates[a.nodeName]}function isListContainer$$module$html$predicates(a){return!!LIST_CONTAINERS$$module$html$predicates[a.nodeName]}function isTableContainer$$module$html$predicates(a){return"TABLE"===a.nodeName}function isVoidNode$$module$html$predicates(a){return!!VOID_ELEMENTS$$module$html$predicates[a.nodeName]}
function isBlockNode$$module$html$predicates(a){return!!BLOCK_LEVEL_ELEMENTS$$module$html$predicates[a.nodeName]}function isInlineNode$$module$html$predicates(a){return!isBlockNode$$module$html$predicates(a)}function isTextLevelSemanticNode$$module$html$predicates(a){return!!TEXT_LEVEL_SEMANTIC_ELEMENTS$$module$html$predicates[a.nodeName]}var HEADINGS$$module$html$predicates={H1:!0,H2:!0,H3:!0,H4:!0,H5:!0,H6:!0};
function isHeading$$module$html$predicates(a){return!!HEADINGS$$module$html$predicates[a.nodeName]}
var module$html$predicates={isBlockNode:isBlockNode$$module$html$predicates,isGroupContainer:isGroupContainer$$module$html$predicates,isGroupedElement:isGroupedElement$$module$html$predicates,isHeading:isHeading$$module$html$predicates,isInlineNode:isInlineNode$$module$html$predicates,isListContainer:isListContainer$$module$html$predicates,isListItem:isListItem$$module$html$predicates,isTableContainer:isTableContainer$$module$html$predicates,isTextLevelSemanticNode:isTextLevelSemanticNode$$module$html$predicates,
isVoidNode:isVoidNode$$module$html$predicates};var Arrays$$module$maps=module$arrays,Assert$$module$maps=module$assert;function isEmpty$$module$maps(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function fillKeys$$module$maps(a,b,c){for(var d=b.length;d--;)a[b[d]]=c;return a}function forEach$$module$maps(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c,a)}function selectVals$$module$maps(a,b,c){return b.map(function(b){return a.hasOwnProperty(b)?a[b]:c})}
function filter$$module$maps(a,b){var c={};forEach$$module$maps(a,function(d,e){b(d,e,a)&&(c[e]=d)});return c}function keys$$module$maps(a){var b=[];forEach$$module$maps(a,function(a,d){b.push(d)});return b}function vals$$module$maps(a){return selectVals$$module$maps(a,keys$$module$maps(a))}function extend$$module$maps(a){var b;for(b=1;b<arguments.length;b++){var c=arguments[b];c&&forEach$$module$maps(c,function(b,c){a[c]=b})}return a}
function merge$$module$maps(){return extend$$module$maps.apply(null,[{}].concat(Arrays$$module$maps.coerce(arguments)))}function clone$$module$maps(a){Assert$$module$maps.assertNotNou(a);return extend$$module$maps({},a)}function cloneSet$$module$maps(a,b,c){a=clone$$module$maps(a);a[b]=c;return a}function cloneDelete$$module$maps(a,b){a=clone$$module$maps(a);delete a[b];return a}function isMap$$module$maps(a){return!(!a||!a.constructor||"[object Object]"!==Object.prototype.toString.call(a))}
function create$$module$maps(a){return Object.create(null)}function mapTuples$$module$maps(a){var b={};a.forEach(function(a){b[a[0]]=a[1]});return b}
var module$maps={isEmpty:isEmpty$$module$maps,fillKeys:fillKeys$$module$maps,keys:keys$$module$maps,vals:vals$$module$maps,selectVals:selectVals$$module$maps,filter:filter$$module$maps,forEach:forEach$$module$maps,extend:extend$$module$maps,merge:merge$$module$maps,isMap:isMap$$module$maps,clone:clone$$module$maps,cloneSet:cloneSet$$module$maps,cloneDelete:cloneDelete$$module$maps,create:create$$module$maps,mapTuples:mapTuples$$module$maps};var Fn$$module$delayed_map=module$functions,Maps$$module$delayed_map=module$maps,Assert$$module$delayed_map=module$assert,REALIZED_NONE$$module$delayed_map=0,REALIZED_KEYS$$module$delayed_map=1,REALIZED_KEYS_VALUES$$module$delayed_map=2,NOT_REALIZED_PLACEHOLDER$$module$delayed_map={},NOT_PRESENT_PLACEHOLDER$$module$delayed_map={},SPECIAL_PRIVATE_VALUE$$module$delayed_map={};
function DelayedMap$$module$delayed_map(a,b,c){if(c!==SPECIAL_PRIVATE_VALUE$$module$delayed_map)return new DelayedMap$$module$delayed_map(a,b,SPECIAL_PRIVATE_VALUE$$module$delayed_map);this._map_data=null;this._map_source=b;this._map_opts=a;this._map_realized=REALIZED_NONE$$module$delayed_map}function ensureData$$module$delayed_map(a){return a._map_data=a._map_data||{}}
function realize$$module$delayed_map(a){var b=a._map_realized;if(b&REALIZED_KEYS_VALUES$$module$delayed_map)return a._map_data;var c=a._map_opts.realize(a._map_source);a._map_data=c;a._map_realized=b|REALIZED_KEYS$$module$delayed_map|REALIZED_KEYS_VALUES$$module$delayed_map;a._map_source=null;return c}function isRealized$$module$delayed_map(a){return!!(a._map_realized&REALIZED_KEYS_VALUES$$module$delayed_map)}
function keys$$module$delayed_map(a){var b=ensureData$$module$delayed_map(a),c=a._map_realized;if(c&REALIZED_KEYS$$module$delayed_map)return Maps$$module$delayed_map.keys(b).filter(function(a){return b[a]!==NOT_PRESENT_PLACEHOLDER$$module$delayed_map});var d=a._map_opts;d.keys?(d=d.keys(a._map_source),d.forEach(function(a){b.hasOwnProperty(a)||(b[a]=NOT_REALIZED_PLACEHOLDER$$module$delayed_map)}),a._map_realized=c|REALIZED_KEYS$$module$delayed_map):d=Maps$$module$delayed_map.keys(realize$$module$delayed_map(a));
return d}function getCached$$module$delayed_map(a,b,c){var d=ensureData$$module$delayed_map(a);return d.hasOwnProperty(b)?d[b]:a._map_realized&REALIZED_KEYS$$module$delayed_map?NOT_PRESENT_PLACEHOLDER$$module$delayed_map:d[b]=c(a,b)}
function getPresence$$module$delayed_map(a,b){var c=a._map_opts,d=!1;return(d=c.has?c.has(a._map_source,b):NOT_PRESENT_PLACEHOLDER$$module$delayed_map!==getCached$$module$delayed_map(a,b,getValue$$module$delayed_map))?NOT_REALIZED_PLACEHOLDER$$module$delayed_map:NOT_PRESENT_PLACEHOLDER$$module$delayed_map}function getValue$$module$delayed_map(a,b){return a._map_opts.get(a._map_source,b,NOT_PRESENT_PLACEHOLDER$$module$delayed_map)}
function has$$module$delayed_map(a,b){return NOT_PRESENT_PLACEHOLDER$$module$delayed_map!==getCached$$module$delayed_map(a,b,getPresence$$module$delayed_map)}
function get$$module$delayed_map(a,b,c){var d=getCached$$module$delayed_map(a,b,getValue$$module$delayed_map);NOT_PRESENT_PLACEHOLDER$$module$delayed_map===d?d=c:NOT_REALIZED_PLACEHOLDER$$module$delayed_map===d&&(d=ensureData$$module$delayed_map(a)[b]=getValue$$module$delayed_map(a,b),Assert$$module$delayed_map.asserT(d!==NOT_PRESENT_PLACEHOLDER$$module$delayed_map));return d}var realizedFromMapOpts$$module$delayed_map={realize:Fn$$module$delayed_map.identity,get:Assert$$module$delayed_map.error};
function realized$$module$delayed_map(a){a=DelayedMap$$module$delayed_map(realizedFromMapOpts$$module$delayed_map,a);a.realize();return a}function makeGetWithDefault$$module$delayed_map(a,b){return function(c,d,e){c=a(c,d);return b(c)?e:c}}var mergeOpts$$module$delayed_map={realize:function(a){return Maps$$module$delayed_map.merge(a.map.realize(),a.obj)},get:function(a,b,c){var d=a.map;a=a.obj;return a.hasOwnProperty(b)?a[b]:d.get(b,c)}};
function mergeObject$$module$delayed_map(a,b,c){!c||a._map_opts!==mergeOpts$$module$delayed_map||a._map_realized&REALIZED_KEYS_VALUES$$module$delayed_map||(b=Maps$$module$delayed_map.merge(a._map_source.obj,b),a=a._map_source.map);return DelayedMap$$module$delayed_map(mergeOpts$$module$delayed_map,{map:a,obj:b})}
Fn$$module$delayed_map.extendType(DelayedMap$$module$delayed_map,{keys:keys$$module$delayed_map,realize:realize$$module$delayed_map,isRealized:isRealized$$module$delayed_map,get:get$$module$delayed_map,has:has$$module$delayed_map,mergeObject:mergeObject$$module$delayed_map});DelayedMap$$module$delayed_map.realized=realized$$module$delayed_map;DelayedMap$$module$delayed_map.makeGetWithDefault=makeGetWithDefault$$module$delayed_map;var module$delayed_map=DelayedMap$$module$delayed_map;function anyRx$$module$misc(a,b){var c,d;c=0;for(d=a.length;c<d;c++)if(a[c].test(b))return!0;return!1}function defined$$module$misc(a){return"undefined"!==typeof a}function copy$$module$misc(a){if(!a)return a;var b,c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c}var module$misc={anyRx:anyRx$$module$misc,defined:defined$$module$misc,copy:copy$$module$misc};var Arrays$$module$dom$nodes=module$arrays,Misc$$module$dom$nodes=module$misc,Nodes$$module$dom$nodes={ELEMENT:1,ATTR:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENTTYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};function isTextNode$$module$dom$nodes(a){return Nodes$$module$dom$nodes.TEXT===a.nodeType}function isElementNode$$module$dom$nodes(a){return Nodes$$module$dom$nodes.ELEMENT===a.nodeType}
function isFragmentNode$$module$dom$nodes(a){return Nodes$$module$dom$nodes.DOCUMENT_FRAGMENT===a.nodeType}function numChildren$$module$dom$nodes(a){return a.childNodes.length}function children$$module$dom$nodes(a){return Arrays$$module$dom$nodes.coerce(a.childNodes)}function nodeIndex$$module$dom$nodes(a){for(var b=-1;a;)a=a.previousSibling,b++;return b}
function nodeLength$$module$dom$nodes(a){return isElementNode$$module$dom$nodes(a)||isFragmentNode$$module$dom$nodes(a)?numChildren$$module$dom$nodes(a):isTextNode$$module$dom$nodes(a)?a.length:0}function hasChildren$$module$dom$nodes(a){return 0<numChildren$$module$dom$nodes(a)}function nthChild$$module$dom$nodes(a,b){return a.childNodes[b]}
function nodeAtOffset$$module$dom$nodes(a,b){isElementNode$$module$dom$nodes(a)&&b<nodeLength$$module$dom$nodes(a)?a=nthChild$$module$dom$nodes(a,b):isTextNode$$module$dom$nodes(a)&&b===a.length&&(a=a.nextSibling||a.parentNode);return a}function isEmptyTextNode$$module$dom$nodes(a){return isTextNode$$module$dom$nodes(a)&&0===nodeLength$$module$dom$nodes(a)}function isSameNode$$module$dom$nodes(a,b){return a===b}
function translateNodeIndex$$module$dom$nodes(a,b,c){var d=0,e=0;for(a=a.firstChild;;){if(e>=b)return d;if(d>=c)return e;if(!a)break;if(isTextNode$$module$dom$nodes(a)){for(var f=-1;a&&isTextNode$$module$dom$nodes(a);)isEmptyTextNode$$module$dom$nodes(a)||(f=d),a=a.nextSibling,d+=1;if(-1!==f){if(f>=c)return e;e+=1}}else a=a.nextSibling,d+=1,e+=1}throw Error();}function realFromNormalizedIndex$$module$dom$nodes(a,b){return translateNodeIndex$$module$dom$nodes(a,b,Number.POSITIVE_INFINITY)}
function normalizedFromRealIndex$$module$dom$nodes(a,b){return translateNodeIndex$$module$dom$nodes(a,Number.POSITIVE_INFINITY,b)}function normalizedNumChildren$$module$dom$nodes(a){return normalizedFromRealIndex$$module$dom$nodes(a,numChildren$$module$dom$nodes(a))}function normalizedNodeIndex$$module$dom$nodes(a){return normalizedFromRealIndex$$module$dom$nodes(a.parentNode,nodeIndex$$module$dom$nodes(a))}
function normalizedNthChild$$module$dom$nodes(a,b){return nthChild$$module$dom$nodes(a,realFromNormalizedIndex$$module$dom$nodes(a,b))}function contains$$module$dom$nodes(a,b){return isElementNode$$module$dom$nodes(a)?a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):a!==b&&(isElementNode$$module$dom$nodes(b)?a.contains(b):b.parentNode&&(a===b.parentNode||a.contains(b.parentNode))):!1}function followedBy$$module$dom$nodes(a,b){return!!(a.compareDocumentPosition(b)&4)}
function offset$$module$dom$nodes(a){if(!Misc$$module$dom$nodes.defined(a.getBoundingClientRect))return{top:0,left:0};var b=a.getBoundingClientRect();return{top:b.top+window.pageYOffset-a.ownerDocument.body.clientTop,left:b.left+window.pageXOffset-a.ownerDocument.body.clientLeft}}function text$$module$dom$nodes(a){return a.textContent}function hasText$$module$dom$nodes(a){return 0<text$$module$dom$nodes(a).trim().length}function equals$$module$dom$nodes(a,b){return a.isEqualNode(b)}
function clone$$module$dom$nodes(a,b){return a.cloneNode("boolean"===typeof b?b:!0)}function cloneShallow$$module$dom$nodes(a){return a.cloneNode(!1)}function outerHtml$$module$dom$nodes(a){var b=a.ownerDocument.createElement("div");b.appendChild(a.cloneNode(!0));return b.innerHTML}
var module$dom$nodes={Nodes:Nodes$$module$dom$nodes,offset:offset$$module$dom$nodes,children:children$$module$dom$nodes,nodeAtOffset:nodeAtOffset$$module$dom$nodes,nthChild:nthChild$$module$dom$nodes,numChildren:numChildren$$module$dom$nodes,nodeIndex:nodeIndex$$module$dom$nodes,nodeLength:nodeLength$$module$dom$nodes,hasChildren:hasChildren$$module$dom$nodes,normalizedNthChild:normalizedNthChild$$module$dom$nodes,normalizedNodeIndex:normalizedNodeIndex$$module$dom$nodes,realFromNormalizedIndex:realFromNormalizedIndex$$module$dom$nodes,
normalizedNumChildren:normalizedNumChildren$$module$dom$nodes,isTextNode:isTextNode$$module$dom$nodes,isElementNode:isElementNode$$module$dom$nodes,isFragmentNode:isFragmentNode$$module$dom$nodes,isEmptyTextNode:isEmptyTextNode$$module$dom$nodes,isSameNode:isSameNode$$module$dom$nodes,text:text$$module$dom$nodes,hasText:hasText$$module$dom$nodes,equals:equals$$module$dom$nodes,contains:contains$$module$dom$nodes,followedBy:followedBy$$module$dom$nodes,clone:clone$$module$dom$nodes,cloneShallow:cloneShallow$$module$dom$nodes,
outerHtml:outerHtml$$module$dom$nodes};var Nodes$$module$dom$mutation=module$dom$nodes,Fn$$module$dom$mutation=module$functions,Arrays$$module$dom$mutation=module$arrays;function insert$$module$dom$mutation(a,b,c){c?b.appendChild(a):b.parentNode.insertBefore(a,b)}function insertAfter$$module$dom$mutation(a,b){insert$$module$dom$mutation(a,b.nextSibling||b.parentNode,!b.nextSibling)}function moveNextAll$$module$dom$mutation(a,b,c){for(var d;b;)d=b.nextSibling,a.insertBefore(b,c),b=d}
function append$$module$dom$mutation(a,b){insert$$module$dom$mutation(a,b,!0)}function walkUntil$$module$dom$mutation(a,b,c){a=Arrays$$module$dom$mutation.split(a,c||Fn$$module$dom$mutation.returnFalse);a[0].forEach(b);return a[1]}function move$$module$dom$mutation(a,b,c){return walkUntil$$module$dom$mutation(a,function(a){append$$module$dom$mutation(a,b)},c)}
function copy$$module$dom$mutation(a,b,c){return walkUntil$$module$dom$mutation(a,function(a){append$$module$dom$mutation(Nodes$$module$dom$mutation.clone(a),b)},c)}function moveBefore$$module$dom$mutation(a,b,c){return walkUntil$$module$dom$mutation(a,function(a){insert$$module$dom$mutation(a,b,!1)},c)}function moveAfter$$module$dom$mutation(a,b,c){return walkUntil$$module$dom$mutation(a,function(a){insertAfter$$module$dom$mutation(a,b);b=a},c)}
function replace$$module$dom$mutation(a,b){return a.parentNode.replaceChild(b,a)}function replaceShallow$$module$dom$mutation(a,b){move$$module$dom$mutation(Nodes$$module$dom$mutation.children(a),b);return replace$$module$dom$mutation(a,b)}function remove$$module$dom$mutation(a){a.parentNode.removeChild(a)}function removeShallow$$module$dom$mutation(a){moveBefore$$module$dom$mutation(Nodes$$module$dom$mutation.children(a),a);remove$$module$dom$mutation(a)}
function wrap$$module$dom$mutation(a,b){append$$module$dom$mutation(replace$$module$dom$mutation(a,b),b)}function wrapWith$$module$dom$mutation(a,b){var c=a.ownerDocument.createElement(b);wrap$$module$dom$mutation(a,c);return c}function removeChildren$$module$dom$mutation(a){Nodes$$module$dom$mutation.children(a).forEach(remove$$module$dom$mutation)}
function merge$$module$dom$mutation(a,b){for(var c;a&&b&&a.nodeName===b.nodeName&&!Nodes$$module$dom$mutation.isTextNode(a);){c=b.firstChild;moveNextAll$$module$dom$mutation(a,c,null);remove$$module$dom$mutation(b);if(!c)break;b=c;a=b.previousSibling}}
var module$dom$mutation={append:append$$module$dom$mutation,merge:merge$$module$dom$mutation,moveNextAll:moveNextAll$$module$dom$mutation,moveAfter:moveAfter$$module$dom$mutation,moveBefore:moveBefore$$module$dom$mutation,move:move$$module$dom$mutation,copy:copy$$module$dom$mutation,wrap:wrap$$module$dom$mutation,wrapWith:wrapWith$$module$dom$mutation,insert:insert$$module$dom$mutation,insertAfter:insertAfter$$module$dom$mutation,replace:replace$$module$dom$mutation,replaceShallow:replaceShallow$$module$dom$mutation,
remove:remove$$module$dom$mutation,removeShallow:removeShallow$$module$dom$mutation,removeChildren:removeChildren$$module$dom$mutation};var Nodes$$module$dom$traversing=module$dom$nodes,Fn$$module$dom$traversing=module$functions,Arrays$$module$dom$traversing=module$arrays;function forward$$module$dom$traversing(a){if(a.firstChild)return a.firstChild;for(;a&&!a.nextSibling;)a=a.parentNode;return a&&a.nextSibling}function backward$$module$dom$traversing(a){for(var b=a.previousSibling;b&&b.lastChild;)b=b.lastChild;return b||a.parentNode}
function find$$module$dom$traversing(a,b,c,d){c=c||Fn$$module$dom$traversing.returnFalse;if(c(a))return null;do{a=d(a);if(!a||c(a))break;if(b(a))return a}while(a);return null}function findForward$$module$dom$traversing(a,b,c){return find$$module$dom$traversing(a,b,c,forward$$module$dom$traversing)}function findBackward$$module$dom$traversing(a,b,c){return find$$module$dom$traversing(a,b,c,backward$$module$dom$traversing)}function nextSibling$$module$dom$traversing(a){return a.nextSibling}
function prevSibling$$module$dom$traversing(a){return a.previousSibling}function parent$$module$dom$traversing(a){return a.parentNode}function stepWhile$$module$dom$traversing(a,b,c,d){for(;a&&c(a,d);)a=b(a,d);return a}function stepNextWhile$$module$dom$traversing(a,b,c,d,e){return stepWhile$$module$dom$traversing(a,function(a){var d=c(a);b(a,e);return d},d,e)}
function stepNextUntil$$module$dom$traversing(a,b,c,d,e){return stepNextWhile$$module$dom$traversing(a,b,c,Fn$$module$dom$traversing.complement(d),e)}function nextWhile$$module$dom$traversing(a,b,c){return stepWhile$$module$dom$traversing(a,nextSibling$$module$dom$traversing,b,c)}function prevWhile$$module$dom$traversing(a,b,c){return stepWhile$$module$dom$traversing(a,prevSibling$$module$dom$traversing,b,c)}
function upWhile$$module$dom$traversing(a,b){return stepWhile$$module$dom$traversing(a,parent$$module$dom$traversing,b)}function nextUntil$$module$dom$traversing(a,b,c,d){stepNextUntil$$module$dom$traversing(a,b,nextSibling$$module$dom$traversing,c,d)}function prevUntil$$module$dom$traversing(a,b,c,d){stepNextUntil$$module$dom$traversing(a,b,prevSibling$$module$dom$traversing,c,d)}
function climbUntil$$module$dom$traversing(a,b,c,d){stepNextUntil$$module$dom$traversing(a,b,parent$$module$dom$traversing,c,d)}function walk$$module$dom$traversing(a,b,c){nextUntil$$module$dom$traversing(a,b,Fn$$module$dom$traversing.returnFalse,c)}function walkRec$$module$dom$traversing(a,b,c){Nodes$$module$dom$traversing.isElementNode(a)&&walk$$module$dom$traversing(a.firstChild,function(a){walkRec$$module$dom$traversing(a,b,c)});b(a,c)}
function walkUntilNode$$module$dom$traversing(a,b,c,d){nextUntil$$module$dom$traversing(a,b,function(a){return a===c},d)}function parentsUntil$$module$dom$traversing(a,b){for(var c=[],d=a.parentNode;d&&!b(d);)c.push(d),d=d.parentNode;return c}function parentsUntilIncl$$module$dom$traversing(a,b){var c=parentsUntil$$module$dom$traversing(a,b),d=c.length?c[c.length-1]:a;d.parentNode&&c.push(d.parentNode);return c}
function childAndParentsUntil$$module$dom$traversing(a,b){if(b(a))return[];var c=parentsUntil$$module$dom$traversing(a,b);c.unshift(a);return c}function childAndParentsUntilIncl$$module$dom$traversing(a,b){if(b(a))return[a];var c=parentsUntilIncl$$module$dom$traversing(a,b);c.unshift(a);return c}function childAndParentsUntilNode$$module$dom$traversing(a,b){return childAndParentsUntil$$module$dom$traversing(a,function(a){return a===b})}
function childAndParentsUntilInclNode$$module$dom$traversing(a,b){return childAndParentsUntilIncl$$module$dom$traversing(a,function(a){return a===b})}function nextNonAncestor$$module$dom$traversing(a,b,c,d){c=c||Fn$$module$dom$traversing.returnTrue;d=d||Fn$$module$dom$traversing.returnFalse;for(var e=a;e;)if(a=b?e.previousSibling:e.nextSibling){if(d(a))return null;if(c(a))return a;e=a}else{if(!e.parentNode||d(e.parentNode))return null;e=e.parentNode}}
function query$$module$dom$traversing(a,b){return Arrays$$module$dom$traversing.coerce(b.querySelectorAll(a))}function prevSiblings$$module$dom$traversing(a,b){if(!a.previousSibling)return[];var c=[];prevUntil$$module$dom$traversing(a.previousSibling,function(a){c.push(a)},b||Fn$$module$dom$traversing.returnFalse);return c.reverse()}
function nextSiblings$$module$dom$traversing(a,b){if(!a.nextSibling)return[];var c=[];nextUntil$$module$dom$traversing(a.nextSibling,function(a){c.push(a)},b||Fn$$module$dom$traversing.returnFalse);return c}function nodeAndPrevSiblings$$module$dom$traversing(a,b){return b&&b(a)?[]:[a].concat(prevSiblings$$module$dom$traversing(a,b))}function nodeAndNextSiblings$$module$dom$traversing(a,b){return b&&b(a)?[]:[a].concat(nextSiblings$$module$dom$traversing(a,b))}
var module$dom$traversing={query:query$$module$dom$traversing,nextNonAncestor:nextNonAncestor$$module$dom$traversing,nextUntil:nextUntil$$module$dom$traversing,nextWhile:nextWhile$$module$dom$traversing,nextSibling:nextSibling$$module$dom$traversing,nextSiblings:nextSiblings$$module$dom$traversing,prevUntil:prevUntil$$module$dom$traversing,prevWhile:prevWhile$$module$dom$traversing,prevSibling:prevSibling$$module$dom$traversing,prevSiblings:prevSiblings$$module$dom$traversing,nodeAndPrevSiblings:nodeAndPrevSiblings$$module$dom$traversing,
nodeAndNextSiblings:nodeAndNextSiblings$$module$dom$traversing,walk:walk$$module$dom$traversing,walkRec:walkRec$$module$dom$traversing,walkUntilNode:walkUntilNode$$module$dom$traversing,forward:forward$$module$dom$traversing,backward:backward$$module$dom$traversing,findForward:findForward$$module$dom$traversing,findBackward:findBackward$$module$dom$traversing,upWhile:upWhile$$module$dom$traversing,climbUntil:climbUntil$$module$dom$traversing,childAndParentsUntil:childAndParentsUntil$$module$dom$traversing,
childAndParentsUntilIncl:childAndParentsUntilIncl$$module$dom$traversing,childAndParentsUntilNode:childAndParentsUntilNode$$module$dom$traversing,childAndParentsUntilInclNode:childAndParentsUntilInclNode$$module$dom$traversing};var Misc$$module$events=module$misc,Assert$$module$events=module$assert;function add$$module$events(a,b,c,d){a.addEventListener?a.addEventListener(b,c,!!d):a.attachEvent?a.attachEvent("on"+b,c):Assert$$module$events.error()}function remove$$module$events(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,!!d):a.detachEvent?a.detachEvent("on"+b,c):Assert$$module$events.error()}
function dispatch$$module$events(a,b,c){b.dispatchEvent?(a=a.createEvent("Event"),a.initEvent(c,!0,!0),b.dispatchEvent(a)):b.fireEvent?(a=a.createEventObject(),a.type=c,b.fireEvent("on"+c,a)):Assert$$module$events.error()}function hasKeyModifier$$module$events(a,b){return-1<a.meta.indexOf(b)}function nextTick$$module$events(a){setTimeout(a,4)}
function setup$$module$events(a,b){add$$module$events(a,"resize",b);add$$module$events(a,"keyup",b);add$$module$events(a,"keydown",b);add$$module$events(a,"keypress",b);add$$module$events(a,"click",b);add$$module$events(a,"mouseup",b);add$$module$events(a,"mousedown",b);add$$module$events(a,"mousemove",b);add$$module$events(a,"dblclick",b);add$$module$events(a,"dragstart",b);add$$module$events(a,"drag",b);add$$module$events(a,"dragenter",b);add$$module$events(a,"dragexit",b);add$$module$events(a,
"dragleave",b);add$$module$events(a,"dragover",b);add$$module$events(a,"drop",b);add$$module$events(a,"dragend",b);add$$module$events(a,"paste",b)}function preventDefault$$module$events(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function stopPropagation$$module$events(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function suppress$$module$events(a){stopPropagation$$module$events(a);preventDefault$$module$events(a)}
var module$events={add:add$$module$events,remove:remove$$module$events,setup:setup$$module$events,hasKeyModifier:hasKeyModifier$$module$events,dispatch:dispatch$$module$events,nextTick:nextTick$$module$events,preventDefault:preventDefault$$module$events,stopPropagation:stopPropagation$$module$events,suppress:suppress$$module$events};var EVENTS$$module$mouse={mouseup:!0,mousedown:!0,mousemove:!0,dblclick:!0,dragstart:!0,dragover:!0,dragend:!0};function handle$$module$mouse(a){var b=a.nativeEvent;b&&"mousedown"===b.type&&(a.editor.selectionContext.formatting=[],a.editor.selectionContext.overrides=[],a.target=b.target);return a}var module$mouse={handle:handle$$module$mouse,EVENTS:EVENTS$$module$mouse};var Fn$$module$record=module$functions,Maps$$module$record=module$maps,Accessor$$module$record=module$accessor,Assert$$module$record=module$assert,NOT_TRANSIENT$$module$record=0,DISCARDED_TRANSIENT$$module$record=1,TRANSIENT$$module$record=2,SPECIAL_PRIVATE_VALUE$$module$record={};function ensureDefaults$$module$record(a,b){var c=a._record_values,d=c.length;d<b.length&&(c=c.concat(b.slice(d)),a._record_values=c);return c}
function newInstanceFromExisting$$module$record(a,b){return new a.constructor(b,SPECIAL_PRIVATE_VALUE$$module$record)}function cloneForWrite$$module$record(a){return newInstanceFromExisting$$module$record(a,a._record_values.slice(0))}
function assertRead$$module$record(a,b){Assert$$module$record.assert(!b||a.constructor===b,Assert$$module$record.RECORD_WRONG_TYPE);var c=a._record_transience;Assert$$module$record.assert(c===NOT_TRANSIENT$$module$record||c===TRANSIENT$$module$record,Assert$$module$record.READ_FROM_DISCARDED_TRANSIENT)}
function assertWrite$$module$record(a,b){Assert$$module$record.assert(!b||a.constructor===b,Assert$$module$record.RECORD_WRONG_TYPE);Assert$$module$record.assert(a._record_transience===NOT_TRANSIENT$$module$record,Assert$$module$record.PERSISTENT_WRITE_TO_TRANSIENT)}
function assertTransientWrite$$module$record(a,b){Assert$$module$record.assert(!b||a.constructor===b,Assert$$module$record.RECORD_WRONG_TYPE);Assert$$module$record.assert(a._record_transience===TRANSIENT$$module$record,Assert$$module$record.TRANSIENT_WRITE_TO_PERSISTENT)}function asPersistent$$module$record(a){assertTransientWrite$$module$record(a);a._record_transience=DISCARDED_TRANSIENT$$module$record;return newInstanceFromExisting$$module$record(a,a._record_values)}
function discardTransient$$module$record(a){a=asPersistent$$module$record(a);a._record_transience=TRANSIENT$$module$record;return a}function asTransient$$module$record(a){assertRead$$module$record(a);a=cloneForWrite$$module$record(a);a._record_transience=TRANSIENT$$module$record;return a}function getValue$$module$record(a,b,c){return ensureDefaults$$module$record(a,c)[b]}function setValue$$module$record(a,b,c,d){a=cloneForWrite$$module$record(a);ensureDefaults$$module$record(a,d)[c]=b;return a}
function setValueT$$module$record(a,b,c,d){a=discardTransient$$module$record(a);ensureDefaults$$module$record(a,d)[c]=b;return a}function isDelayValue$$module$record(a){return Array.isArray(a)&&a[0]===SPECIAL_PRIVATE_VALUE$$module$record}function realizeDelayValue$$module$record(a){var b;3<a.length?b=a[3]:(b=a[1](a[2]),a[3]=b);return b}
function addField$$module$record(a,b){function c(b,c){assertWrite$$module$record(b,a);return setValue$$module$record(b,c,e,d)}var d=a._record_defaults,e=a._record_defaults.length;d.push(b);c.setT=function(b,c){assertTransientWrite$$module$record(b,a);return setValueT$$module$record(b,c,e,d)};return Accessor$$module$record(function(b){assertRead$$module$record(b,a);var c=getValue$$module$record(b,e,d);isDelayValue$$module$record(c)&&(c=realizeDelayValue$$module$record(c),ensureDefaults$$module$record(b,
d)[e]=c);return c},c)}function set$$module$record(a,b,c){return b.set(a,c)}function get$$module$record(a,b){return b.get(a)}function setT$$module$record(a,b,c){return b.set.setT(a,c)}function delay$$module$record(a,b,c,d){return set$$module$record(a,b,[SPECIAL_PRIVATE_VALUE$$module$record,c,d])}function delayT$$module$record(a,b,c,d){return setT$$module$record(a,b,[SPECIAL_PRIVATE_VALUE$$module$record,c,d])}
function extend$$module$record(a,b){Maps$$module$record.forEach(b,function(b,d){var e=addField$$module$record(a,b);a.prototype[d]=Accessor$$module$record.asMethod(e)})}
function define$$module$record(a,b){function c(a,f){if(f!==SPECIAL_PRIVATE_VALUE$$module$record)return b(new c(d,SPECIAL_PRIVATE_VALUE$$module$record),a);this._record_values=a;this._record_transience=NOT_TRANSIENT$$module$record}Fn$$module$record.is(a)&&(b=a,a=null);b=b||Fn$$module$record.identity;var d=[];Fn$$module$record.extendType(c,{asTransient:asTransient$$module$record,asPersistent:asPersistent$$module$record,get:get$$module$record,set:set$$module$record,setT:setT$$module$record,delay:delay$$module$record,
delayT:delayT$$module$record});c.addField=Fn$$module$record.partial(addField$$module$record,c);c.extend=Fn$$module$record.partial(extend$$module$record,c);c._record_defaults=d;a&&extend$$module$record(c,a);return c}function hookSetter$$module$record(a,b,c){var d=a.set,e=d.setT;c=c||function(a){return b(a.asPersistent()).asTransient()};a=Accessor$$module$record(a.get,function(a,c){a=d(a,c);return a=b(a)});a.set.setT=function(a,b){a=e(a,b);return a=c(a)};return a}
function hookSetterRecompute$$module$record(a,b,c,d){return hookSetter$$module$record(a,function(a){return b.set(a,c(a))},d?function(a){return b.set.setT(a,d(a))}:null)}var module$record={define:define$$module$record,hookSetter:hookSetter$$module$record,hookSetterRecompute:hookSetterRecompute$$module$record};var Arrays$$module$strings=module$arrays,ZERO_WIDTH_CHARACTERS$$module$strings=["\\u200B","\\u200C","\\u200D","\\uFEFF"],NON_BREAKING_SPACE_CHARACTERS$$module$strings=["\\u00A0","\\u202F"],WHITE_SPACE_CHARACTERS$$module$strings="\\u0009 \\u000A \\u000B \\u000C \\u000D \\u0020 \\u0085 \\u00A0 \\u1680 \\u180E \\u2000 \\u2001 \\u2002 \\u2003 \\u2004 \\u2005 \\u2006 \\u2007 \\u2008 \\u2009 \\u200A \\u2028 \\u2029 \\u202F \\u205F \\u3000".split(" "),WORD_BREAKING_CHARACTERS$$module$strings="A- Z a- z \u00aa \u00b5 \u00ba \u00c0- \u00d6 \u00d8- \u00f6 \u00f8- \u02c1 \u02c6- \u02d1 \u02e0- \u02e4 \u02ec \u02ee \u0370- \u0374 \u0376 \u0377 \u037a- \u037d \u0386 \u0388- \u038a \u038c \u038e- \u03a1 \u03a3- \u03f5 \u03f7- \u0481 \u048a- \u0525 \u0531- \u0556 \u0559 \u0561- \u0587 \u05d0- \u05ea \u05f0- \u05f2 \u0621- \u064a \u066e \u066f \u0671- \u06d3 \u06d5 \u06e5 \u06e6 \u06ee \u06ef \u06fa- \u06fc \u06ff \u0710 \u0712- \u072f \u074d- \u07a5 \u07b1 \u07ca- \u07ea \u07f4 \u07f5 \u07fa \u0800- \u0815 \u081a \u0824 \u0828 \u0904- \u0939 \u093d \u0950 \u0958- \u0961 \u0971 \u0972 \u0979- \u097f \u0985- \u098c \u098f \u0990 \u0993- \u09a8 \u09aa- \u09b0 \u09b2 \u09b6- \u09b9 \u09bd \u09ce \u09dc \u09dd \u09df- \u09e1 \u09f0 \u09f1 \u0a05- \u0a0a \u0a0f \u0a10 \u0a13- \u0a28 \u0a2a- \u0a30 \u0a32 \u0a33 \u0a35 \u0a36 \u0a38 \u0a39 \u0a59- \u0a5c \u0a5e \u0a72- \u0a74 \u0a85- \u0a8d \u0a8f- \u0a91 \u0a93- \u0aa8 \u0aaa- \u0ab0 \u0ab2 \u0ab3 \u0ab5- \u0ab9 \u0abd \u0ad0 \u0ae0 \u0ae1 \u0b05- \u0b0c \u0b0f \u0b10 \u0b13- \u0b28 \u0b2a- \u0b30 \u0b32 \u0b33 \u0b35- \u0b39 \u0b3d \u0b5c \u0b5d \u0b5f- \u0b61 \u0b71 \u0b83 \u0b85- \u0b8a \u0b8e- \u0b90 \u0b92- \u0b95 \u0b99 \u0b9a \u0b9c \u0b9e \u0b9f \u0ba3 \u0ba4 \u0ba8- \u0baa \u0bae- \u0bb9 \u0bd0 \u0c05- \u0c0c \u0c0e- \u0c10 \u0c12- \u0c28 \u0c2a- \u0c33 \u0c35- \u0c39 \u0c3d \u0c58 \u0c59 \u0c60 \u0c61 \u0c85- \u0c8c \u0c8e- \u0c90 \u0c92- \u0ca8 \u0caa- \u0cb3 \u0cb5- \u0cb9 \u0cbd \u0cde \u0ce0 \u0ce1 \u0d05- \u0d0c \u0d0e- \u0d10 \u0d12- \u0d28 \u0d2a- \u0d39 \u0d3d \u0d60 \u0d61 \u0d7a- \u0d7f \u0d85- \u0d96 \u0d9a- \u0db1 \u0db3- \u0dbb \u0dbd \u0dc0- \u0dc6 \u0e01- \u0e30 \u0e32 \u0e33 \u0e40- \u0e46 \u0e81 \u0e82 \u0e84 \u0e87 \u0e88 \u0e8a \u0e8d \u0e94- \u0e97 \u0e99- \u0e9f \u0ea1- \u0ea3 \u0ea5 \u0ea7 \u0eaa \u0eab \u0ead- \u0eb0 \u0eb2 \u0eb3 \u0ebd \u0ec0- \u0ec4 \u0ec6 \u0edc \u0edd \u0f00 \u0f40- \u0f47 \u0f49- \u0f6c \u0f88- \u0f8b \u1000- \u102a \u103f \u1050- \u1055 \u105a- \u105d \u1061 \u1065 \u1066 \u106e- \u1070 \u1075- \u1081 \u108e \u10a0- \u10c5 \u10d0- \u10fa \u10fc \u1100- \u1248 \u124a- \u124d \u1250- \u1256 \u1258 \u125a- \u125d \u1260- \u1288 \u128a- \u128d \u1290- \u12b0 \u12b2- \u12b5 \u12b8- \u12be \u12c0 \u12c2- \u12c5 \u12c8- \u12d6 \u12d8- \u1310 \u1312- \u1315 \u1318- \u135a \u1380- \u138f \u13a0- \u13f4 \u1401- \u166c \u166f- \u167f \u1681- \u169a \u16a0- \u16ea \u1700- \u170c \u170e- \u1711 \u1720- \u1731 \u1740- \u1751 \u1760- \u176c \u176e- \u1770 \u1780- \u17b3 \u17d7 \u17dc \u1820- \u1877 \u1880- \u18a8 \u18aa \u18b0- \u18f5 \u1900- \u191c \u1950- \u196d \u1970- \u1974 \u1980- \u19ab \u19c1- \u19c7 \u1a00- \u1a16 \u1a20- \u1a54 \u1aa7 \u1b05- \u1b33 \u1b45- \u1b4b \u1b83- \u1ba0 \u1bae \u1baf \u1c00- \u1c23 \u1c4d- \u1c4f \u1c5a- \u1c7d \u1ce9- \u1cec \u1cee- \u1cf1 \u1d00- \u1dbf \u1e00- \u1f15 \u1f18- \u1f1d \u1f20- \u1f45 \u1f48- \u1f4d \u1f50- \u1f57 \u1f59 \u1f5b \u1f5d \u1f5f- \u1f7d \u1f80- \u1fb4 \u1fb6- \u1fbc \u1fbe \u1fc2- \u1fc4 \u1fc6- \u1fcc \u1fd0- \u1fd3 \u1fd6- \u1fdb \u1fe0- \u1fec \u1ff2- \u1ff4 \u1ff6- \u1ffc \u2071 \u207f \u2090- \u2094 \u2102 \u2107 \u210a- \u2113 \u2115 \u2119- \u211d \u2124 \u2126 \u2128 \u212a- \u212d \u212f- \u2139 \u213c- \u213f \u2145- \u2149 \u214e \u2183 \u2184 \u2c00- \u2c2e \u2c30- \u2c5e \u2c60- \u2ce4 \u2ceb- \u2cee \u2d00- \u2d25 \u2d30- \u2d65 \u2d6f \u2d80- \u2d96 \u2da0- \u2da6 \u2da8- \u2dae \u2db0- \u2db6 \u2db8- \u2dbe \u2dc0- \u2dc6 \u2dc8- \u2dce \u2dd0- \u2dd6 \u2dd8- \u2dde \u2e2f \u3005 \u3006 \u3031- \u3035 \u303b \u303c \u3041- \u3096 \u309d- \u309f \u30a1- \u30fa \u30fc- \u30ff \u3105- \u312d \u3131- \u318e \u31a0- \u31b7 \u31f0- \u31ff \u3400- \u4db5 \u4e00- \u9fcb \ua000- \ua48c \ua4d0- \ua4fd \ua500- \ua60c \ua610- \ua61f \ua62a \ua62b \ua640- \ua65f \ua662- \ua66e \ua67f- \ua697 \ua6a0- \ua6e5 \ua717- \ua71f \ua722- \ua788 \ua78b \ua78c \ua7fb- \ua801 \ua803- \ua805 \ua807- \ua80a \ua80c- \ua822 \ua840- \ua873 \ua882- \ua8b3 \ua8f2- \ua8f7 \ua8fb \ua90a- \ua925 \ua930- \ua946 \ua960- \ua97c \ua984- \ua9b2 \ua9cf \uaa00- \uaa28 \uaa40- \uaa42 \uaa44- \uaa4b \uaa60- \uaa76 \uaa7a \uaa80- \uaaaf \uaab1 \uaab5 \uaab6 \uaab9- \uaabd \uaac0 \uaac2 \uaadb- \uaadd \uabc0- \uabe2 \uac00- \ud7a3 \ud7b0- \ud7c6 \ud7cb- \ud7fb \uf900- \ufa2d \ufa30- \ufa6d \ufa70- \ufad9 \ufb00- \ufb06 \ufb13- \ufb17 \ufb1d \ufb1f- \ufb28 \ufb2a- \ufb36 \ufb38- \ufb3c \ufb3e \ufb40 \ufb41 \ufb43 \ufb44 \ufb46- \ufbb1 \ufbd3- \ufd3d \ufd50- \ufd8f \ufd92- \ufdc7 \ufdf0- \ufdfb \ufe70- \ufe74 \ufe76- \ufefc \uff21- \uff3a \uff41- \uff5a \uff66- \uffbe \uffc2- \uffc7 \uffca- \uffcf \uffd2- \uffd7 \uffda- \uffdc".split(" "),
WHITE_SPACE$$module$strings=new RegExp("["+WHITE_SPACE_CHARACTERS$$module$strings.join("")+"]"),WHITE_SPACES$$module$strings=new RegExp("["+WHITE_SPACE_CHARACTERS$$module$strings.join("")+"]+"),ZERO_WIDTH_SPACE$$module$strings=new RegExp("["+ZERO_WIDTH_CHARACTERS$$module$strings.join("")+"]"),NON_BREAKING_SPACE$$module$strings=new RegExp("["+NON_BREAKING_SPACE_CHARACTERS$$module$strings.join("")+"]"),joinedWhiteSpaces$$module$strings=WHITE_SPACE_CHARACTERS$$module$strings.join(""),SPACE$$module$strings=
new RegExp("["+joinedWhiteSpaces$$module$strings+ZERO_WIDTH_CHARACTERS$$module$strings.join("")+NON_BREAKING_SPACE_CHARACTERS$$module$strings.join("")+"]"),NOT_SPACE$$module$strings=new RegExp("[^"+joinedWhiteSpaces$$module$strings+ZERO_WIDTH_CHARACTERS$$module$strings.join("")+NON_BREAKING_SPACE_CHARACTERS$$module$strings.join("")+"]"),wbc$$module$strings=WORD_BREAKING_CHARACTERS$$module$strings.join(""),WORD_BREAKING_CHARACTER$$module$strings=new RegExp("["+wbc$$module$strings+"]"),WORD_BOUNDARY$$module$strings=
new RegExp("[^"+wbc$$module$strings+"]"),WORD_BOUNDARY_FROM_END$$module$strings=new RegExp("[^"+wbc$$module$strings+"]["+wbc$$module$strings+"]*$"),CONTROL_CHARACTER$$module$strings=/[\x00-\x1f\x7f-\x9f]/,TERMINAL_WHITE_SPACES$$module$strings=new RegExp("^["+joinedWhiteSpaces$$module$strings+"]+|["+joinedWhiteSpaces$$module$strings+"]+$");function words$$module$strings(a){a=a.trim().replace(TERMINAL_WHITE_SPACES$$module$strings,"");return isEmpty$$module$strings(a)?[]:a.split(/\s+/g)}
var dashesToCamelCase$$module$strings=function(){var a=/[\-]([a-z])/gi,b=function(a,b){return b.toUpperCase()};return function(c){return c.replace(a,b)}}(),camelCaseToDashes$$module$strings=function(){var a=/[A-Z]/g,b=function(a){return"-"+a.toLowerCase()};return function(c){return c.replace(a,b)}}();
function splitIncl$$module$strings(a,b){for(var c=[],d=0,e;null!=(e=b.exec(a));)d<e.index&&(c.push(a.substring(d,e.index)),d=e.index),d+=e[0].length,c.push(e[0]);d<a.length&&c.push(a.substring(d,a.length));return c}function isEmpty$$module$strings(a){return""===a||null==a}function isControlCharacter$$module$strings(a){return CONTROL_CHARACTER$$module$strings.test(a)}
function addToList$$module$strings(a){for(var b=a.split(WHITE_SPACES$$module$strings),c=Arrays$$module$strings.coerce(arguments).slice(1),d=[],e=0;e<b.length;e++)b[e]&&d.push(b[e]);for(e=0;e<c.length;e++)c[e]&&d.push(c[e]);return d.join(" ")}function removeFromList$$module$strings(a){var b=a.split(WHITE_SPACES$$module$strings),c=Arrays$$module$strings.coerce(arguments).slice(1);return Arrays$$module$strings.difference(b,c).join(" ")}
function uniqueList$$module$strings(a){return Arrays$$module$strings.unique(a.split(WHITE_SPACES$$module$strings)).join(" ")}
var module$strings={addToList:addToList$$module$strings,removeFromList:removeFromList$$module$strings,uniqueList:uniqueList$$module$strings,words:words$$module$strings,splitIncl:splitIncl$$module$strings,dashesToCamelCase:dashesToCamelCase$$module$strings,camelCaseToDashes:camelCaseToDashes$$module$strings,isEmpty:isEmpty$$module$strings,isControlCharacter:isControlCharacter$$module$strings,CONTROL_CHARACTER:CONTROL_CHARACTER$$module$strings,SPACE:SPACE$$module$strings,NOT_SPACE:NOT_SPACE$$module$strings,
WHITE_SPACE:WHITE_SPACE$$module$strings,WHITE_SPACES:WHITE_SPACES$$module$strings,ZERO_WIDTH_SPACE:ZERO_WIDTH_SPACE$$module$strings,NON_BREAKING_SPACE:NON_BREAKING_SPACE$$module$strings,WORD_BOUNDARY:WORD_BOUNDARY$$module$strings,WORD_BOUNDARY_FROM_END:WORD_BOUNDARY_FROM_END$$module$strings,WORD_BREAKING_CHARACTER:WORD_BREAKING_CHARACTER$$module$strings,TERMINAL_WHITE_SPACES:TERMINAL_WHITE_SPACES$$module$strings,ZERO_WIDTH_CHARACTERS:ZERO_WIDTH_CHARACTERS$$module$strings,WHITE_SPACE_CHARACTERS:WHITE_SPACE_CHARACTERS$$module$strings,
WORD_BREAKING_CHARACTERS:WORD_BREAKING_CHARACTERS$$module$strings,NON_BREAKING_SPACE_CHARACTERS:NON_BREAKING_SPACE_CHARACTERS$$module$strings};var Arrays$$module$dom$attrs=module$arrays,Maps$$module$dom$attrs=module$maps,Strings$$module$dom$attrs=module$strings,Fn$$module$dom$attrs=module$functions;function attrs$$module$dom$attrs(a){var b={};a=a.attributes;for(var c=0,d=a.length;c<d;c++){var e=a[c];if("undefined"===typeof e.specified||e.specified)b[e.name]=e.value}return b}function remove$$module$dom$attrs(a,b){a.removeAttribute(b)}
function removeAll$$module$dom$attrs(a){Maps$$module$dom$attrs.keys(attrs$$module$dom$attrs(a)).forEach(Fn$$module$dom$attrs.partial(remove$$module$dom$attrs,a))}function set$$module$dom$attrs(a,b,c){null==c?remove$$module$dom$attrs(a,b):a.setAttribute(b,c)}function get$$module$dom$attrs(a,b){return a.getAttribute(b)}function getNS$$module$dom$attrs(a,b,c){return a.getAttributeNS(b,c)}function removeNS$$module$dom$attrs(a,b,c){null!=b?a.removeAttributeNS(b,c):remove$$module$dom$attrs(a,c)}
function setNS$$module$dom$attrs(a,b,c,d){null!=b?a.setAttributeNS(b,c,d):set$$module$dom$attrs(a,c,d)}function has$$module$dom$attrs(a){return!Maps$$module$dom$attrs.vals(attrs$$module$dom$attrs(a)).every(Strings$$module$dom$attrs.isEmpty)}
var module$dom$attrs={attrs:attrs$$module$dom$attrs,get:get$$module$dom$attrs,getNS:getNS$$module$dom$attrs,has:has$$module$dom$attrs,remove:remove$$module$dom$attrs,removeAll:removeAll$$module$dom$attrs,removeNS:removeNS$$module$dom$attrs,set:set$$module$dom$attrs,setNS:setNS$$module$dom$attrs};var Nodes$$module$dom$classes=module$dom$nodes,Maps$$module$dom$classes=module$maps,Arrays$$module$dom$classes=module$arrays,Strings$$module$dom$classes=module$strings,Browsers$$module$dom$classes=module$browsers;function modifyClassList$$module$dom$classes(a,b,c){a.className=Strings$$module$dom$classes.uniqueList(b.apply(null,[a.className].concat(c)))}
function add$$module$dom$classes(a){modifyClassList$$module$dom$classes(a,Strings$$module$dom$classes.addToList,Arrays$$module$dom$classes.coerce(arguments).slice(1))}function remove$$module$dom$classes(a){modifyClassList$$module$dom$classes(a,Strings$$module$dom$classes.removeFromList,Arrays$$module$dom$classes.coerce(arguments).slice(1))}
function has$$module$dom$classes(a,b){return Nodes$$module$dom$classes.isElementNode(a)&&0<=a.className.trim().split(Strings$$module$dom$classes.WHITE_SPACES).indexOf(b)}var module$dom$classes={has:has$$module$dom$classes,add:add$$module$dom$classes,remove:remove$$module$dom$classes};var Nodes$$module$dom$style=module$dom$nodes,Attrs$$module$dom$style=module$dom$attrs,Strings$$module$dom$style=module$strings;function set$$module$dom$style(a,b,c){b=Strings$$module$dom$style.dashesToCamelCase(b);a=a.style;b in a&&(a[b]=c)}function get$$module$dom$style(a,b){b=Strings$$module$dom$style.dashesToCamelCase(b);return a.style[b]}
function getComputedStyles$$module$dom$style(a,b){var c={},d=a.ownerDocument;if(d&&d.defaultView&&d.defaultView.getComputedStyle){var e=d.defaultView.getComputedStyle(a,null);e&&b.forEach(function(a){c[a]=e[a]||e.getPropertyValue(a)})}else a.currentStyle&&b.forEach(function(b){c[b]=a.currentStyle[b]});return c}
function getComputedStyle$$module$dom$style(a,b){var c=a.ownerDocument;return c&&c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b):a.currentStyle?(b=Strings$$module$dom$style.dashesToCamelCase(b),a.currentStyle[b]):null}function remove$$module$dom$style(a,b){a.style.removeProperty(b);Strings$$module$dom$style.isEmpty(a.getAttribute("style"))&&a.removeAttribute("style")}
var module$dom$style={set:set$$module$dom$style,get:get$$module$dom$style,remove:remove$$module$dom$style,getComputedStyle:getComputedStyle$$module$dom$style,getComputedStyles:getComputedStyles$$module$dom$style};var Fn$$module$dom=module$functions,Attrs$$module$dom=module$dom$attrs,Classes$$module$dom=module$dom$classes,Mutation$$module$dom=module$dom$mutation,Nodes$$module$dom=module$dom$nodes,Style$$module$dom=module$dom$style,Traversing$$module$dom=module$dom$traversing,Browsers$$module$dom=module$browsers;
function isEditingHost$$module$dom(a){if(!Nodes$$module$dom.isElementNode(a))return!1;if("true"===a.getAttribute("contentEditable")||Classes$$module$dom.has(a,"aloha-editable"))return!0;a=a.paretNode;if(!a)return!1;if(a.nodeType===Nodes$$module$dom.Nodes.DOCUMENT&&"on"===a.designMode)return!0}function isContentEditable$$module$dom(a){return Nodes$$module$dom.isElementNode(a)&&"true"===a.contentEditable}
function isEditable$$module$dom(a){if(!Nodes$$module$dom.isElementNode(a))return!1;var b=a.getAttribute("contentEditable");return"true"===b||""===b?!0:"false"===b?!1:Classes$$module$dom.has(a,"aloha-editable")?!0:(a=a.parentNode)?a.nodeType===Nodes$$module$dom.Nodes.DOCUMENT&&"on"===a.designMode?!0:isEditable$$module$dom(a):!1}function isEditableNode$$module$dom(a){return isEditable$$module$dom(Nodes$$module$dom.isTextNode(a)?a.parentNode:a)}
function editingHost$$module$dom(a){if(isEditingHost$$module$dom(a))return a;if(!isEditableNode$$module$dom(a))return null;for(a=a.parentNode;a&&!isEditingHost$$module$dom(a);)a=a.parentNode;return a}function editableParent$$module$dom(a){for(a=a.parentNode;a&&!isEditable$$module$dom(a);)a=a.parentNode;return a}function parseNode$$module$dom(a,b){var c=b.createElement("DIV");c.innerHTML=a;var d=c.firstChild;c.removeChild(d);return d}var Serializer$$module$dom=window.XMLSerializer&&new window.XMLSerializer;
function stringify$$module$dom(a){return Serializer$$module$dom.serializeToString(a)}function isNode$$module$dom(a){a=Object.prototype.toString.call(a);return/^\[object (Text|Comment|HTML\w*Element)\]$/.test(a)}function parseReviver$$module$dom(a,b,c){b&&"Node"===b.type&&(a=b.value,null!=a&&(b=parseNode$$module$dom(a,c)));return b}function stringifyReplacer$$module$dom(a,b){b&&isNode$$module$dom(b)&&(b={type:"Node",value:stringify$$module$dom(b)});return b}
var expandoIdCnt$$module$dom=0,expandoIdProp$$module$dom="!aloha-expando-node-id";function ensureExpandoId$$module$dom(a){return a[expandoIdProp$$module$dom]=a[expandoIdProp$$module$dom]||++expandoIdCnt$$module$dom}function enableSelection$$module$dom(a){a.removeAttribute("unselectable","on");Style$$module$dom.set(a,Browsers$$module$dom.VENDOR_PREFIX+"user-select","all");a.onselectstart=null}
function disableSelection$$module$dom(a){a.removeAttribute("unselectable","on");Style$$module$dom.set(a,Browsers$$module$dom.VENDOR_PREFIX+"user-select","none");a.onselectstart=Fn$$module$dom.returnFalse}function documentWindow$$module$dom(a){return a.defaultView||a.parentWindow}function scrollTop$$module$dom(a){var b=documentWindow$$module$dom(a);if(!Fn$$module$dom.isNou(b.pageYOffset))return b.pageYOffset;b=a.documentElement;return(b.clientHeight?b:a.body).scrollTop}
function scrollLeft$$module$dom(a){var b=documentWindow$$module$dom(a);if(!Fn$$module$dom.isNou(b.pageXOffset))return b.pageXOffset;b=a.documentElement;return(b.clientWidth?b:a.body).scrollLeft}
var module$dom={Nodes:Nodes$$module$dom.Nodes,offset:Nodes$$module$dom.offset,cloneShallow:Nodes$$module$dom.cloneShallow,clone:Nodes$$module$dom.clone,text:Nodes$$module$dom.text,children:Nodes$$module$dom.children,nthChild:Nodes$$module$dom.nthChild,numChildren:Nodes$$module$dom.numChildren,nodeIndex:Nodes$$module$dom.nodeIndex,nodeLength:Nodes$$module$dom.nodeLength,hasChildren:Nodes$$module$dom.hasChildren,nodeAtOffset:Nodes$$module$dom.nodeAtOffset,normalizedNthChild:Nodes$$module$dom.normalizedNthChild,
normalizedNodeIndex:Nodes$$module$dom.normalizedNodeIndex,realFromNormalizedIndex:Nodes$$module$dom.realFromNormalizedIndex,normalizedNumChildren:Nodes$$module$dom.normalizedNumChildren,isTextNode:Nodes$$module$dom.isTextNode,isElementNode:Nodes$$module$dom.isElementNode,isFragmentNode:Nodes$$module$dom.isFragmentNode,isEmptyTextNode:Nodes$$module$dom.isEmptyTextNode,isSameNode:Nodes$$module$dom.isSameNode,equals:Nodes$$module$dom.equals,contains:Nodes$$module$dom.contains,followedBy:Nodes$$module$dom.followedBy,
hasText:Nodes$$module$dom.hasText,outerHtml:Nodes$$module$dom.outerHtml,append:Mutation$$module$dom.append,merge:Mutation$$module$dom.merge,moveNextAll:Mutation$$module$dom.moveNextAll,moveBefore:Mutation$$module$dom.moveBefore,moveAfter:Mutation$$module$dom.moveAfter,move:Mutation$$module$dom.move,copy:Mutation$$module$dom.copy,wrap:Mutation$$module$dom.wrap,wrapWith:Mutation$$module$dom.wrapWith,insert:Mutation$$module$dom.insert,insertAfter:Mutation$$module$dom.insertAfter,replace:Mutation$$module$dom.replace,
replaceShallow:Mutation$$module$dom.replaceShallow,remove:Mutation$$module$dom.remove,removeShallow:Mutation$$module$dom.removeShallow,removeChildren:Mutation$$module$dom.removeChildren,addClass:Classes$$module$dom.add,removeClass:Classes$$module$dom.remove,hasClass:Classes$$module$dom.has,attrs:Attrs$$module$dom.attrs,getAttr:Attrs$$module$dom.get,getAttrNS:Attrs$$module$dom.getNS,hasAttrs:Attrs$$module$dom.has,removeAttr:Attrs$$module$dom.remove,removeAttrNS:Attrs$$module$dom.removeNS,removeAttrs:Attrs$$module$dom.removeAll,
setAttr:Attrs$$module$dom.set,setAttrNS:Attrs$$module$dom.setNS,removeStyle:Style$$module$dom.remove,setStyle:Style$$module$dom.set,getStyle:Style$$module$dom.get,getComputedStyle:Style$$module$dom.getComputedStyle,getComputedStyles:Style$$module$dom.getComputedStyles,query:Traversing$$module$dom.query,nextNonAncestor:Traversing$$module$dom.nextNonAncestor,nextWhile:Traversing$$module$dom.nextWhile,nextUntil:Traversing$$module$dom.nextUntil,nextSibling:Traversing$$module$dom.nextSibling,nextSiblings:Traversing$$module$dom.nextSiblings,
prevWhile:Traversing$$module$dom.prevWhile,prevUntil:Traversing$$module$dom.prevUntil,prevSibling:Traversing$$module$dom.prevSibling,prevSiblings:Traversing$$module$dom.prevSiblings,nodeAndNextSiblings:Traversing$$module$dom.nodeAndNextSiblings,nodeAndPrevSiblings:Traversing$$module$dom.nodeAndPrevSiblings,walk:Traversing$$module$dom.walk,walkRec:Traversing$$module$dom.walkRec,walkUntilNode:Traversing$$module$dom.walkUntilNode,forward:Traversing$$module$dom.forward,backward:Traversing$$module$dom.backward,
findForward:Traversing$$module$dom.findForward,findBackward:Traversing$$module$dom.findBackward,upWhile:Traversing$$module$dom.upWhile,climbUntil:Traversing$$module$dom.climbUntil,childAndParentsUntil:Traversing$$module$dom.childAndParentsUntil,childAndParentsUntilIncl:Traversing$$module$dom.childAndParentsUntilIncl,childAndParentsUntilNode:Traversing$$module$dom.childAndParentsUntilNode,childAndParentsUntilInclNode:Traversing$$module$dom.childAndParentsUntilInclNode,stringify:stringify$$module$dom,
stringifyReplacer:stringifyReplacer$$module$dom,parseReviver:parseReviver$$module$dom,ensureExpandoId:ensureExpandoId$$module$dom,enableSelection:enableSelection$$module$dom,disableSelection:disableSelection$$module$dom,isEditable:isEditable$$module$dom,isEditableNode:isEditableNode$$module$dom,isEditingHost:isEditingHost$$module$dom,isContentEditable:isContentEditable$$module$dom,documentWindow:documentWindow$$module$dom,editingHost:editingHost$$module$dom,editableParent:editableParent$$module$dom,
scrollTop:scrollTop$$module$dom,scrollLeft:scrollLeft$$module$dom};var Fn$$module$boromir=module$functions,Maps$$module$boromir=module$maps,Accessor$$module$boromir=module$accessor,Record$$module$boromir=module$record,DelayedMap$$module$boromir=module$delayed_map,Dom$$module$boromir=module$dom,Strings$$module$boromir=module$strings,Assert$$module$boromir=module$assert,idCounter$$module$boromir=0,CHANGE_NONE$$module$boromir=0,CHANGE_INSERT$$module$boromir=1,CHANGE_REMOVE$$module$boromir=2,CHANGE_REF$$module$boromir=4,AFFINITY_DOM$$module$boromir=1,AFFINITY_MODEL$$module$boromir=
2,AFFINITY_DEFAULT$$module$boromir=AFFINITY_DOM$$module$boromir|AFFINITY_MODEL$$module$boromir,CHANGED_INIT$$module$boromir=1,CHANGED_NAME$$module$boromir=2,CHANGED_TEXT$$module$boromir=4,CHANGED_ATTRS$$module$boromir=8,CHANGED_STYLES$$module$boromir=16,CHANGED_CHILDREN$$module$boromir=32,CHANGED_AFFINITY$$module$boromir=64,ELEMENT$$module$boromir=1,TEXT$$module$boromir=3;function allocateId$$module$boromir(){return++idCounter$$module$boromir}
function typeFromDomNode$$module$boromir(a){return a.nodeType}function childrenFromDomNode$$module$boromir(a){a=a.childNodes;for(var b=[],c=0,d=a.length;c<d;c++)b.push(Boromir$$module$boromir(a[c]));return b}function nameFromDomNode$$module$boromir(a){return a.nodeName}function textFromDomNode$$module$boromir(a){return a.data}
var delayedAttrsFromDom$$module$boromir={realize:Dom$$module$boromir.attrs,get:DelayedMap$$module$boromir.makeGetWithDefault(Dom$$module$boromir.getAttr,Fn$$module$boromir.isNou)},delayedStylesFromDom$$module$boromir={realize:Assert$$module$boromir.notImplemented,get:DelayedMap$$module$boromir.makeGetWithDefault(Dom$$module$boromir.getStyle,Fn$$module$boromir.isNou)};
function setPropsFromDomNodeT$$module$boromir(a,b){var c=DelayedMap$$module$boromir(delayedAttrsFromDom$$module$boromir,b),d=DelayedMap$$module$boromir(delayedStylesFromDom$$module$boromir,b);a=a.setT(a.domNode,b);a=a.delayT(a.type,typeFromDomNode$$module$boromir,b);a=a.delayT(a.name,nameFromDomNode$$module$boromir,b);a=a.delayT(a.text,textFromDomNode$$module$boromir,b);a=a.delayT(a.children,childrenFromDomNode$$module$boromir,b);a=a.setT(delayedAttrsField$$module$boromir,c);a=a.setT(delayedStylesField$$module$boromir,
d);c=a.asPersistent();return a=c.asTransient().delayT(classesField$$module$boromir,classesFromNodeAttrs$$module$boromir,c)}function setTextPropsT$$module$boromir(a,b){Assert$$module$boromir.assertNou(b.name);Assert$$module$boromir.assertNou(b.nodeType);var c=b.affinity||AFFINITY_DEFAULT$$module$boromir;a=a.setT(a.domNode,b.domNode);a=a.setT(a.type,TEXT$$module$boromir);a=a.setT(a.text,b.text);return a=a.setT(a.affinity,c)}
function setElementPropsT$$module$boromir(a,b){Assert$$module$boromir.assertNou(b.text);Assert$$module$boromir.assertNou(b.nodeType);var c=b.name,d=b.attrs||{},e=b.styles||{},f=b.children||[],g=b.affinity||AFFINITY_DEFAULT$$module$boromir;Assert$$module$boromir.assert(Fn$$module$boromir.isNou(d.style),Assert$$module$boromir.STYLE_NOT_AS_ATTR);a=a.setT(a.domNode,b.domNode);a=a.setT(a.type,ELEMENT$$module$boromir);a=a.setT(a.name,c);a=a.setT(a.children,f);a=a.setT(a.affinity,g);a=a.setT(delayedAttrsField$$module$boromir,
DelayedMap$$module$boromir.realized(d));return a=a.setT(delayedStylesField$$module$boromir,DelayedMap$$module$boromir.realized(e))}function initWithDomNodeOrPropsT$$module$boromir(a,b){if(!b)return a;b.nodeType?a=setPropsFromDomNodeT$$module$boromir(a,b):Fn$$module$boromir.isNou(b.text)?Fn$$module$boromir.isNou(b.name)?Assert$$module$boromir.error(Assert$$module$boromir.INVALID_ARGUMENT):a=setElementPropsT$$module$boromir(a,b):a=setTextPropsT$$module$boromir(a,b);return a}
var Boromir$$module$boromir=Record$$module$boromir.define({domNode:null,type:null,name:null,text:null,classes:{},children:null,affinity:AFFINITY_DEFAULT$$module$boromir},function(a,b){var c=a.asTransient(),c=initWithDomNodeOrPropsT$$module$boromir(c,b),c=c.setT(idField$$module$boromir,allocateId$$module$boromir()),c=c.setT(changedField$$module$boromir,CHANGED_INIT$$module$boromir);a=c.asPersistent();return a=unchangedField$$module$boromir.set(a,a)}),classesField$$module$boromir=Boromir$$module$boromir.prototype.classes,
unchangedField$$module$boromir=Boromir$$module$boromir.addField(),idField$$module$boromir=Boromir$$module$boromir.addField(),delayedAttrsField$$module$boromir=Boromir$$module$boromir.addField(),delayedStylesField$$module$boromir=Boromir$$module$boromir.addField(),changedAttrsField$$module$boromir=Boromir$$module$boromir.addField(),changedStylesField$$module$boromir=Boromir$$module$boromir.addField(),changedField$$module$boromir=Boromir$$module$boromir.addField();
function updateMask$$module$boromir(a,b,c){var d=changedField$$module$boromir.get(a);d&CHANGED_INIT$$module$boromir&&b!==(d&b)&&(a=c(a,d|b));return a}function hookUpdateChanged$$module$boromir(a,b){return Record$$module$boromir.hookSetter(a,function(a){return updateMask$$module$boromir(a,b,changedField$$module$boromir.set)},function(a){return updateMask$$module$boromir(a,b,changedField$$module$boromir.set.setT)})}
function assertElement$$module$boromir(a){Assert$$module$boromir.assert(ELEMENT$$module$boromir===a.type.get(a),Assert$$module$boromir.EXPECT_ELEMENT)}function getChangedOrDelayed$$module$boromir(a,b,c,d){return(a=a.get(c))&&a.hasOwnProperty(d)?a[d]:b.get(c).get(d)}function setChanged$$module$boromir(a,b,c,d,e){var f=a.get(c),f=Maps$$module$boromir.cloneSet(f||{},d,e);c=c.asTransient();c=c.setT(a,f);c=updateMask$$module$boromir(c,b,changedField$$module$boromir.set.setT);return c.asPersistent()}
function getAttr$$module$boromir(a,b){assertElement$$module$boromir(a);Assert$$module$boromir.assert("style"!==b,Assert$$module$boromir.STYLE_NOT_AS_ATTR);return getChangedOrDelayed$$module$boromir(changedAttrsField$$module$boromir,delayedAttrsField$$module$boromir,a,b)}function parseClasses$$module$boromir(a){return Maps$$module$boromir.fillKeys({},Strings$$module$boromir.words(a),!0)}
function setAttr$$module$boromir(a,b,c){assertElement$$module$boromir(a);Assert$$module$boromir.assert("style"!==b,Assert$$module$boromir.STYLE_NOT_AS_ATTR);a=setChanged$$module$boromir(changedAttrsField$$module$boromir,CHANGED_ATTRS$$module$boromir,a,b,c);"class"===b&&(a=updateClassesFromAttr$$module$boromir(a));return a}
function getStyle$$module$boromir(a,b){assertElement$$module$boromir(a);return getChangedOrDelayed$$module$boromir(changedStylesField$$module$boromir,delayedStylesField$$module$boromir,a,b)}function setStyle$$module$boromir(a,b,c){assertElement$$module$boromir(a);return setChanged$$module$boromir(changedStylesField$$module$boromir,CHANGED_STYLES$$module$boromir,a,b,c)}
function getAttrs$$module$boromir(a){assertElement$$module$boromir(a);var b=delayedAttrsField$$module$boromir.get(a);a=changedAttrsField$$module$boromir.get(a);b=b.realize();b=Maps$$module$boromir.extend({},b,a);b=Maps$$module$boromir.filter(b,Fn$$module$boromir.complement(Fn$$module$boromir.isNou));delete b.style;return b}
function setAttrs$$module$boromir(a,b){assertElement$$module$boromir(a);Assert$$module$boromir.assert(Fn$$module$boromir.isNou(b.style),Assert$$module$boromir.STYLE_NOT_AS_ATTR);var c=delayedAttrsField$$module$boromir.get(a),c=Maps$$module$boromir.fillKeys({},c.keys(),null),c=Maps$$module$boromir.extend(c,b);delete c.style;a=a.asTransient();a=updateMask$$module$boromir(a,CHANGED_ATTRS$$module$boromir,changedField$$module$boromir.set.setT);a=a.setT(changedAttrsField$$module$boromir,c);return a.asPersistent()}
function updateInUnchanged$$module$boromir(a,b,c,d){var e=unchangedField$$module$boromir.get(a),e=b.set(e,c);return d(a,e)}function getInUnchanged$$module$boromir(a,b){var c=unchangedField$$module$boromir.get(a);return b.get(c)}function updateName$$module$boromir(a){Assert$$module$boromir.notImplemented()}function updateText$$module$boromir(a){var b=a.text.get(a);a.domNode.get(a).data=b;return updateInUnchanged$$module$boromir(a,a.text,b,unchangedField$$module$boromir.set)}
function updateDomNodeFromMap$$module$boromir(a,b,c){Maps$$module$boromir.forEach(b,function(b,e){c(a,e,b)})}function updateChangedAndDelayed$$module$boromir(a,b,c,d){var e=a.get(d);if(!e)return d;var f=d.domNode.get(d);updateDomNodeFromMap$$module$boromir(f,e,c);c=b.get(d).mergeObject(e,!0);d=d.asTransient();d=d.setT(a,null);d=d.setT(b,c);return d.asPersistent()}
var updateAttrs$$module$boromir=Fn$$module$boromir.partial(updateChangedAndDelayed$$module$boromir,changedAttrsField$$module$boromir,delayedAttrsField$$module$boromir,Dom$$module$boromir.setAttr),updateStyles$$module$boromir=Fn$$module$boromir.partial(updateChangedAndDelayed$$module$boromir,changedStylesField$$module$boromir,delayedStylesField$$module$boromir,Dom$$module$boromir.setStyle);
function createElementNode$$module$boromir(a,b){var c=a.name.get(a),d=a.attrs.get(a),c=b.createElement(c);updateDomNodeFromMap$$module$boromir(c,d,Dom$$module$boromir.setAttr);d=delayedAttrsField$$module$boromir.get(a);Dom$$module$boromir.setAttr(c,"style",d.get("style"));d=changedStylesField$$module$boromir.get(a);updateDomNodeFromMap$$module$boromir(c,d,Dom$$module$boromir.setStyle);return c}function createTextNode$$module$boromir(a,b){return b.createTextNode(a.text.get(a))}
function createDomNode$$module$boromir(a,b){var c=a.type.get(a);if(ELEMENT$$module$boromir===c)return createElementNode$$module$boromir(a,b);if(TEXT$$module$boromir===c)return createTextNode$$module$boromir(a,b);Assert$$module$boromir.notImplemented()}
function insertChild$$module$boromir(a,b,c,d,e,f){b=d<b.length?b[d]:null;d=createDomNode$$module$boromir(c,e);a.insertBefore(d,b);c=c.asTransient();c=c.setT(c.domNode,d);c=c.setT(idField$$module$boromir,allocateId$$module$boromir());c=updateInUnchanged$$module$boromir(c,c.children,[],unchangedField$$module$boromir.set.setT);c=c.setT(changedField$$module$boromir,changedField$$module$boromir.get(c)|CHANGED_CHILDREN$$module$boromir);c=c.asPersistent();return c=updateDomRec$$module$boromir(c,e,f)}
function removeChild$$module$boromir(a,b,c){a.removeChild(b[c])}function indexChildren$$module$boromir(a,b,c){a.forEach(function(a){b[idField$$module$boromir.get(a)]=c});return b}
function childrenChangedInParent$$module$boromir(a,b){if(b===a)return null;for(var c,d,e=null,f=0,g=0,h=a.length,k=b.length,l=[],m=!1;f<h&&g<k;){c=a[f];d=b[g];var n=idField$$module$boromir.get(c),q=idField$$module$boromir.get(d);n===q?(c===d?c=CHANGE_NONE$$module$boromir:(m=!0,c=CHANGE_REF$$module$boromir),f+=1,g+=1):(e=e||indexChildren$$module$boromir(b,{},!0),e[n]?(m=!0,c=CHANGE_INSERT$$module$boromir,g+=1):(m=!0,c=CHANGE_REMOVE$$module$boromir,f+=1));l.push(c)}for(;f<h;f++)m=!0,l.push(CHANGE_REMOVE$$module$boromir);
for(;g<k;g++)m=!0,l.push(CHANGE_INSERT$$module$boromir);return m?l:null}
function updateChildren$$module$boromir(a,b,c){var d=a.children.get(a),e=getInUnchanged$$module$boromir(a,a.children),f=childrenChangedInParent$$module$boromir(e,d);if(!f)return a;var g=a.domNode.get(a),h=g.childNodes,k=[],l=0,m=0,n=0;f.forEach(function(f){var p;f&CHANGE_INSERT$$module$boromir?(p=d[m],m+=1):(f&CHANGE_REMOVE$$module$boromir?p=e[l]:(p=d[m],m+=1),l+=1);var r=p.affinity.get(p),s=getInUnchanged$$module$boromir(a,a.affinity);(r&AFFINITY_DOM$$module$boromir)!==(s&AFFINITY_DOM$$module$boromir)?
r&AFFINITY_DOM$$module$boromir&&!(f&CHANGE_REMOVE$$module$boromir)?(p=insertChild$$module$boromir(g,h,p,n,b,c),n+=1):f&CHANGE_INSERT$$module$boromir||removeChild$$module$boromir(g,h,n):r&AFFINITY_DOM$$module$boromir&&(f&CHANGE_INSERT$$module$boromir?(p=insertChild$$module$boromir(g,h,p,n,b,c),n+=1):f&CHANGE_REMOVE$$module$boromir?removeChild$$module$boromir(g,h,n):(f&CHANGE_REF$$module$boromir&&(p=updateDomRec$$module$boromir(p,b,c)),n+=1));f&CHANGE_REMOVE$$module$boromir||k.push(p)});a=a.set(a.children,
k);return a=updateInUnchanged$$module$boromir(a,a.children,k,unchangedField$$module$boromir.set)}
function updateDomRec$$module$boromir(a,b,c){var d=a.type.get(a),e=changedField$$module$boromir.get(a);ELEMENT$$module$boromir===d?(e&CHANGED_NAME$$module$boromir&&(a=updateName$$module$boromir(a)),e&CHANGED_ATTRS$$module$boromir&&(a=updateAttrs$$module$boromir(a)),e&CHANGED_STYLES$$module$boromir&&(a=updateStyles$$module$boromir(a)),e&CHANGED_CHILDREN$$module$boromir&&(a=updateChildren$$module$boromir(a,b,c))):TEXT$$module$boromir===d&&e&CHANGED_TEXT$$module$boromir&&(a=updateText$$module$boromir(a));
return a}function updateDom$$module$boromir(a,b){var c=a.domNode.get(a).ownerDocument;Assert$$module$boromir.assert(c,Assert$$module$boromir.ELEMENT_NOT_ATTACHED);return updateDomRec$$module$boromir(a,c,{})}
function asDom$$module$boromir(a,b){var c;ELEMENT$$module$boromir===a.type()?(c=createElementNode$$module$boromir(a,b),a.children().forEach(function(a){c.appendChild(asDom$$module$boromir(a,b))})):TEXT$$module$boromir===a.type()?c=createTextNode$$module$boromir(a,b):Assert$$module$boromir.notImplemented();return c}function classesFromNodeAttrs$$module$boromir(a){a=getAttr$$module$boromir(a,"class");return Fn$$module$boromir.isNou(a)?{}:parseClasses$$module$boromir(a)}
function updateClassesFromAttr$$module$boromir(a){return a.set(classesField$$module$boromir,classesFromNodeAttrs$$module$boromir(a))}function updateAttrFromClasses$$module$boromir(a){var b=Maps$$module$boromir.keys(a.get(a.classes)).join(" ");return setChanged$$module$boromir(changedAttrsField$$module$boromir,CHANGED_ATTRS$$module$boromir,a,"class",b)}function hasClass$$module$boromir(a,b){return a.get(a.classes)[b]}
function addClass$$module$boromir(a,b){var c=a.get(a.classes);if(c[b])return a;c=Maps$$module$boromir.cloneSet(c,b,!0);return a=a.set(a.classes,c)}function removeClass$$module$boromir(a,b){var c=a.get(a.classes);if(!c[b])return a;c=Maps$$module$boromir.cloneDelete(c,b);return a=a.set(a.classes,c)}
var hookedName$$module$boromir=hookUpdateChanged$$module$boromir(Boromir$$module$boromir.prototype.name,CHANGED_NAME$$module$boromir),hookedText$$module$boromir=hookUpdateChanged$$module$boromir(Boromir$$module$boromir.prototype.text,CHANGED_TEXT$$module$boromir),hookedChildren$$module$boromir=hookUpdateChanged$$module$boromir(Boromir$$module$boromir.prototype.children,CHANGED_CHILDREN$$module$boromir),hookedAffinity$$module$boromir=hookUpdateChanged$$module$boromir(Boromir$$module$boromir.prototype.affinity,
CHANGED_AFFINITY$$module$boromir);
Maps$$module$boromir.extend(Boromir$$module$boromir.prototype,{name:Accessor$$module$boromir.asMethod(hookedName$$module$boromir),text:Accessor$$module$boromir.asMethod(hookedText$$module$boromir),children:Accessor$$module$boromir.asMethod(hookedChildren$$module$boromir),affinity:Accessor$$module$boromir.asMethod(hookedAffinity$$module$boromir),attrs:Accessor$$module$boromir.asMethod(Accessor$$module$boromir(getAttrs$$module$boromir,setAttrs$$module$boromir)),attr:Accessor$$module$boromir.asMethod(Accessor$$module$boromir(getAttr$$module$boromir,setAttr$$module$boromir)),
style:Accessor$$module$boromir.asMethod(Accessor$$module$boromir(getStyle$$module$boromir,setStyle$$module$boromir)),updateDom:Fn$$module$boromir.asMethod(updateDom$$module$boromir),asDom:Fn$$module$boromir.asMethod(asDom$$module$boromir),create:Boromir$$module$boromir,hasClass:Fn$$module$boromir.asMethod(hasClass$$module$boromir),addClass:Fn$$module$boromir.asMethod(addClass$$module$boromir),removeClass:Fn$$module$boromir.asMethod(removeClass$$module$boromir)});
Boromir$$module$boromir.prototype.attrs=Accessor$$module$boromir.asMethod(Record$$module$boromir.hookSetterRecompute(Boromir$$module$boromir.prototype.attrs,classesField$$module$boromir,classesFromNodeAttrs$$module$boromir,classesFromNodeAttrs$$module$boromir));Boromir$$module$boromir.prototype.classes=Accessor$$module$boromir.asMethod(Record$$module$boromir.hookSetter(classesField$$module$boromir,updateAttrFromClasses$$module$boromir,updateAttrFromClasses$$module$boromir));
Boromir$$module$boromir.CHANGE_INSERT=CHANGE_INSERT$$module$boromir;Boromir$$module$boromir.CHANGE_REMOVE=CHANGE_REMOVE$$module$boromir;Boromir$$module$boromir.CHANGE_REF=CHANGE_REF$$module$boromir;Boromir$$module$boromir.CHANGE_NONE=CHANGE_NONE$$module$boromir;Boromir$$module$boromir.AFFINITY_DOM=AFFINITY_DOM$$module$boromir;Boromir$$module$boromir.AFFINITY_MODEL=AFFINITY_MODEL$$module$boromir;Boromir$$module$boromir.AFFINITY_DEFAULT=AFFINITY_DEFAULT$$module$boromir;
Boromir$$module$boromir.childrenChangedInParent=childrenChangedInParent$$module$boromir;Boromir$$module$boromir.ELEMENT=ELEMENT$$module$boromir;Boromir$$module$boromir.TEXT=TEXT$$module$boromir;var module$boromir=Boromir$$module$boromir;var Dom$$module$boundaries=module$dom,Misc$$module$boundaries=module$misc,Arrays$$module$boundaries=module$arrays,Assert$$module$boundaries=module$assert,Strings$$module$boundaries=module$strings;function raw$$module$boundaries(a,b){return[a,b]}function container$$module$boundaries(a){return a[0]}function document$$module$boundaries(a){return container$$module$boundaries(a).ownerDocument}function offset$$module$boundaries(a){return a[1]}
function fromNode$$module$boundaries(a){return raw$$module$boundaries(a.parentNode,Dom$$module$boundaries.nodeIndex(a))}function fromEndOfNode$$module$boundaries(a){return raw$$module$boundaries(a,Dom$$module$boundaries.nodeLength(a))}
function normalize$$module$boundaries(a){var b=container$$module$boundaries(a);if(Dom$$module$boundaries.isTextNode(b)){Assert$$module$boundaries.assertNotNou(b.parentNode);var c=offset$$module$boundaries(a);if(0===c)return fromNode$$module$boundaries(b);if(c>=Dom$$module$boundaries.nodeLength(b))return raw$$module$boundaries(b.parentNode,Dom$$module$boundaries.nodeIndex(b)+1)}return a}function create$$module$boundaries(a,b){return normalize$$module$boundaries(raw$$module$boundaries(a,b))}
function equals$$module$boundaries(a,b){return container$$module$boundaries(a)===container$$module$boundaries(b)&&offset$$module$boundaries(a)===offset$$module$boundaries(b)}function setRangeStart$$module$boundaries(a,b){b=normalize$$module$boundaries(b);a.setStart(container$$module$boundaries(b),offset$$module$boundaries(b))}function setRangeEnd$$module$boundaries(a,b){b=normalize$$module$boundaries(b);a.setEnd(container$$module$boundaries(b),offset$$module$boundaries(b))}
function setRange$$module$boundaries(a,b,c){setRangeStart$$module$boundaries(a,b);setRangeEnd$$module$boundaries(a,c)}function setRanges$$module$boundaries(a,b){Arrays$$module$boundaries.partition(b,2).forEach(function(b,d){setRange$$module$boundaries(a[d],b[0],b[1])})}function fromRangeStart$$module$boundaries(a){return create$$module$boundaries(a.startContainer,a.startOffset)}function fromRangeEnd$$module$boundaries(a){return create$$module$boundaries(a.endContainer,a.endOffset)}
function fromRange$$module$boundaries(a){return[fromRangeStart$$module$boundaries(a),fromRangeEnd$$module$boundaries(a)]}function fromRanges$$module$boundaries(a){a=a||[];return Arrays$$module$boundaries.mapcat(a,fromRange$$module$boundaries)}function isAtStart$$module$boundaries(a){return 0===offset$$module$boundaries(normalize$$module$boundaries(a))}
function isAtEnd$$module$boundaries(a){a=normalize$$module$boundaries(a);return offset$$module$boundaries(a)===Dom$$module$boundaries.nodeLength(container$$module$boundaries(a))}function isAtRawStart$$module$boundaries(a){return 0===offset$$module$boundaries(a)}function isAtRawEnd$$module$boundaries(a){return offset$$module$boundaries(a)===Dom$$module$boundaries.nodeLength(container$$module$boundaries(a))}
function isTextBoundary$$module$boundaries(a){return Dom$$module$boundaries.isTextNode(container$$module$boundaries(a))}function isNodeBoundary$$module$boundaries(a){return!isTextBoundary$$module$boundaries(a)}function nodeAfter$$module$boundaries(a){a=normalize$$module$boundaries(a);return isAtEnd$$module$boundaries(a)?null:Dom$$module$boundaries.nthChild(container$$module$boundaries(a),offset$$module$boundaries(a))}
function nodeBefore$$module$boundaries(a){a=normalize$$module$boundaries(a);return isAtStart$$module$boundaries(a)?null:Dom$$module$boundaries.nthChild(container$$module$boundaries(a),offset$$module$boundaries(a)-1)}function nextNode$$module$boundaries(a){a=normalize$$module$boundaries(a);return nodeAfter$$module$boundaries(a)||container$$module$boundaries(a)}
function prevNode$$module$boundaries(a){a=normalize$$module$boundaries(a);return nodeBefore$$module$boundaries(a)||container$$module$boundaries(a)}function jumpOver$$module$boundaries(a){a=nextNode$$module$boundaries(a);return raw$$module$boundaries(a.parentNode,Dom$$module$boundaries.nodeIndex(a)+1)}
function prev$$module$boundaries(a){a=normalize$$module$boundaries(a);var b=container$$module$boundaries(a);if(Dom$$module$boundaries.isTextNode(b)||isAtStart$$module$boundaries(a))return fromNode$$module$boundaries(b);b=Dom$$module$boundaries.nthChild(b,offset$$module$boundaries(a)-1);return Dom$$module$boundaries.isTextNode(b)?fromNode$$module$boundaries(b):raw$$module$boundaries(b,Dom$$module$boundaries.nodeLength(b))}
function next$$module$boundaries(a){a=normalize$$module$boundaries(a);var b=container$$module$boundaries(a),c=offset$$module$boundaries(a);if(Dom$$module$boundaries.isTextNode(b)||isAtEnd$$module$boundaries(a))return jumpOver$$module$boundaries(a);a=Dom$$module$boundaries.nthChild(b,c);return Dom$$module$boundaries.isTextNode(a)?raw$$module$boundaries(a.parentNode,c+1):raw$$module$boundaries(a,0)}
function prevRawBoundary$$module$boundaries(a){var b=container$$module$boundaries(a);if(isAtRawStart$$module$boundaries(a))return fromNode$$module$boundaries(container$$module$boundaries(a));if(isTextBoundary$$module$boundaries(a))return raw$$module$boundaries(container$$module$boundaries(a),0);b=Dom$$module$boundaries.nthChild(b,offset$$module$boundaries(a)-1);return fromEndOfNode$$module$boundaries(b)}
function nextRawBoundary$$module$boundaries(a){var b=container$$module$boundaries(a);return isAtRawEnd$$module$boundaries(a)?jumpOver$$module$boundaries(a):isTextBoundary$$module$boundaries(a)?fromEndOfNode$$module$boundaries(b):raw$$module$boundaries(Dom$$module$boundaries.nthChild(b,offset$$module$boundaries(a)),0)}function stepWhile$$module$boundaries(a,b,c){for(;b(a);)a=c(a);return a}function nextWhile$$module$boundaries(a,b){return stepWhile$$module$boundaries(a,b,next$$module$boundaries)}
function prevWhile$$module$boundaries(a,b){return stepWhile$$module$boundaries(a,b,prev$$module$boundaries)}function walkWhile$$module$boundaries(a,b,c,d){for(;a&&b(a);)d(a),a=c(a)}
function precedingTextLength$$module$boundaries(a){var b;a=normalize$$module$boundaries(a);isNodeBoundary$$module$boundaries(a)?(b=0,a=nodeBefore$$module$boundaries(a)):(b=offset$$module$boundaries(a),a=container$$module$boundaries(a).previousSibling);for(;a&&Dom$$module$boundaries.isTextNode(a);)b+=Dom$$module$boundaries.nodeLength(a),a=a.previousSibling;return b}function get$$module$boundaries(a){a=a.getSelection();return 0<a.rangeCount?fromRange$$module$boundaries(a.getRangeAt(0)):null}
function select$$module$boundaries(a,b){b||(b=a);var c=container$$module$boundaries(a),d=offset$$module$boundaries(a),e=container$$module$boundaries(b),f=offset$$module$boundaries(b),g=c.ownerDocument,h=g.getSelection(),g=g.createRange();g.setStart(c,d);g.setEnd(e,f);h.removeAllRanges();h.addRange(g)}
function commonContainer$$module$boundaries(a,b){var c=container$$module$boundaries(a),d=offset$$module$boundaries(a),e=container$$module$boundaries(b),f=offset$$module$boundaries(b),g=(Dom$$module$boundaries.Nodes.DOCUMENT===c.nodeType?c:c.ownerDocument).createRange();g.setStart(c,d);g.setEnd(e,f);return g.commonAncestorContainer}
var module$boundaries={get:get$$module$boundaries,select:select$$module$boundaries,raw:raw$$module$boundaries,create:create$$module$boundaries,normalize:normalize$$module$boundaries,equals:equals$$module$boundaries,container:container$$module$boundaries,offset:offset$$module$boundaries,document:document$$module$boundaries,fromRange:fromRange$$module$boundaries,fromRanges:fromRanges$$module$boundaries,fromRangeStart:fromRangeStart$$module$boundaries,fromRangeEnd:fromRangeEnd$$module$boundaries,fromNode:fromNode$$module$boundaries,
fromEndOfNode:fromEndOfNode$$module$boundaries,setRange:setRange$$module$boundaries,setRanges:setRanges$$module$boundaries,setRangeStart:setRangeStart$$module$boundaries,setRangeEnd:setRangeEnd$$module$boundaries,isAtStart:isAtStart$$module$boundaries,isAtEnd:isAtEnd$$module$boundaries,isAtRawStart:isAtRawStart$$module$boundaries,isAtRawEnd:isAtRawEnd$$module$boundaries,isTextBoundary:isTextBoundary$$module$boundaries,isNodeBoundary:isNodeBoundary$$module$boundaries,next:next$$module$boundaries,prev:prev$$module$boundaries,
nextRawBoundary:nextRawBoundary$$module$boundaries,prevRawBoundary:prevRawBoundary$$module$boundaries,jumpOver:jumpOver$$module$boundaries,nextWhile:nextWhile$$module$boundaries,prevWhile:prevWhile$$module$boundaries,stepWhile:stepWhile$$module$boundaries,walkWhile:walkWhile$$module$boundaries,nextNode:nextNode$$module$boundaries,prevNode:prevNode$$module$boundaries,nodeAfter:nodeAfter$$module$boundaries,nodeBefore:nodeBefore$$module$boundaries,precedingTextLength:precedingTextLength$$module$boundaries,
commonContainer:commonContainer$$module$boundaries};var Dom$$module$cursors=module$dom,Boundaries$$module$cursors=module$boundaries;function Cursor$$module$cursors(a,b){this.node=a;this.atEnd=b}function create$$module$cursors(a,b){return new Cursor$$module$cursors(a,b)}function createFromBoundary$$module$cursors(a,b){return create$$module$cursors(Dom$$module$cursors.nodeAtOffset(a,b),Boundaries$$module$cursors.isAtEnd(Boundaries$$module$cursors.raw(a,b)))}
Cursor$$module$cursors.prototype.next=function(){var a=this.node,b;if(this.atEnd||!Dom$$module$cursors.isElementNode(a)){if(b=a.nextSibling)this.atEnd=!1;else{b=a.parentNode;if(!b)return!1;this.atEnd=!0}this.node=b}else(b=a.firstChild)?this.node=b:this.atEnd=!0;return!0};
Cursor$$module$cursors.prototype.prev=function(){var a=this.node,b;if(this.atEnd)(b=a.lastChild)?(this.node=b,Dom$$module$cursors.isElementNode(b)||(this.atEnd=!1)):this.atEnd=!1;else{if(b=a.previousSibling)Dom$$module$cursors.isElementNode(b)&&(this.atEnd=!0);else if(b=a.parentNode,!b)return!1;this.node=b}return!0};Cursor$$module$cursors.prototype.skipPrev=function(a){return(a=this.prevSibling())?(this.node=a,this.atEnd=!1,!0):this.prev()};
Cursor$$module$cursors.prototype.skipNext=function(a){if(this.atEnd)return this.next();this.atEnd=!0;return this.next()};Cursor$$module$cursors.prototype.nextWhile=function(a){for(;a(this);)if(!this.next())return!1;return!0};Cursor$$module$cursors.prototype.prevWhile=function(a){for(;a(this);)if(!this.prev())return!1;return!0};Cursor$$module$cursors.prototype.parent=function(){return this.atEnd?this.node:this.node.parentNode};
Cursor$$module$cursors.prototype.prevSibling=function(){return this.atEnd?this.node.lastChild:this.node.previousSibling};Cursor$$module$cursors.prototype.nextSibling=function(){return this.atEnd?null:this.node.nextSibling};Cursor$$module$cursors.prototype.equals=function(a){return a.node===this.node&&a.atEnd===this.atEnd};Cursor$$module$cursors.prototype.setFrom=function(a){this.node=a.node;this.atEnd=a.atEnd};
Cursor$$module$cursors.prototype.clone=function(){return create$$module$cursors(this.node,this.atEnd)};Cursor$$module$cursors.prototype.insert=function(a){return Dom$$module$cursors.insert(a,this.node,this.atEnd)};Cursor$$module$cursors.prototype.next=Cursor$$module$cursors.prototype.next;Cursor$$module$cursors.prototype.prev=Cursor$$module$cursors.prototype.prev;Cursor$$module$cursors.prototype.skipPrev=Cursor$$module$cursors.prototype.skipPrev;Cursor$$module$cursors.prototype.skipNext=Cursor$$module$cursors.prototype.skipNext;
Cursor$$module$cursors.prototype.nextWhile=Cursor$$module$cursors.prototype.nextWhile;Cursor$$module$cursors.prototype.prevWhile=Cursor$$module$cursors.prototype.prevWhile;Cursor$$module$cursors.prototype.parent=Cursor$$module$cursors.prototype.parent;Cursor$$module$cursors.prototype.prevSibling=Cursor$$module$cursors.prototype.prevSibling;Cursor$$module$cursors.prototype.nextSibling=Cursor$$module$cursors.prototype.nextSibling;Cursor$$module$cursors.prototype.equals=Cursor$$module$cursors.prototype.equals;
Cursor$$module$cursors.prototype.setFrom=Cursor$$module$cursors.prototype.setFrom;Cursor$$module$cursors.prototype.clone=Cursor$$module$cursors.prototype.clone;Cursor$$module$cursors.prototype.insert=Cursor$$module$cursors.prototype.insert;function setRangeStart$$module$cursors(a,b){b.atEnd?a.setStart(b.node,Dom$$module$cursors.nodeLength(b.node)):a.setStart(b.node.parentNode,Dom$$module$cursors.nodeIndex(b.node));return a}
function setRangeEnd$$module$cursors(a,b){b.atEnd?a.setEnd(b.node,Dom$$module$cursors.nodeLength(b.node)):a.setEnd(b.node.parentNode,Dom$$module$cursors.nodeIndex(b.node));return a}function toBoundary$$module$cursors(a){return a.atEnd?Boundaries$$module$cursors.create(a.node,Dom$$module$cursors.nodeLength(a.node)):Boundaries$$module$cursors.create(a.node.parentNode,Dom$$module$cursors.nodeIndex(a.node))}
function setToRange$$module$cursors(a,b,c){b&&setRangeStart$$module$cursors(a,b);c&&setRangeEnd$$module$cursors(a,c);return a}var module$cursors={cursor:create$$module$cursors,cursorFromBoundaryPoint:createFromBoundary$$module$cursors,create:create$$module$cursors,createFromBoundary:createFromBoundary$$module$cursors,setToRange:setToRange$$module$cursors,setRangeStart:setRangeStart$$module$cursors,setRangeEnd:setRangeEnd$$module$cursors,toBoundary:toBoundary$$module$cursors};var Dom$$module$html$styles=module$dom,Predicates$$module$html$styles=module$html$predicates,LINE_BREAKING_VOID_ELEMENTS$$module$html$styles={BR:!0,HR:!0,IMG:!0},LIST_ITEMS$$module$html$styles={LI:!0,DT:!0,DD:!0},nonBlockDisplayValuesMap$$module$html$styles={inline:!0,"inline-block":!0,"inline-table":!0,none:!0};
function hasBlockStyle$$module$html$styles(a){if(!a)return!1;switch(a.nodeType){case Dom$$module$html$styles.Nodes.DOCUMENT:case Dom$$module$html$styles.Nodes.DOCUMENT_FRAGMENT:return!0;case Dom$$module$html$styles.Nodes.ELEMENT:var b=Dom$$module$html$styles.getComputedStyle(a,"display");return b?!nonBlockDisplayValuesMap$$module$html$styles[b]:Predicates$$module$html$styles.isBlockNode(a);default:return!1}}
function hasInlineStyle$$module$html$styles(a){return!hasBlockStyle$$module$html$styles(a)}function hasLinebreakingStyle$$module$html$styles(a){return LINE_BREAKING_VOID_ELEMENTS$$module$html$styles[a.nodeName]||LIST_ITEMS$$module$html$styles[a.nodeName]||hasBlockStyle$$module$html$styles(a)}function isWhiteSpacePreserveStyle$$module$html$styles(a){return"pre"===a||"pre-wrap"===a||"-moz-pre-wrap"===a}var notInheritedStyles$$module$html$styles={"background-color":!0,underline:!0};
function isStyleInherited$$module$html$styles(a){return!notInheritedStyles$$module$html$styles[a]}var module$html$styles={isStyleInherited:isStyleInherited$$module$html$styles,isWhiteSpacePreserveStyle:isWhiteSpacePreserveStyle$$module$html$styles,hasBlockStyle:hasBlockStyle$$module$html$styles,hasInlineStyle:hasInlineStyle$$module$html$styles,hasLinebreakingStyle:hasLinebreakingStyle$$module$html$styles};var Styles$$module$html$elements=module$html$styles,Predicates$$module$html$elements=module$html$predicates,Dom$$module$html$elements=module$dom,Cursors$$module$html$elements=module$cursors,Strings$$module$html$elements=module$strings;function isVoidType$$module$html$elements(a){return Predicates$$module$html$elements.isVoidNode(a)||!Dom$$module$html$elements.isEditableNode(a)}
function isUnrenderedWhitespaceNoBlockCheck$$module$html$elements(a){if(!Dom$$module$html$elements.isTextNode(a))return!1;if(!a.length)return!0;if(Strings$$module$html$elements.NOT_SPACE.test(a.nodeValue)||Strings$$module$html$elements.NON_BREAKING_SPACE.test(a.nodeValue))return!1;var b;return a.parentNode&&(b=Dom$$module$html$elements.getComputedStyle(a.parentNode,"white-space"),Styles$$module$html$elements.isWhiteSpacePreserveStyle(b))?!1:"pre-line"===b&&/[\r\n]/.test(a.data)?!1:!0}
var LINE_BREAKING_VOID_ELEMENTS$$module$html$elements={BR:!0,HR:!0,IMG:!0};function isUnrenderedAtPoint$$module$html$elements(a){return isUnrenderedWhitespaceNoBlockCheck$$module$html$elements(a.node)||Dom$$module$html$elements.isElementNode(a.node)&&Styles$$module$html$elements.hasInlineStyle(a.node)&&!LINE_BREAKING_VOID_ELEMENTS$$module$html$elements[a.node]}
function skipUnrenderedToEndOfLine$$module$html$elements(a){var b=a.clone();b.nextWhile(isUnrenderedAtPoint$$module$html$elements);if(!Styles$$module$html$elements.hasLinebreakingStyle(b.node))return!1;a.setFrom(b);return!0}
function skipUnrenderedToStartOfLine$$module$html$elements(a){var b=a.clone();b.prev();b.prevWhile(isUnrenderedAtPoint$$module$html$elements);if(!Styles$$module$html$elements.hasLinebreakingStyle(b.node))return!1;var c="BR"===b.node.nodeName;b.next();if(c&&(c=a.clone(),skipUnrenderedToEndOfLine$$module$html$elements(c)&&c.atEnd)){b.skipPrev();b.prevWhile(isUnrenderedAtPoint$$module$html$elements);if(!Styles$$module$html$elements.hasLinebreakingStyle(b.node))return!1;b.next()}a.setFrom(b);return!0}
function isUnrenderedWhitespace$$module$html$elements(a){return isUnrenderedWhitespaceNoBlockCheck$$module$html$elements(a)?skipUnrenderedToEndOfLine$$module$html$elements(Cursors$$module$html$elements.cursor(a,!1))||skipUnrenderedToStartOfLine$$module$html$elements(Cursors$$module$html$elements.cursor(a,!1)):!1}function isTerminalNode$$module$html$elements(a){var b=a.parentNode;return b&&(a===b.firstChild||a===b.lastChild)}
function isAdjacentToBlock$$module$html$elements(a){return a.previousSibling&&Predicates$$module$html$elements.isBlockNode(a.previousSibling)||a.nextSibling&&Predicates$$module$html$elements.isBlockNode(a.nextSibling)}
function isUnrendered$$module$html$elements(a){return!Predicates$$module$html$elements.isVoidNode(a)&&!Predicates$$module$html$elements.isListItem(a)&&0===Dom$$module$html$elements.nodeLength(a)||a.firstChild&&!Dom$$module$html$elements.nextWhile(a.firstChild,isUnrendered$$module$html$elements)?!0:isUnrenderedWhitespaceNoBlockCheck$$module$html$elements(a)?isTerminalNode$$module$html$elements(a)?Dom$$module$html$elements.isTextNode(a)?!Dom$$module$html$elements.nextNonAncestor(a,!1,function(a){return Predicates$$module$html$elements.isInlineNode(a)&&
!isUnrendered$$module$html$elements(a)},function(a){return Styles$$module$html$elements.hasLinebreakingStyle(a)||Dom$$module$html$elements.isEditingHost(a)}):!1:isAdjacentToBlock$$module$html$elements(a)||skipUnrenderedToEndOfLine$$module$html$elements(Cursors$$module$html$elements.create(a,!1))||skipUnrenderedToStartOfLine$$module$html$elements(Cursors$$module$html$elements.create(a,!1)):"BR"===a.nodeName&&isTerminalNode$$module$html$elements(a)&&Styles$$module$html$elements.hasLinebreakingStyle(a.parentNode)&&
(a.nextSibling&&"BR"===a.nextSibling.nodeName||a.previousSibling&&"BR"===a.previousSibling.nodeName||a.nextSibling&&Dom$$module$html$elements.nextWhile(a.nextSibling,isUnrendered$$module$html$elements)||a.previousSibling&&Dom$$module$html$elements.prevWhile(a.previousSibling,isUnrendered$$module$html$elements))?!0:!1}function isRendered$$module$html$elements(a){return!isUnrendered$$module$html$elements(a)}
function parse$$module$html$elements(a,b){var c=b.createElement("div");c.innerHTML=a;return c}
var module$html$elements={parse:parse$$module$html$elements,isVoidType:isVoidType$$module$html$elements,isRendered:isRendered$$module$html$elements,isUnrendered:isUnrendered$$module$html$elements,isUnrenderedWhitespace:isUnrenderedWhitespace$$module$html$elements,isUnrenderedWhitespaceNoBlockCheck:isUnrenderedWhitespaceNoBlockCheck$$module$html$elements,skipUnrenderedToEndOfLine:skipUnrenderedToEndOfLine$$module$html$elements,skipUnrenderedToStartOfLine:skipUnrenderedToStartOfLine$$module$html$elements};var Elements$$module$html$traversing=module$html$elements,Styles$$module$html$traversing=module$html$styles,Predicates$$module$html$traversing=module$html$predicates,Dom$$module$html$traversing=module$dom,Arrays$$module$html$traversing=module$arrays,Boundaries$$module$html$traversing=module$boundaries,Strings$$module$html$traversing=module$strings,IN_WORD_TAGS$$module$html$traversing={A:!0,ABBR:!0,B:!0,CITE:!0,CODE:!0,DEL:!0,EM:!0,I:!0,INS:!0,S:!0,SMALL:!0,SPAN:!0,STRONG:!0,SUB:!0,SUP:!0,U:!0,"#text":!0},
zwChars$$module$html$traversing=Strings$$module$html$traversing.ZERO_WIDTH_CHARACTERS.join(""),breakingWhiteSpaces$$module$html$traversing=Arrays$$module$html$traversing.difference(Strings$$module$html$traversing.WHITE_SPACE_CHARACTERS,Strings$$module$html$traversing.NON_BREAKING_SPACE_CHARACTERS).join(""),WSP_FROM_END$$module$html$traversing=new RegExp("["+breakingWhiteSpaces$$module$html$traversing+"]+["+zwChars$$module$html$traversing+"]*$"),NOT_WSP_FROM_END$$module$html$traversing=new RegExp("[^"+
breakingWhiteSpaces$$module$html$traversing+"]["+breakingWhiteSpaces$$module$html$traversing+zwChars$$module$html$traversing+"]*$"),NOT_WSP$$module$html$traversing=new RegExp("[^"+breakingWhiteSpaces$$module$html$traversing+zwChars$$module$html$traversing+"]"),NOT_ZWSP$$module$html$traversing=new RegExp("[^"+zwChars$$module$html$traversing+"]");
function prevNonAncestor$$module$html$traversing(a,b,c){return Dom$$module$html$traversing.nextNonAncestor(a,!0,b,c||Dom$$module$html$traversing.isEditingHost)}function nextNonAncestor$$module$html$traversing(a,b,c){return Dom$$module$html$traversing.nextNonAncestor(a,!1,b,c||Dom$$module$html$traversing.isEditingHost)}
function areNextWhiteSpacesSignificant$$module$html$traversing(a){var b=Boundaries$$module$html$traversing.container(a);a=Boundaries$$module$html$traversing.offset(a);var c=Dom$$module$html$traversing.isTextNode(b);return c&&-1<b.data.substr(0,a).search(WSP_FROM_END$$module$html$traversing)?!1:0===a?!!prevNonAncestor$$module$html$traversing(b,function(a){return Predicates$$module$html$traversing.isInlineNode(a)&&Elements$$module$html$traversing.isRendered(a)},function(a){return Styles$$module$html$traversing.hasLinebreakingStyle(a)||
Dom$$module$html$traversing.isEditingHost(a)}):c&&0!==b.data.substr(a).search(WSP_FROM_END$$module$html$traversing)?!0:!!nextNonAncestor$$module$html$traversing(b,function(a){return Predicates$$module$html$traversing.isInlineNode(a)&&Elements$$module$html$traversing.isRendered(a)},function(a){return Styles$$module$html$traversing.hasLinebreakingStyle(a)||Dom$$module$html$traversing.isEditingHost(a)})}
function prevSignificantOffset$$module$html$traversing(a){var b=Boundaries$$module$html$traversing.container(a);a=Boundaries$$module$html$traversing.offset(a);var c=b.data.substr(0,a);if(!NOT_WSP$$module$html$traversing.test(c))return areNextWhiteSpacesSignificant$$module$html$traversing(Boundaries$$module$html$traversing.raw(b,0))?1:-1;var d=c.match(NOT_WSP_FROM_END$$module$html$traversing)[0].length-1;a=2>d?a:a-d+1;if(0===a)return 0;b=Boundaries$$module$html$traversing.raw(b,a-1);return NOT_WSP$$module$html$traversing.test(c.charAt(a-
1))||areNextWhiteSpacesSignificant$$module$html$traversing(b)?a:prevSignificantOffset$$module$html$traversing(b)}function nextSignificantOffset$$module$html$traversing(a){var b=Boundaries$$module$html$traversing.container(a),c=Boundaries$$module$html$traversing.offset(a);a=b.data.substr(c).search(areNextWhiteSpacesSignificant$$module$html$traversing(a)?NOT_ZWSP$$module$html$traversing:NOT_WSP$$module$html$traversing);return-1===a?-1:c+a}
function nextCharacterBoundary$$module$html$traversing(a){if(Boundaries$$module$html$traversing.isNodeBoundary(a))return null;var b=nextSignificantOffset$$module$html$traversing(a);return-1===b?null:Boundaries$$module$html$traversing.create(Boundaries$$module$html$traversing.container(a),b+1)}
function prevCharacterBoundary$$module$html$traversing(a){if(Boundaries$$module$html$traversing.isNodeBoundary(a))return null;var b=prevSignificantOffset$$module$html$traversing(a);return-1===b?null:Boundaries$$module$html$traversing.create(Boundaries$$module$html$traversing.container(a),b-1)}
function expand$$module$html$traversing(a,b,c,d,e){return b(a,function(a){var b=c(a);return Elements$$module$html$traversing.isRendered(b)?e(a)?Dom$$module$html$traversing.isEditingHost(b)||Predicates$$module$html$traversing.isListItem(b)&&d(a)?!1:!0:!Dom$$module$html$traversing.isTextNode(b)&&!Elements$$module$html$traversing.isVoidType(b):!0})}
function expandBackward$$module$html$traversing(a){return expand$$module$html$traversing(a,Boundaries$$module$html$traversing.prevWhile,Boundaries$$module$html$traversing.prevNode,Boundaries$$module$html$traversing.isAtEnd,Boundaries$$module$html$traversing.isAtStart)}
function expandForward$$module$html$traversing(a){return expand$$module$html$traversing(a,Boundaries$$module$html$traversing.nextWhile,Boundaries$$module$html$traversing.nextNode,Boundaries$$module$html$traversing.isAtStart,Boundaries$$module$html$traversing.isAtEnd)}
function stepVisualBoundary$$module$html$traversing(a,b){if(Boundaries$$module$html$traversing.isTextBoundary(a)){var c=b.nextCharacter(a);if(c)return c}c=b.nodeAt(a);if(Dom$$module$html$traversing.isEditingHost(c))return a;if(Dom$$module$html$traversing.isTextNode(c)||Elements$$module$html$traversing.isUnrendered(c))return stepVisualBoundary$$module$html$traversing(b.stepBoundary(a),b);if(Styles$$module$html$traversing.hasLinebreakingStyle(c))return b.expand(b.stepBoundary(a));for(;!Elements$$module$html$traversing.isRendered(c)||
!(Dom$$module$html$traversing.isTextNode(c)||Styles$$module$html$traversing.hasLinebreakingStyle(c)||Dom$$module$html$traversing.isEditingHost(c));)a=b.stepBoundary(a),c=b.nodeAt(a);return stepVisualBoundary$$module$html$traversing(a,b)}
function stepForward$$module$html$traversing(a){if(Boundaries$$module$html$traversing.isNodeBoundary(a)){var b=Boundaries$$module$html$traversing.nodeAfter(a);if(b&&Elements$$module$html$traversing.isVoidType(b))return Boundaries$$module$html$traversing.jumpOver(a)}return Boundaries$$module$html$traversing.nextRawBoundary(a)}
function stepBackward$$module$html$traversing(a){if(Boundaries$$module$html$traversing.isNodeBoundary(a)){var b=Boundaries$$module$html$traversing.nodeBefore(a);if(b&&Elements$$module$html$traversing.isVoidType(b))return Boundaries$$module$html$traversing.fromNode(b)}return Boundaries$$module$html$traversing.prevRawBoundary(a)}
var forwardSteps$$module$html$traversing={nextCharacter:nextCharacterBoundary$$module$html$traversing,stepBoundary:stepForward$$module$html$traversing,expand:expandForward$$module$html$traversing,adjacentNode:Boundaries$$module$html$traversing.nodeAfter,nodeAt:Boundaries$$module$html$traversing.nextNode,followingSibling:function(a){return a.nextSibling},stepVisualBoundary:function(a){return nextVisualBoundary$$module$html$traversing(Boundaries$$module$html$traversing.raw(a,0))}},backwardSteps$$module$html$traversing=
{nextCharacter:prevCharacterBoundary$$module$html$traversing,stepBoundary:stepBackward$$module$html$traversing,expand:expandBackward$$module$html$traversing,adjacentNode:Boundaries$$module$html$traversing.nodeBefore,nodeAt:Boundaries$$module$html$traversing.prevNode,followingSibling:function(a){return a.previousSibling},stepVisualBoundary:function(a){return prevVisualBoundary$$module$html$traversing(Boundaries$$module$html$traversing.raw(a,Dom$$module$html$traversing.nodeLength(a)))}};
function isWordbreakingNode$$module$html$traversing(a){return!IN_WORD_TAGS$$module$html$traversing[a.nodeName]}function nextVisualBoundary$$module$html$traversing(a){return stepVisualBoundary$$module$html$traversing(a,forwardSteps$$module$html$traversing)}function prevVisualBoundary$$module$html$traversing(a){return stepVisualBoundary$$module$html$traversing(a,backwardSteps$$module$html$traversing)}
function nextSignificantBoundary$$module$html$traversing(a){var b;if(Boundaries$$module$html$traversing.isTextBoundary(a)){b=nextSignificantOffset$$module$html$traversing(a);if(-1===b)return(b=Boundaries$$module$html$traversing.nodeAfter(a))&&Elements$$module$html$traversing.isUnrendered(b)?nextSignificantBoundary$$module$html$traversing(Boundaries$$module$html$traversing.jumpOver(a)):b&&Elements$$module$html$traversing.isVoidType(b)?a:nextSignificantBoundary$$module$html$traversing(Boundaries$$module$html$traversing.next(a));
if(Boundaries$$module$html$traversing.offset(a)===b)return a;a=Boundaries$$module$html$traversing.create(Boundaries$$module$html$traversing.container(a),b);return nextSignificantBoundary$$module$html$traversing(a)}b=Boundaries$$module$html$traversing.nextNode(a);if(Dom$$module$html$traversing.isTextNode(b))return nextSignificantBoundary$$module$html$traversing(Boundaries$$module$html$traversing.nextRawBoundary(a));for(;!Dom$$module$html$traversing.isEditingHost(b)&&Elements$$module$html$traversing.isUnrendered(b);)a=
Boundaries$$module$html$traversing.next(a),b=Boundaries$$module$html$traversing.nextNode(a);return a}
function isBoundariesEqual$$module$html$traversing(a,b){var c,d;a=nextSignificantBoundary$$module$html$traversing(Boundaries$$module$html$traversing.normalize(a));for(b=nextSignificantBoundary$$module$html$traversing(Boundaries$$module$html$traversing.normalize(b));a&&!Boundaries$$module$html$traversing.equals(a,b);){c=Boundaries$$module$html$traversing.nextNode(a);if(Dom$$module$html$traversing.isEditingHost(c)||(d=Dom$$module$html$traversing.isTextNode(c)||Elements$$module$html$traversing.isVoidType(c)||
Styles$$module$html$traversing.hasLinebreakingStyle(c))&&Elements$$module$html$traversing.isRendered(c))return!1;a=nextSignificantBoundary$$module$html$traversing(Boundaries$$module$html$traversing.next(a))}return!0}
function prevSignificantBoundary$$module$html$traversing(a){var b;if(Boundaries$$module$html$traversing.isTextBoundary(a)){b=prevSignificantOffset$$module$html$traversing(a);if(-1===b){for(b=Boundaries$$module$html$traversing.prev(a);isBoundariesEqual$$module$html$traversing(b,a)&&!Styles$$module$html$traversing.hasLinebreakingStyle(Boundaries$$module$html$traversing.prevNode(b));)b=Boundaries$$module$html$traversing.prev(b);return prevSignificantBoundary$$module$html$traversing(b)}if(Boundaries$$module$html$traversing.offset(a)===
b)return a;a=Boundaries$$module$html$traversing.create(Boundaries$$module$html$traversing.container(a),b);return prevSignificantBoundary$$module$html$traversing(a)}b=Boundaries$$module$html$traversing.prevNode(a);if(Dom$$module$html$traversing.isTextNode(b))return prevSignificantBoundary$$module$html$traversing(Boundaries$$module$html$traversing.prevRawBoundary(a));for(;!Dom$$module$html$traversing.isEditingHost(b)&&Elements$$module$html$traversing.isUnrendered(b);)a=Boundaries$$module$html$traversing.prev(a),
b=Boundaries$$module$html$traversing.prevNode(a);return a}function nextWordBoundaryOffset$$module$html$traversing(a){var b=Boundaries$$module$html$traversing.container(a);a=Boundaries$$module$html$traversing.offset(a);b=b.data.substr(a).search(Strings$$module$html$traversing.WORD_BOUNDARY);return-1===b?-1:a+b}
function prevWordBoundaryOffset$$module$html$traversing(a){var b=Boundaries$$module$html$traversing.container(a);a=Boundaries$$module$html$traversing.offset(a);b=b.data.substr(0,a).search(Strings$$module$html$traversing.WORD_BOUNDARY_FROM_END);return-1===b?-1:b+1}
function nextWordBoundary$$module$html$traversing(a){var b,c;if(Boundaries$$module$html$traversing.isNodeBoundary(a))return b=Boundaries$$module$html$traversing.nextNode(a),c=Boundaries$$module$html$traversing.nextRawBoundary(a),isWordbreakingNode$$module$html$traversing(b)?a:nextWordBoundary$$module$html$traversing(c);b=nextWordBoundaryOffset$$module$html$traversing(a);return-1===b?(c=Boundaries$$module$html$traversing.next(a),b=Boundaries$$module$html$traversing.nextNode(c),isWordbreakingNode$$module$html$traversing(b)?
c:nextWordBoundary$$module$html$traversing(c)):b===Boundaries$$module$html$traversing.offset(a)?a:Boundaries$$module$html$traversing.raw(Boundaries$$module$html$traversing.container(a),b)}
function prevWordBoundary$$module$html$traversing(a){var b,c;if(Boundaries$$module$html$traversing.isNodeBoundary(a))return b=Boundaries$$module$html$traversing.prevNode(a),c=Boundaries$$module$html$traversing.prevRawBoundary(a),isWordbreakingNode$$module$html$traversing(b)?a:prevWordBoundary$$module$html$traversing(c);b=prevWordBoundaryOffset$$module$html$traversing(a);return-1===b?(c=Boundaries$$module$html$traversing.prev(a),b=Boundaries$$module$html$traversing.prevNode(c),isWordbreakingNode$$module$html$traversing(b)?
c:prevWordBoundary$$module$html$traversing(c)):b===Boundaries$$module$html$traversing.offset(a)?a:Boundaries$$module$html$traversing.raw(Boundaries$$module$html$traversing.container(a),b)}
function next$$module$html$traversing(a,b){if("node"===b)return Boundaries$$module$html$traversing.next(a);a=nextSignificantBoundary$$module$html$traversing(Boundaries$$module$html$traversing.normalize(a));var c;switch(b){case "char":c=nextCharacterBoundary$$module$html$traversing(a);break;case "word":c=nextWordBoundary$$module$html$traversing(a);isBoundariesEqual$$module$html$traversing(a,c)&&(c=nextVisualBoundary$$module$html$traversing(a));break;case "boundary":c=stepForward$$module$html$traversing(a);
break;default:c=nextVisualBoundary$$module$html$traversing(a)}return c}
function prev$$module$html$traversing(a,b){if("node"===b)return Boundaries$$module$html$traversing.prev(a);a=prevSignificantBoundary$$module$html$traversing(Boundaries$$module$html$traversing.normalize(a));var c;switch(b){case "char":c=prevCharacterBoundary$$module$html$traversing(a);break;case "word":c=prevWordBoundary$$module$html$traversing(a);isBoundariesEqual$$module$html$traversing(c,a)&&(c=prevVisualBoundary$$module$html$traversing(a));break;case "boundary":c=stepBackward$$module$html$traversing(a);
break;default:c=prevVisualBoundary$$module$html$traversing(a)}return c&&prevSignificantBoundary$$module$html$traversing(c)}
function isAtEnd$$module$html$traversing(a){if(Boundaries$$module$html$traversing.isAtEnd(a))return!0;if(Boundaries$$module$html$traversing.isTextBoundary(a))return!NOT_WSP$$module$html$traversing.test(Boundaries$$module$html$traversing.container(a).data.substr(Boundaries$$module$html$traversing.offset(a)));a=Boundaries$$module$html$traversing.nodeAfter(a);return!Dom$$module$html$traversing.nextWhile(a,Elements$$module$html$traversing.isUnrendered)}
function isAtStart$$module$html$traversing(a){if(Boundaries$$module$html$traversing.isAtStart(a))return!0;if(Boundaries$$module$html$traversing.isTextBoundary(a))return!NOT_WSP$$module$html$traversing.test(Boundaries$$module$html$traversing.container(a).data.substr(0,Boundaries$$module$html$traversing.offset(a)));a=Boundaries$$module$html$traversing.nodeBefore(a);return!Dom$$module$html$traversing.prevWhile(a,Elements$$module$html$traversing.isUnrendered)}
function nextNode$$module$html$traversing(a){return isAtEnd$$module$html$traversing(a)?Boundaries$$module$html$traversing.container(a):Boundaries$$module$html$traversing.nodeAfter(a)}function prevNode$$module$html$traversing(a){return isAtEnd$$module$html$traversing(a)?Boundaries$$module$html$traversing.container(a):Boundaries$$module$html$traversing.nodeBefore(a)}
var module$html$traversing={prev:prev$$module$html$traversing,next:next$$module$html$traversing,prevNode:prevNode$$module$html$traversing,nextNode:nextNode$$module$html$traversing,prevSignificantOffset:prevSignificantOffset$$module$html$traversing,nextSignificantOffset:nextSignificantOffset$$module$html$traversing,prevSignificantBoundary:prevSignificantBoundary$$module$html$traversing,nextSignificantBoundary:nextSignificantBoundary$$module$html$traversing,stepForward:stepForward$$module$html$traversing,
stepBackward:stepBackward$$module$html$traversing,isAtStart:isAtStart$$module$html$traversing,isAtEnd:isAtEnd$$module$html$traversing,isBoundariesEqual:isBoundariesEqual$$module$html$traversing};var Boundaries$$module$image$image_selection=module$boundaries;function isImage$$module$image$image_selection(a){return"IMG"===a.nodeName}
function imagesFromBoundaries$$module$image$image_selection(a){var b=[],c=Boundaries$$module$image$image_selection.nextNode(a[0]),d=Boundaries$$module$image$image_selection.prevNode(a[1]);for(a=a[0];c&&c!==d;)isImage$$module$image$image_selection(c)&&b.push(c),a=Boundaries$$module$image$image_selection.next(a),c=Boundaries$$module$image$image_selection.container(a);isImage$$module$image$image_selection(d)&&b.push(d);return b}var module$image$image_selection={imagesFromBoundaries:imagesFromBoundaries$$module$image$image_selection};var Dom$$module$mutation=module$dom,Arrays$$module$mutation=module$arrays,Boundaries$$module$mutation=module$boundaries,Traversing$$module$mutation=module$html$traversing;function wouldSplitTextNode$$module$mutation(a,b){return 0<b&&b<a.nodeValue.length}
function splitTextNode$$module$mutation(a,b){if(!wouldSplitTextNode$$module$mutation(a,b))return a;var c=a.parentNode,d=a.nodeValue,e=c.ownerDocument,f=e.createTextNode(d.substring(0,b)),d=e.createTextNode(d.substring(b,d.length));c.insertBefore(f,a);c.insertBefore(d,a);c.removeChild(a);return f}function adjustBoundaryAfterSplit$$module$mutation(a,b,c,d){var e=a[0];a=a[1];e===b?a<=c||!c?e=d:(e=d.nextSibling,a-=c):e===d.parentNode&&(b=Dom$$module$mutation.nodeIndex(d),a>b&&(a+=1));return[e,a]}
function adjustBoundaryAfterJoin$$module$mutation(a,b,c,d,e,f,g,h){var k=a[0];a=a[1];k===b?(k=d,a+=h?e:0):k===d?a+=h?0:c:k===f&&(a===g?(k=d,a=h?e:0):h||a!==g+1?a>g&&(a-=1):(k=d,a=c));return[k,a]}function adjustBoundaryAfterRemove$$module$mutation(a,b,c,d){var e=a[0];a=a[1];e===b||Dom$$module$mutation.contains(b,e)?(e=c,a=d):e===c&&a>d&&(a-=1);return[e,a]}function adjustBoundaryAfterInsert$$module$mutation(a,b,c,d,e){var f=a[0],g=a[1];b===f&&(e?g>=c:g>c)&&(a=[f,g+d]);return a}
function adjustBoundaryAfterTextInsert$$module$mutation(a,b,c,d,e){a=Boundaries$$module$mutation.normalize(a);var f=a[0],g=a[1];if(!Dom$$module$mutation.isTextNode(f)){var h=g<Dom$$module$mutation.numChildren(f)?Dom$$module$mutation.nthChild(f,g):null,f=0<g?Dom$$module$mutation.nthChild(f,g-1):null;h===b?a=[h,0]:f===b&&(a=[f,Dom$$module$mutation.nodeLength(f)])}return Boundaries$$module$mutation.normalize(adjustBoundaryAfterInsert$$module$mutation(a,b,c,d,e))}
function adjustBoundaryAfterNodeInsert$$module$mutation(a,b,c){a=Boundaries$$module$mutation.normalize(a);return adjustBoundaryAfterInsert$$module$mutation(a,b.parentNode,Dom$$module$mutation.nodeIndex(b),1,c)}function adjustBoundaries$$module$mutation(a,b){var c=Array.prototype.slice.call(arguments,2);return b.map(function(b){return a.apply(null,[b].concat(c))})}
function splitBoundary$$module$mutation(a,b){var c=a[0],d=a[1];if(Dom$$module$mutation.isTextNode(c)&&wouldSplitTextNode$$module$mutation(c,d)){var e=Boundaries$$module$mutation.fromRanges(b);e.push(a);var f=splitTextNode$$module$mutation(c,d),c=adjustBoundaries$$module$mutation(adjustBoundaryAfterSplit$$module$mutation,e,c,d,f);a=c.pop();Boundaries$$module$mutation.setRanges(b,c)}return a}
var UNSPLITTABLE$$module$mutation={BODY:!0,HTML:!0,STYLE:!0,SCRIPT:!0,AREA:!0,BASE:!0,BR:!0,COL:!0,COMMAND:!0,EMBED:!0,HR:!0,IMG:!0,INPUT:!0,KEYGEN:!0,LINK:!0,META:!0,PARAM:!0,SOURCE:!0,TRACK:!0,WBR:!0};
function splitBoundaryUntil$$module$mutation(a,b){a=Boundaries$$module$mutation.normalize(a);if(b&&b(a))return a;if(Boundaries$$module$mutation.isTextBoundary(a))return splitBoundaryUntil$$module$mutation(splitBoundary$$module$mutation(a),b);var c=Boundaries$$module$mutation.container(a);if(UNSPLITTABLE$$module$mutation[c.nodeName])return a;var d=Dom$$module$mutation.cloneShallow(c),e=Boundaries$$module$mutation.nodeAfter(a);e&&Dom$$module$mutation.move(Dom$$module$mutation.nodeAndNextSiblings(e),
d);Dom$$module$mutation.insertAfter(d,c);return splitBoundaryUntil$$module$mutation(Traversing$$module$mutation.stepForward(a),b)}function splitTextContainers$$module$mutation(a){splitBoundary$$module$mutation(Boundaries$$module$mutation.fromRangeStart(a),[a]);splitBoundary$$module$mutation(Boundaries$$module$mutation.fromRangeEnd(a),[a])}
function joinTextNodeOneWay$$module$mutation(a,b,c,d){if(!b||!Dom$$module$mutation.isTextNode(b))return a;var e=Boundaries$$module$mutation.fromRanges(c),f=a.parentNode,g=Dom$$module$mutation.nodeIndex(a),h=a.length,k=b.length;b.insertData(d?k:0,a.data);f.removeChild(a);e=adjustBoundaries$$module$mutation(adjustBoundaryAfterJoin$$module$mutation,e,a,h,b,k,f,g,d);Boundaries$$module$mutation.setRanges(c,e);return b}
function joinTextNode$$module$mutation(a,b){Dom$$module$mutation.isTextNode(a)&&(a=joinTextNodeOneWay$$module$mutation(a,a.previousSibling,b,!0),joinTextNodeOneWay$$module$mutation(a,a.nextSibling,b,!1))}function joinTextNodeAdjustRange$$module$mutation(a,b){joinTextNode$$module$mutation(a,[b])}
function adjustRangesAfterTextInsert$$module$mutation(a,b,c,d,e,f){e.push([a,b]);e=adjustBoundaries$$module$mutation(adjustBoundaryAfterTextInsert$$module$mutation,e,a,b,c,d);a=e.pop();Boundaries$$module$mutation.setRanges(f,e);return a}
function adjustRangesAfterNodeInsert$$module$mutation(a,b,c,d){c.push([a.parentNode,Dom$$module$mutation.nodeIndex(a)]);c=adjustBoundaries$$module$mutation(adjustBoundaryAfterNodeInsert$$module$mutation,c,a,b);a=c.pop();Boundaries$$module$mutation.setRanges(d,c);return a}
function insertTextAtBoundary$$module$mutation(a,b,c,d){var e=Boundaries$$module$mutation.fromRanges(d);if(!a.length)return b;var f=b[0],g=b[1];if(Dom$$module$mutation.isTextNode(f)&&g<Dom$$module$mutation.nodeLength(f))return f.insertData(g,a),adjustRangesAfterTextInsert$$module$mutation(f,g,a.length,c,e,d);b=Dom$$module$mutation.nodeAtOffset(f,g);f=Boundaries$$module$mutation.isAtEnd(Boundaries$$module$mutation.raw(f,g));if(Dom$$module$mutation.isTextNode(b))return b.insertData(0,a),adjustRangesAfterTextInsert$$module$mutation(b,
0,a.length,c,e,d);if((g=f?b.lastChild:b.previousSibling)&&Dom$$module$mutation.isTextNode(g))return b=Dom$$module$mutation.nodeLength(g),g.insertData(b,a),adjustRangesAfterTextInsert$$module$mutation(g,b,a.length,c,e,d);a=b.ownerDocument.createTextNode(a);Dom$$module$mutation.insert(a,b,f);return adjustRangesAfterNodeInsert$$module$mutation(a,c,e,d)}
function insertNodeAtBoundary$$module$mutation(a,b,c,d){var e=Boundaries$$module$mutation.fromRanges(d);b=splitBoundary$$module$mutation(b,d);var f=Boundaries$$module$mutation.nextNode(b);b=Boundaries$$module$mutation.isAtEnd(b);Dom$$module$mutation.insert(a,f,b);return adjustRangesAfterNodeInsert$$module$mutation(a,c,e,d)}
function removePreservingRanges$$module$mutation(a,b){var c=Boundaries$$module$mutation.fromRanges(b),d=a.parentNode,e=Dom$$module$mutation.nodeIndex(a);d.removeChild(a);c=adjustBoundaries$$module$mutation(adjustBoundaryAfterRemove$$module$mutation,c,a,d,e);Boundaries$$module$mutation.setRanges(b,c)}function removePreservingRange$$module$mutation(a,b){removePreservingRanges$$module$mutation(a,[b])}
function boundaryToRange$$module$mutation(a){var b=Boundaries$$module$mutation.container(a),c=b.ownerDocument.createRange();a=Boundaries$$module$mutation.offset(a);c.setStart(b,a);c.setEnd(b,a);return c}function rangeFromBoundary$$module$mutation(a){return Boundaries$$module$mutation.fromRange(a)[0]}function removeNode$$module$mutation(a,b){var c=b.map(boundaryToRange$$module$mutation);removePreservingRanges$$module$mutation(a,c);return c.map(rangeFromBoundary$$module$mutation)}
function preserveCursorForShallowRemove$$module$mutation(a,b){b.node===a&&(b.node.firstChild?b.next():b.skipNext())}function removeShallowPreservingCursors$$module$mutation(a,b){b.forEach(function(b){preserveCursorForShallowRemove$$module$mutation(a,b)});Dom$$module$mutation.removeShallow(a)}
function replaceShallowPreservingBoundaries$$module$mutation(a,b,c){var d=Dom$$module$mutation.replaceShallow(a,b);return c.reduce(function(a,c){return a.concat(d===Boundaries$$module$mutation.container(c)?[Boundaries$$module$mutation.create(b,Boundaries$$module$mutation.offset(c))]:[c])},[])}
var module$mutation={removeNode:removeNode$$module$mutation,removePreservingRange:removePreservingRange$$module$mutation,removePreservingRanges:removePreservingRanges$$module$mutation,removeShallowPreservingCursors:removeShallowPreservingCursors$$module$mutation,replaceShallowPreservingBoundaries:replaceShallowPreservingBoundaries$$module$mutation,insertTextAtBoundary:insertTextAtBoundary$$module$mutation,insertNodeAtBoundary:insertNodeAtBoundary$$module$mutation,splitTextNode:splitTextNode$$module$mutation,
splitTextContainers:splitTextContainers$$module$mutation,joinTextNodeAdjustRange:joinTextNodeAdjustRange$$module$mutation,joinTextNode:joinTextNode$$module$mutation,splitBoundary:splitBoundary$$module$mutation,splitBoundaryUntil:splitBoundaryUntil$$module$mutation};var Dom$$module$overrides=module$dom,Misc$$module$overrides=module$misc,Maps$$module$overrides=module$maps,Boromir$$module$overrides=module$boromir,Mutation$$module$overrides=module$mutation,Boundaries$$module$overrides=module$boundaries,nodeToState$$module$overrides={A:"link",U:"underline",B:"bold",STRONG:"bold",I:"italic",EM:"italic",STRIKE:"strikethrough",SUB:"subscript",SUP:"superscript"},stateToNode$$module$overrides={link:"A",underline:"U",bold:"B",italic:"I",strikethrough:"STRIKE",subscript:"SUB",
superscript:"SUP"},stateToStyle$$module$overrides={bold:["fontWeight","bold",null],italic:["fontStyle","italic",null],underline:["textDecoration","underline","none"],strikethrough:["textDecoration","line-through","none"]},valueToStyle$$module$overrides={hilitecolor:"background-color",backcolor:"background-color",fontname:"font-family",fontsize:"font-size",fontcolor:"color"},styles$$module$overrides="textTransform backgroundColor color fontSize fontFamily border borderColor borderStyle borderWidth borderTop borderTopColor borderTopStyle borderTopWidth borderBottom borderBottomColor borderBottomStyle borderBottomWidth borderLeft borderLeftColor borderLeftStyle borderLeftWidth borderRight borderRightColor borderRightStyle borderRightWidth".split(" ");
function fromStyles$$module$overrides(a){var b=[];Maps$$module$overrides.forEach(stateToStyle$$module$overrides,function(c,d){var e=Dom$$module$overrides.getStyle(a,c[0]);e&&(c[2]?e===c[2]?b.push([d,!1]):e===c[1]&&b.push([d,!0]):b.push([d,e===c[1]]))});return b}function fromNode$$module$overrides(a){if(Dom$$module$overrides.isTextNode(a))return[];var b=nodeToState$$module$overrides[a.nodeName];return(b?[[b,!0]]:[]).concat(fromStyles$$module$overrides(a))}
function valuesFromNode$$module$overrides(a){return Dom$$module$overrides.isTextNode(a)?[]:styles$$module$overrides.reduce(function(b,c){var d=Dom$$module$overrides.getStyle(a,c);return d?b.concat([[c,d]]):b},[])}
function harvest$$module$overrides(a,b){for(var c=[],d=Dom$$module$overrides.childAndParentsUntil(a,b||Dom$$module$overrides.isEditingHost),e={},f=d.length,g,h,k,l,m;f--;){k=fromNode$$module$overrides(d[f]);g=0;for(h=k.length;g<h;g++)l=k[g],m=e[l[0]],Misc$$module$overrides.defined(m)&&c.splice(m-1,1,null),e[l[0]]=c.push(l);c=c.concat(valuesFromNode$$module$overrides(d[f]))}return c.reduce(function(a,b){return b?a.concat([b]):a},[])}
function purgeFormat$$module$overrides(a,b){for(var c=Boundaries$$module$overrides.container(b),d=Dom$$module$overrides.childAndParentsUntil(c,Dom$$module$overrides.isEditingHost),e=stateToNode$$module$overrides[a],f=stateToStyle$$module$overrides[a],g=f[0],f=f[1],h=d.length,k,l;h--;)if(l=d[h],Dom$$module$overrides.isElementNode(l)&&(e===l.nodeName||Dom$$module$overrides.getStyle(l,g)===f)){k=l.parentNode;break}if(!k)return b;c=harvest$$module$overrides(c,function(a){return a==k}).reduce(function(b,
c){return a===c[0]?b:b.concat([c])},[]);b=Mutation$$module$overrides.splitBoundaryUntil(b,function(a){return Boundaries$$module$overrides.container(a)===k});return consume$$module$overrides(b,c)}
function consume$$module$overrides(a,b){var c=Boundaries$$module$overrides.document(a),d;Maps$$module$overrides.forEach(Maps$$module$overrides.mapTuples(b),function(b,f){if(stateToNode$$module$overrides[f])if(b){var g=c.createElement(stateToNode$$module$overrides[f]);d?Dom$$module$overrides.wrap(d,g):(Mutation$$module$overrides.insertNodeAtBoundary(g,a),a=Boundaries$$module$overrides.create(g,0));d=g}else a=purgeFormat$$module$overrides(f,a);else d||(d=c.createElement("span"),Mutation$$module$overrides.insertNodeAtBoundary(d,
a),a=Boundaries$$module$overrides.create(d,0)),Dom$$module$overrides.setStyle(d,f,b)});return a}function find$$module$overrides(a,b){for(var c=0;c<a.length;c++)if(b===a[c][0])return a[c];return null}function toggle$$module$overrides(a,b,c){return(a=find$$module$overrides(a,b))?[b,"boolean"===typeof a[1]?!a[1]:c]:[b,c]}var module$overrides={consume:consume$$module$overrides,harvest:harvest$$module$overrides,nodeToState:nodeToState$$module$overrides,toggle:toggle$$module$overrides};var Elements$$module$html$mutation=module$html$elements,Styles$$module$html$mutation=module$html$styles,Traversing$$module$html$mutation=module$html$traversing,Predicates$$module$html$mutation=module$html$predicates,Dom$$module$html$mutation=module$dom,Mutation$$module$html$mutation=module$mutation,Arrays$$module$html$mutation=module$arrays,Content$$module$html$mutation=module$content,Boundaries$$module$html$mutation=module$boundaries,Overrides$$module$html$mutation=module$overrides,Fn$$module$html$mutation=
module$functions,Browsers$$module$html$mutation=module$browsers;function closestEditable$$module$html$mutation(a){return Dom$$module$html$mutation.upWhile(a,Fn$$module$html$mutation.complement(Dom$$module$html$mutation.isContentEditable))}
function prop$$module$html$mutation(a){!Predicates$$module$html$mutation.isBlockNode(a)||Browsers$$module$html$mutation.msie&&closestEditable$$module$html$mutation(a)||a.firstChild&&Dom$$module$html$mutation.nextWhile(a.firstChild,Elements$$module$html$mutation.isUnrenderedWhitespace)||Dom$$module$html$mutation.insert(a.ownerDocument.createElement("br"),a,!0)}
function nextLineBreak$$module$html$mutation(a,b){return Boundaries$$module$html$mutation.nextWhile(a,function(a){return Boundaries$$module$html$mutation.equals(a,b)||Styles$$module$html$mutation.hasLinebreakingStyle(Boundaries$$module$html$mutation.nextNode(a))?!1:Boundaries$$module$html$mutation.isAtEnd(a)?!Dom$$module$html$mutation.isEditingHost(Boundaries$$module$html$mutation.container(a)):!0})}
function isVisuallyAdjacent$$module$html$mutation(a,b){var c=!1;Boundaries$$module$html$mutation.prevWhile(b,function(b){return Boundaries$$module$html$mutation.equals(a,b)?(c=!0,!1):0<Boundaries$$module$html$mutation.offset(b)&&(b=Dom$$module$html$mutation.nodeAtOffset(Boundaries$$module$html$mutation.container(b),Boundaries$$module$html$mutation.offset(b)-1),(Dom$$module$html$mutation.isTextNode(b)||Predicates$$module$html$mutation.isVoidNode(b))&&Elements$$module$html$mutation.isRendered(b))?c=
!1:!0});return c}function hasRenderedContent$$module$html$mutation(a){return Dom$$module$html$mutation.isTextNode(a)?Elements$$module$html$mutation.isRendered(a):0<Dom$$module$html$mutation.children(a).filter(function(a){return Predicates$$module$html$mutation.isListItem(a)||Elements$$module$html$mutation.isRendered(a)}).length}
function removeBreak$$module$html$mutation(a,b){if(!isVisuallyAdjacent$$module$html$mutation(a,b))return[a,b];var c=Boundaries$$module$html$mutation.nextNode(b),d=Boundaries$$module$html$mutation.container(a),e=nextLineBreak$$module$html$mutation(a,b),f=function(a){return d===a||hasRenderedContent$$module$html$mutation(a)};if(Boundaries$$module$html$mutation.equals(e,b))return Dom$$module$html$mutation.climbUntil(c,Dom$$module$html$mutation.remove,f),[a,a];var g=c.parentNode,h=Dom$$module$html$mutation.nodeAndNextSiblings(c,
Styles$$module$html$mutation.hasLinebreakingStyle);0===h.length&&(g=c);h.reduce(function(a,b){return Mutation$$module$html$mutation.insertNodeAtBoundary(b,a)},e);g&&Dom$$module$html$mutation.climbUntil(g,Dom$$module$html$mutation.remove,f);return[a,a]}
function isRenderedBr$$module$html$mutation(a){if("BR"!==a.nodeName)return!1;var b=function(a){return"BR"!==a.nodeName&&Elements$$module$html$mutation.isUnrendered(a)},c=a.previousSibling&&Dom$$module$html$mutation.prevWhile(a.previousSibling,b),b=a.nextSibling&&Dom$$module$html$mutation.nextWhile(a.nextSibling,b);if(c&&b&&Predicates$$module$html$mutation.isInlineNode(a.parentNode)||!(!c||"BR"!==c.nodeName&&Styles$$module$html$mutation.hasLinebreakingStyle(c)||!b||"BR"!==b.nodeName&&Styles$$module$html$mutation.hasLinebreakingStyle(b))||
c&&"BR"===c.nodeName||b&&"BR"===b.nodeName)return!0;for(c=Boundaries$$module$html$mutation.fromNode(a);Traversing$$module$html$mutation.isAtStart(c);){if(Styles$$module$html$mutation.hasLinebreakingStyle(Boundaries$$module$html$mutation.container(c)))return!0;c=Boundaries$$module$html$mutation.prev(c)}for(c=Boundaries$$module$html$mutation.jumpOver(Boundaries$$module$html$mutation.fromNode(a));Traversing$$module$html$mutation.isAtEnd(c);){if(Styles$$module$html$mutation.hasLinebreakingStyle(Boundaries$$module$html$mutation.container(c)))return!1;
c=Boundaries$$module$html$mutation.next(c)}return!Styles$$module$html$mutation.hasLinebreakingStyle(Traversing$$module$html$mutation.nextNode(c))}function insertLineBreak$$module$html$mutation(a){var b=Boundaries$$module$html$mutation.container(a).ownerDocument,c=b.createElement("br");a=Mutation$$module$html$mutation.insertNodeAtBoundary(c,a,!0);return isRenderedBr$$module$html$mutation(c)?a:Mutation$$module$html$mutation.insertNodeAtBoundary(b.createElement("br"),a)}
function insertBreakAtBoundary$$module$html$mutation(a,b){var c=Boundaries$$module$html$mutation.container(a);if(!Content$$module$html$mutation.allowsNesting(c.nodeName,b))return insertLineBreak$$module$html$mutation(a);c=c.ownerDocument.createElement(b);Mutation$$module$html$mutation.insertNodeAtBoundary(c,a);return Boundaries$$module$html$mutation.create(c,0)}
function isBreakingContainer$$module$html$mutation(a){return!Elements$$module$html$mutation.isVoidType(a)&&(Styles$$module$html$mutation.hasLinebreakingStyle(a)||Dom$$module$html$mutation.isEditingHost(a))}function splitToBreakingContainer$$module$html$mutation(a){return Mutation$$module$html$mutation.splitBoundaryUntil(a,function(a){return isBreakingContainer$$module$html$mutation(Boundaries$$module$html$mutation.container(a))})}
function removeInvisibleContainers$$module$html$mutation(a,b){Dom$$module$html$mutation.climbUntil(Boundaries$$module$html$mutation.container(a),function(a){b=Mutation$$module$html$mutation.removeNode(a,b)},function(a){return Styles$$module$html$mutation.hasLinebreakingStyle(a)||Dom$$module$html$mutation.isEditingHost(a)||Elements$$module$html$mutation.isRendered(a)});return b}
function adjacentBr$$module$html$mutation(a){var b=Boundaries$$module$html$mutation.nodeBefore(a);a=Boundaries$$module$html$mutation.nodeAfter(a);return b&&isRenderedBr$$module$html$mutation(b)?b:a&&isRenderedBr$$module$html$mutation(a)?a:null}
function separateListItem$$module$html$mutation(a){var b=Dom$$module$html$mutation.prevSiblings(a).filter(Predicates$$module$html$mutation.isListItem),c=Dom$$module$html$mutation.nextSiblings(a).filter(Predicates$$module$html$mutation.isListItem);a=a.parentNode;if(0<b.length){var d=Dom$$module$html$mutation.cloneShallow(a);Dom$$module$html$mutation.moveBefore([d],a);Dom$$module$html$mutation.move(b,d)}0<c.length&&(b=Dom$$module$html$mutation.cloneShallow(a),Dom$$module$html$mutation.moveAfter([b],
a),Dom$$module$html$mutation.move(c,b))}
function unwrapListItem$$module$html$mutation(a){separateListItem$$module$html$mutation(a);Dom$$module$html$mutation.removeShallow(a.parentNode);for(var b=a.ownerDocument,c=Dom$$module$html$mutation.children(a).filter(Elements$$module$html$mutation.isRendered),d,e=[];0<c.length;)Styles$$module$html$mutation.hasLinebreakingStyle(c[0])?e.push(c.shift()):(c=Arrays$$module$html$mutation.split(c,Styles$$module$html$mutation.hasLinebreakingStyle),d=b.createElement("p"),Dom$$module$html$mutation.move(c[0],
d),e.push(d),c=c[1]);Dom$$module$html$mutation.moveAfter(e,a);Dom$$module$html$mutation.remove(a);return e}
function breakOutOfList$$module$html$mutation(a,b){separateListItem$$module$html$mutation(a);var c=a.ownerDocument,d=a.parentNode;if(!Predicates$$module$html$mutation.isListItem(d.parentNode))return c=c.createElement(b),Dom$$module$html$mutation.removeShallow(d),Dom$$module$html$mutation.replaceShallow(a,c),prop$$module$html$mutation(c),Boundaries$$module$html$mutation.create(c,0);var e=Mutation$$module$html$mutation.splitBoundaryUntil(Boundaries$$module$html$mutation.fromNode(d),function(a){return Predicates$$module$html$mutation.isListContainer(Boundaries$$module$html$mutation.container(a))});
Dom$$module$html$mutation.remove(d);d=Boundaries$$module$html$mutation.nextNode(e);return Dom$$module$html$mutation.children(d).filter(Elements$$module$html$mutation.isRendered).length?(a=c.createElement("li"),prop$$module$html$mutation(a),Mutation$$module$html$mutation.insertNodeAtBoundary(a,e,!0),Boundaries$$module$html$mutation.create(a,0)):Boundaries$$module$html$mutation.create(d,0)}
function insertBreak$$module$html$mutation(a,b){var c=adjacentBr$$module$html$mutation(a);c&&(a=Mutation$$module$html$mutation.insertNodeAtBoundary(c.ownerDocument.createElement("br"),a,!0));var d=Boundaries$$module$html$mutation.container(a);if(Predicates$$module$html$mutation.isListItem(d)&&!d.firstChild)return breakOutOfList$$module$html$mutation(d,b);var c=splitToBreakingContainer$$module$html$mutation(a),e=Boundaries$$module$html$mutation.nodeAfter(c),f=e?Dom$$module$html$mutation.nodeAndNextSiblings(e):
[],d=Boundaries$$module$html$mutation.container(c);e&&isBreakingContainer$$module$html$mutation(e)?c=insertBreakAtBoundary$$module$html$mutation(c,b):Dom$$module$html$mutation.isEditingHost(d)?(c=insertBreakAtBoundary$$module$html$mutation(c,b),e=Boundaries$$module$html$mutation.container(c),f=Dom$$module$html$mutation.move(f,e,isBreakingContainer$$module$html$mutation),Dom$$module$html$mutation.moveAfter(f,e)):c=Mutation$$module$html$mutation.splitBoundaryUntil(c,function(a){return Boundaries$$module$html$mutation.container(a)===
d.parentNode});f=Boundaries$$module$html$mutation.prevWhile(c,function(a){var b=Boundaries$$module$html$mutation.prevNode(a);return!(Boundaries$$module$html$mutation.isAtStart(a)||Elements$$module$html$mutation.isVoidType(b)||Dom$$module$html$mutation.isTextNode(b))});c=Boundaries$$module$html$mutation.nextWhile(c,function(a){var b=Boundaries$$module$html$mutation.nextNode(a);return!(Boundaries$$module$html$mutation.isAtEnd(a)||Elements$$module$html$mutation.isVoidType(b)||Dom$$module$html$mutation.isTextNode(b))});
c=[f,c];c=removeInvisibleContainers$$module$html$mutation(c[0],c);c=removeInvisibleContainers$$module$html$mutation(c[1],c);d=Boundaries$$module$html$mutation.container(c[1]);!d.firstChild&&Predicates$$module$html$mutation.isHeading(d)&&(c=Mutation$$module$html$mutation.replaceShallowPreservingBoundaries(d,d.ownerDocument.createElement(b),c));f=c[0];c=c[1];prop$$module$html$mutation(Boundaries$$module$html$mutation.container(f));prop$$module$html$mutation(Boundaries$$module$html$mutation.container(c));
return(f=(f=Boundaries$$module$html$mutation.nodeAfter(c))&&Dom$$module$html$mutation.nextWhile(f,function(a){return!isRenderedBr$$module$html$mutation(a)&&Elements$$module$html$mutation.isUnrendered(a)}))&&isBreakingContainer$$module$html$mutation(f)?Mutation$$module$html$mutation.insertNodeAtBoundary(f.ownerDocument.createElement("br"),c):c}
var module$html$mutation={prop:prop$$module$html$mutation,removeBreak:removeBreak$$module$html$mutation,insertBreak:insertBreak$$module$html$mutation,insertLineBreak:insertLineBreak$$module$html$mutation,nextLineBreak:nextLineBreak$$module$html$mutation,isRenderedBr:isRenderedBr$$module$html$mutation,isVisuallyAdjacent:isVisuallyAdjacent$$module$html$mutation,unwrapListItem:unwrapListItem$$module$html$mutation,separateListItem:separateListItem$$module$html$mutation};var Styles$$module$html=module$html$styles,Elements$$module$html=module$html$elements,Mutation$$module$html=module$html$mutation,Traversing$$module$html=module$html$traversing,Predicates$$module$html=module$html$predicates,__hack__$$module$html=module$browsers,module$html={isRendered:Elements$$module$html.isRendered,isUnrendered:Elements$$module$html.isUnrendered,isUnrenderedWhitespace:Elements$$module$html.isUnrenderedWhitespace,parse:Elements$$module$html.parse,isVoidType:Elements$$module$html.isVoidType,
isStyleInherited:Styles$$module$html.isStyleInherited,isWhiteSpacePreserveStyle:Styles$$module$html.isWhiteSpacePreserveStyle,hasBlockStyle:Styles$$module$html.hasBlockStyle,hasInlineStyle:Styles$$module$html.hasInlineStyle,hasLinebreakingStyle:Styles$$module$html.hasLinebreakingStyle,prop:Mutation$$module$html.prop,insertBreak:Mutation$$module$html.insertBreak,removeBreak:Mutation$$module$html.removeBreak,insertLineBreak:Mutation$$module$html.insertLineBreak,prev:Traversing$$module$html.prev,next:Traversing$$module$html.next,
prevNode:Traversing$$module$html.prevNode,nextNode:Traversing$$module$html.nextNode,prevSignificantOffset:Traversing$$module$html.prevSignificantOffset,nextSignificantOffset:Traversing$$module$html.nextSignificantOffset,prevSignificantBoundary:Traversing$$module$html.prevSignificantBoundary,nextSignificantBoundary:Traversing$$module$html.nextSignificantBoundary,isAtStart:Traversing$$module$html.isAtStart,isAtEnd:Traversing$$module$html.isAtEnd,isBoundariesEqual:Traversing$$module$html.isBoundariesEqual,
isBlockNode:Predicates$$module$html.isBlockNode,isGroupContainer:Predicates$$module$html.isGroupContainer,isGroupedElement:Predicates$$module$html.isGroupedElement,isHeading:Predicates$$module$html.isHeading,isInlineNode:Predicates$$module$html.isInlineNode,isListContainer:Predicates$$module$html.isListContainer,isListItem:Predicates$$module$html.isListItem,isTableContainer:Predicates$$module$html.isTableContainer,isTextLevelSemanticNode:Predicates$$module$html.isTextLevelSemanticNode,isVoidNode:Predicates$$module$html.isVoidNode,
__:{isRenderedBr:Mutation$$module$html.isRenderedBr,nextLineBreak:Mutation$$module$html.nextLineBreak,isVisuallyAdjacent:Mutation$$module$html.isVisuallyAdjacent}};var Dom$$module$links$link_util=module$dom,Html$$module$links$link_util=module$html,Boundaries$$module$links$link_util=module$boundaries;function isAnchorNode$$module$links$link_util(a){return"A"===a.nodeName}function isLinkable$$module$links$link_util(a){return!Html$$module$links$link_util.isGroupContainer(a)&&!Html$$module$links$link_util.isGroupedElement(a)}
function nearestAnchorParent$$module$links$link_util(a){a=Dom$$module$links$link_util.upWhile(a,function(a){return!isAnchorNode$$module$links$link_util(a)&&isLinkable$$module$links$link_util(a)&&!Dom$$module$links$link_util.isEditingHost(a)});return isAnchorNode$$module$links$link_util(a)?a:null}function nextRenderedNode$$module$links$link_util(a){return Dom$$module$links$link_util.nextWhile(a,Html$$module$links$link_util.isUnrendered)}
function prevRenderedNode$$module$links$link_util(a){return Dom$$module$links$link_util.prevWhile(a,Html$$module$links$link_util.isUnrendered)}
function linkableBoundary$$module$links$link_util(a){var b=Boundaries$$module$links$link_util.container(a),c=Boundaries$$module$links$link_util.offset(a);Boundaries$$module$links$link_util.isNodeBoundary(a)&&(b=b.childNodes[c],c=0);a=nextRenderedNode$$module$links$link_util(b);return Boundaries$$module$links$link_util.create(nearestAnchorParent$$module$links$link_util(a)||a,c)}
var module$links$link_util={isLinkable:isLinkable$$module$links$link_util,linkableBoundary:linkableBoundary$$module$links$link_util,nextRenderedNode:nextRenderedNode$$module$links$link_util,prevRenderedNode:prevRenderedNode$$module$links$link_util};var Dom$$module$links$link_selection=module$dom,Html$$module$links$link_selection=module$html,Arrays$$module$links$link_selection=module$arrays,Mutation$$module$links$link_selection=module$mutation,Boundaries$$module$links$link_selection=module$boundaries,LinkUtil$$module$links$link_selection=module$links$link_util;function cloneAndAppend$$module$links$link_selection(a,b){var c=Dom$$module$links$link_selection.cloneShallow(a);a.insertBefore(c,b);c.appendChild(b);return c}
function splitTextNode$$module$links$link_selection(a,b,c){if(isTextNodeSelectionAtEnd$$module$links$link_selection(a,b))return{after:a.nextSibling,before:a};if(isTextNodeSelectionAtStart$$module$links$link_selection(a,b))return{after:a,before:a.previousSibling};b=Mutation$$module$links$link_selection.splitTextNode(a,b);var d=b.nextSibling;if(d&&!d.nextSibling&&LinkUtil$$module$links$link_selection.isLinkable(d.parentNode)&&!Dom$$module$links$link_selection.isSameNode(a,c)){a=b.parentNode;do d=cloneAndAppend$$module$links$link_selection(a,
d),b=cloneAndAppend$$module$links$link_selection(a,b),Dom$$module$links$link_selection.removeShallow(a),a=b.parentNode;while(a&&!Dom$$module$links$link_selection.isSameNode(a,c)&&LinkUtil$$module$links$link_selection.isLinkable(a))}else if(!d){for(d=b;d.parentNode&&!d.nextSibling&&!Dom$$module$links$link_selection.isSameNode(d.parentNode,c);)d=d.parentNode;d=d.nextSibling}return{after:d,before:b}}
function splitElement$$module$links$link_selection(a,b,c){var d=Dom$$module$links$link_selection.cloneShallow(a);a.parentNode.insertBefore(d,c);d.appendChild(b);return d}
function firstNodeAndSplit$$module$links$link_selection(a,b){if(Html$$module$links$link_selection.hasBlockStyle(a.parentNode))return a;for(var c=a=a.parentNode,d=a.parentNode;d&&!Dom$$module$links$link_selection.isSameNode(d,b)&&LinkUtil$$module$links$link_selection.isLinkable(d);)c=splitElement$$module$links$link_selection(d,a,d.nextSibling),a=d,d=d.parentNode;return c}
function prevLinkableNode$$module$links$link_selection(a){for(;!LinkUtil$$module$links$link_selection.isLinkable(a);)a=a.lastChild;return a}
function endNodeAndSplit$$module$links$link_selection(a,b){for(var c=a=a.parentNode,d=a.parentNode;d&&!Dom$$module$links$link_selection.isSameNode(d,b)&&LinkUtil$$module$links$link_selection.isLinkable(d);)c=splitElement$$module$links$link_selection(d,a,d),a=d,d=d.parentNode;isRendered$$module$links$link_selection(c)||(d=LinkUtil$$module$links$link_selection.prevRenderedNode(c),Dom$$module$links$link_selection.remove(c),c=prevLinkableNode$$module$links$link_selection(d));return c}
function firstLinkableNode$$module$links$link_selection(a,b){var c=Boundaries$$module$links$link_selection.container(a),d=Boundaries$$module$links$link_selection.offset(a);return Dom$$module$links$link_selection.isTextNode(c)?splitTextNode$$module$links$link_selection(c,d,b).after:Dom$$module$links$link_selection.isSameNode(c.parentNode,b)||!LinkUtil$$module$links$link_selection.isLinkable(c.parentNode)?c:firstNodeAndSplit$$module$links$link_selection(c,b)}
function isTextNodeSelectionAtMiddle$$module$links$link_selection(a,b){return Dom$$module$links$link_selection.isTextNode(a)&&0<b}function isTextNodeSelectionAtStart$$module$links$link_selection(a,b){return Dom$$module$links$link_selection.isTextNode(a)&&0===b}function isTextNodeSelectionAtEnd$$module$links$link_selection(a,b){return Dom$$module$links$link_selection.isTextNode(a)&&a.length===b}
function lastLinkableNode$$module$links$link_selection(a,b){var c=Boundaries$$module$links$link_selection.container(a),d=Boundaries$$module$links$link_selection.offset(a);return isTextNodeSelectionAtMiddle$$module$links$link_selection(c,d)?splitTextNode$$module$links$link_selection(c,d,b).before:isTextNodeSelectionAtStart$$module$links$link_selection(c,d)&&c.previousSibling?prevLinkableNode$$module$links$link_selection(c.previousSibling):LinkUtil$$module$links$link_selection.isLinkable(c.parentNode)?
endNodeAndSplit$$module$links$link_selection(c,b):c}var LINE_BREAKING_NODES_TAGS$$module$links$link_selection="LI TD TR TBODY DD DT".split(" ");function isLineBreakingNode$$module$links$link_selection(a){return 0<=LINE_BREAKING_NODES_TAGS$$module$links$link_selection.indexOf(a.nodeName)}
function isWhitSpaceBetweenLineBreakingNodes$$module$links$link_selection(a){return!Dom$$module$links$link_selection.isTextNode(a)||0<a.textContent.trim().length?!1:a.previousElementSibling&&isLineBreakingNode$$module$links$link_selection(a.previousElementSibling)&&a.nextElementSibling&&isLineBreakingNode$$module$links$link_selection(a.nextElementSibling)||a.previousElementSibling&&isLineBreakingNode$$module$links$link_selection(a.previousElementSibling)&&!a.nextElementSibling||!a.previousElementSibling&&
a.nextElementSibling&&isLineBreakingNode$$module$links$link_selection(a.nextElementSibling)?!0:!1}function isRendered$$module$links$link_selection(a){return Html$$module$links$link_selection.isRendered(a)&&!isWhitSpaceBetweenLineBreakingNodes$$module$links$link_selection(a)}
function removeAnchorElement$$module$links$link_selection(a,b){if(!isRendered$$module$links$link_selection(a))return a;if("A"===a.nodeName){var c=a.firstChild;Dom$$module$links$link_selection.children(a).forEach(function(a){b.push(a)});Dom$$module$links$link_selection.removeShallow(a);a=c}else b.push(a);return a}function saveAndCreateLinkable$$module$links$link_selection(a,b){0<a.length&&b.push(a);return[]}
function nextLinkable$$module$links$link_selection(a){for(var b=!1;a&&!a.nextSibling&&a.parentNode;)a=a.parentNode,LinkUtil$$module$links$link_selection.isLinkable(a)||(b=!0);return{next:a,createLinkable:b}}
function linkableNodesBetween$$module$links$link_selection(a,b){for(var c=[],d=[];a&&!Dom$$module$links$link_selection.isSameNode(a,b);)if(LinkUtil$$module$links$link_selection.isLinkable(a)){a=removeAnchorElement$$module$links$link_selection(a,d);var e=nextLinkable$$module$links$link_selection(a);a=e.next.nextSibling;e.createLinkable&&(d=saveAndCreateLinkable$$module$links$link_selection(d,c))}else d=saveAndCreateLinkable$$module$links$link_selection(d,c),a=a.firstChild;LinkUtil$$module$links$link_selection.isLinkable(b)&&
removeAnchorElement$$module$links$link_selection(b,d);0<d.length&&c.push(d);return c}
function firstAndLastNode$$module$links$link_selection(a,b,c){var d=Boundaries$$module$links$link_selection.container(a),e=Boundaries$$module$links$link_selection.container(b),f=Boundaries$$module$links$link_selection.offset(a),g=Boundaries$$module$links$link_selection.offset(b),d=Dom$$module$links$link_selection.isTextNode(d)&&Dom$$module$links$link_selection.isSameNode(d,e);a=firstLinkableNode$$module$links$link_selection(a,c);d&&(b=Boundaries$$module$links$link_selection.raw(a,g-f),c=a);return{startNode:a,
endNode:lastLinkableNode$$module$links$link_selection(b,c)}}function rangeInSameTextNode$$module$links$link_selection(a,b){var c=Boundaries$$module$links$link_selection.container(a),d=Boundaries$$module$links$link_selection.container(b);return Dom$$module$links$link_selection.isTextNode(c)&&Dom$$module$links$link_selection.isSameNode(c,d)}
function isSelectionInWholeTextNode$$module$links$link_selection(a,b){var c=Boundaries$$module$links$link_selection.container(a),d=Boundaries$$module$links$link_selection.offset(a),e=Boundaries$$module$links$link_selection.offset(b);return rangeInSameTextNode$$module$links$link_selection(a,b)&&0===d&&c.length===e}
function collectLinkableNodeGroups$$module$links$link_selection(a,b){var c=LinkUtil$$module$links$link_selection.linkableBoundary(a),d=LinkUtil$$module$links$link_selection.linkableBoundary(b);if(isSelectionInWholeTextNode$$module$links$link_selection(c,d))return[[Boundaries$$module$links$link_selection.container(c)]];var e=firstAndLastNode$$module$links$link_selection(c,d,Boundaries$$module$links$link_selection.commonContainer(a,b));return rangeInSameTextNode$$module$links$link_selection(c,d)?[[e.endNode]]:
linkableNodesBetween$$module$links$link_selection(e.startNode,e.endNode)}function collectGroups$$module$links$link_selection(a,b){}
function collectLinkable$$module$links$link_selection(a,b){var c=Mutation$$module$links$link_selection.splitBoundaryUntil(a,Boundaries$$module$links$link_selection.isNodeBoundary),d=Mutation$$module$links$link_selection.splitBoundaryUntil(b,Boundaries$$module$links$link_selection.isNodeBoundary),e=Boundaries$$module$links$link_selection.nextNode(c),f=Boundaries$$module$links$link_selection.prevNode(d),e=collectGroups$$module$links$link_selection(e,f);console.log(e);return[c,d]}
window.collectLinkable=collectLinkable$$module$links$link_selection;var module$links$link_selection={collectLinkableNodeGroups:collectLinkableNodeGroups$$module$links$link_selection};var Fn$$module$lists=module$functions,Dom$$module$lists=module$dom,Html$$module$lists=module$html,Arrays$$module$lists=module$arrays,Assert$$module$lists=module$assert,Content$$module$lists=module$content,Mutation$$module$lists=module$mutation,Boundaries$$module$lists=module$boundaries;function hasInlineStyle$$module$lists(a){return!Html$$module$lists.hasLinebreakingStyle(a)&&!(a.parentNode&&Dom$$module$lists.isEditingHost(a.parentNode))}
function reduceGroup$$module$lists(a,b){a=a.concat();var c=b.filter(Html$$module$lists.isRendered);if(0<c.length){var d=c[0].ownerDocument.createElement("li");Dom$$module$lists.move(c,d);a.push(d)}return a}
function removeInvisibleNodes$$module$lists(a){var b=[];Dom$$module$lists.climbUntil(a,function(a){b=Mutation$$module$lists.removeNode(a,b)},function(a){return Html$$module$lists.isListItem(a)&&0===Dom$$module$lists.children(a).length?!1:!a.parentNode||Dom$$module$lists.isEditingHost(a)||Html$$module$lists.isRendered(a)})}function isCollectLimit$$module$lists(a){return!Html$$module$lists.isListItem(a)&&Html$$module$lists.hasLinebreakingStyle(a)}
function collectSiblings$$module$lists(a,b){var c=Dom$$module$lists.prevSiblings(a,isCollectLimit$$module$lists).concat(a);a!==b&&(c=c.concat(Dom$$module$lists.nextSiblings(a,function(a){return a===b}),b));return c.concat(Dom$$module$lists.nextSiblings(b,isCollectLimit$$module$lists))}
function groupNodes$$module$lists(a){var b=[],c=[];a=a.concat();for(var d,e;0<a.length;)e=a.shift(),d=!Html$$module$lists.isGroupContainer(e)&&!Html$$module$lists.isVoidType(e)&&!Html$$module$lists.isHeading(e),Html$$module$lists.hasLinebreakingStyle(e)&&d?(d=Dom$$module$lists.children(e),c.push(e)):(d=[e],c.push(e.parentNode)),a=Arrays$$module$lists.split(a,Html$$module$lists.hasLinebreakingStyle),d=d.concat(a[0]),a=a[1],0<d.length&&b.push(d);return{groups:b,parents:c}}
function build$$module$lists(a,b){console.warn(b);if(0!==b.length){var c=Dom$$module$lists.upWhile(b[0],hasInlineStyle$$module$lists);Html$$module$lists.isListItem(c)&&!Dom$$module$lists.prevSibling(c)&&(c=c.parentNode);Assert$$module$lists.assert(Content$$module$lists.allowsNesting(c.parentNode.nodeName,a),"Lists.format#Cannot create "+a+" inside of a "+c.parentNode.nodeName);var d=c.ownerDocument.createElement(a),e=groupNodes$$module$lists(b);Dom$$module$lists.insert(d,c);Dom$$module$lists.move(e.groups.reduce(reduceGroup$$module$lists,
[]),d);e.parents.forEach(removeInvisibleNodes$$module$lists)}}
function format$$module$lists(a,b,c){Assert$$module$lists.assert(Html$$module$lists.isListContainer({nodeName:a.toUpperCase()}),"Lists.format#"+a+" is not a valid list container");var d;if(Html$$module$lists.isBoundariesEqual(b,c))return d=Dom$$module$lists.upWhile(Boundaries$$module$lists.nextNode(b),function(a){return!Html$$module$lists.hasLinebreakingStyle(a)&&!Dom$$module$lists.isEditingHost(a.parentNode)}),build$$module$lists(a,collectSiblings$$module$lists(d,d)),[b,c];d=Boundaries$$module$lists.commonContainer(b,
c);if(!Html$$module$lists.hasLinebreakingStyle(d))return d=Dom$$module$lists.upWhile(d,function(a){return a.parentNode&&!isCollectLimit$$module$lists(a.parentNode)&&!Dom$$module$lists.isEditingHost(a.parentNode)}),build$$module$lists(a,collectSiblings$$module$lists(d,d)),[b,c];d=Dom$$module$lists.upWhile(Boundaries$$module$lists.nextNode(b),function(a){return!isCollectLimit$$module$lists(a)&&!Dom$$module$lists.isEditingHost(a.parentNode)});var e=Dom$$module$lists.upWhile(Boundaries$$module$lists.prevNode(c),
function(a){return!isCollectLimit$$module$lists(a.parentNode)&&!Dom$$module$lists.isEditingHost(a.parentNode)});build$$module$lists(a,collectSiblings$$module$lists(d,e));return[b,c]}function unwrapItems$$module$lists(a){return a.filter(Html$$module$lists.isListItem).reduce(function(a,c){return a.concat(Html$$module$lists.unwrapListItem(c))},[])}
function unformat$$module$lists(a,b){var c=function(a){return!Html$$module$lists.isListItem(a)&&!Dom$$module$lists.isEditingHost(a.parentNode)},d=Boundaries$$module$lists.container(a),e=Boundaries$$module$lists.offset(a),f=Boundaries$$module$lists.container(b),g=Boundaries$$module$lists.offset(b),h=Dom$$module$lists.upWhile(d,c),c=Dom$$module$lists.upWhile(f,c);Html$$module$lists.isListItem(h)&&(h=unwrapItems$$module$lists(Dom$$module$lists.nodeAndNextSiblings(h)),Html$$module$lists.isListItem(d)&&
(d=h[0],e=0));if(d===f)return[Boundaries$$module$lists.create(d,e),b];Html$$module$lists.isListItem(c)&&(h=unwrapItems$$module$lists(Dom$$module$lists.nodeAndNextSiblings(c)),Html$$module$lists.isListItem(f)&&(f=h[0],g=0));return[Boundaries$$module$lists.create(d,e),Boundaries$$module$lists.create(f,g)]}
function toggle$$module$lists(a,b,c){var d=Boundaries$$module$lists.container(b),e=Boundaries$$module$lists.container(c),d=Dom$$module$lists.upWhile(d,Html$$module$lists.isListItem),e=Dom$$module$lists.upWhile(e,Html$$module$lists.isListItem);return Html$$module$lists.isListItem(d)&&Html$$module$lists.isListItem(e)&&d.parentNode===e.parentNode&&d.parentNode.nodeName.toLowerCase()===a?unformat$$module$lists(b,c):format$$module$lists(a,b,c)}
var module$lists={format:format$$module$lists,unformat:unformat$$module$lists,toggle:toggle$$module$lists};var Dom$$module$paths=module$dom,Arrays$$module$paths=module$arrays,Boundaries$$module$paths=module$boundaries;function fromBoundary$$module$paths(a,b){var c=Boundaries$$module$paths.offset(b),d=Boundaries$$module$paths.container(b);if(d===a)return[c];c=Dom$$module$paths.childAndParentsUntilNode(d,a).reduce(function(a,b){return a.concat(Dom$$module$paths.nodeIndex(b))},[c]);c.reverse();return c}
function toBoundary$$module$paths(a,b){var c=b.slice(0,-1).reduce(function(a,b){return a.childNodes[b]||a},a);return Boundaries$$module$paths.raw(c,Arrays$$module$paths.last(b)||0)}var module$paths={toBoundary:toBoundary$$module$paths,fromBoundary:fromBoundary$$module$paths};var Fn$$module$selection_change=module$functions,Arrays$$module$selection_change=module$arrays,Boundaries$$module$selection_change=module$boundaries,Browsers$$module$selection_change=module$browsers,Events$$module$selection_change=module$events;function maybeNextTick$$module$selection_change(a,b){var c=a.type;Browsers$$module$selection_change.mozilla&&"mouseup"===c&&Events$$module$selection_change.nextTick(Fn$$module$selection_change.partial(b,a))}
function handler$$module$selection_change(a,b,c){function d(e){var f=a();f&&!Arrays$$module$selection_change.equal(b,f,Boundaries$$module$selection_change.equals)?(b=f,c(f,e)):maybeNextTick$$module$selection_change(e,d)}return d}
function addHandler$$module$selection_change(a,b,c){Events$$module$selection_change.add(a,"selectionchange",b,!0);Events$$module$selection_change.add(a,"keyup",b,!0);Events$$module$selection_change.add(a,"mouseup",b,!0);Events$$module$selection_change.add(a,"touchend",b,!0);Events$$module$selection_change.add(a,"keypress",b,!0);Browsers$$module$selection_change.webkit||Browsers$$module$selection_change.msie||!c||Events$$module$selection_change.add(a,"mousemove",b,!0)}
function removeHandler$$module$selection_change(a,b,c){Events$$module$selection_change.remove(a,"selectionchange",b,!0);Events$$module$selection_change.remove(a,"keyup",b,!0);Events$$module$selection_change.remove(a,"mouseup",b,!0);Events$$module$selection_change.remove(a,"touchend",b,!0);Events$$module$selection_change.remove(a,"keypress",b,!0);Browsers$$module$selection_change.webkit||Browsers$$module$selection_change.msie||!c||Events$$module$selection_change.remove(a,"mousemove",b,!0)}
var module$selection_change={handler:handler$$module$selection_change,addHandler:addHandler$$module$selection_change,removeHandler:removeHandler$$module$selection_change};var Dom$$module$stable_range=module$dom,Arrays$$module$stable_range=module$arrays,Fn$$module$stable_range=module$functions;function StableRange$$module$stable_range(a){if(!(this instanceof StableRange$$module$stable_range))return new StableRange$$module$stable_range(a);a=a||{};this.startContainer=a.startContainer;this.startOffset=a.startOffset;this.endContainer=a.endContainer;this.endOffset=a.endOffset;this.commonAncestorContainer=a.commonAncestorContainer;this.collapsed=a.collapsed}
function commonAncestorContainer$$module$stable_range(a,b){var c=a,d;for(d=0;4>d;d++)c=c.parentNode||c;d=Dom$$module$stable_range.childAndParentsUntilInclNode(a,c);var e=Dom$$module$stable_range.childAndParentsUntilInclNode(b,c);c!==Arrays$$module$stable_range.last(e)&&(d=Dom$$module$stable_range.childAndParentsUntil(a,Fn$$module$stable_range.returnFalse),e=Dom$$module$stable_range.childAndParentsUntil(b,Fn$$module$stable_range.returnFalse));return Arrays$$module$stable_range.intersect(d,e)[0]}
StableRange$$module$stable_range.prototype.update=function(){var a=this.startContainer,b=this.endContainer,c=this.startOffset,d=this.endOffset;a&&b&&(this.collapsed=a===b&&c===d,this.commonAncestorContainer=commonAncestorContainer$$module$stable_range(a,b))};StableRange$$module$stable_range.prototype.setStart=function(a,b){this.startContainer=a;this.startOffset=b;this.update()};StableRange$$module$stable_range.prototype.setEnd=function(a,b){this.endContainer=a;this.endOffset=b;this.update()};
var module$stable_range=StableRange$$module$stable_range;var Dom$$module$transform$ms_word$lists=module$dom,Misc$$module$transform$ms_word$lists=module$misc,Arrays$$module$transform$ms_word$lists=module$arrays,Fn$$module$transform$ms_word$lists=module$functions,LIST_NUMBERS$$module$transform$ms_word$lists=/^\s*((?:[0-9]{1,3}|[a-zA-Z]{1,5})+[\.\)])+\s*$/,LIST_IGNORE_STYLE$$module$transform$ms_word$lists=/mso-list:\s*Ignore/i,MSO_LIST_LEVEL$$module$transform$ms_word$lists=/mso-list:.*?level(\d+)/i;
function extractNumber$$module$transform$ms_word$lists(a){if(!a.firstChild)return null;a=LIST_NUMBERS$$module$transform$ms_word$lists.exec(Dom$$module$transform$ms_word$lists.text(a.firstChild));return a?(a=/(\w+)/i.exec(a[0]))?a[1]:null:null}function getNumbering$$module$transform$ms_word$lists(a){a=extractNumber$$module$transform$ms_word$lists(a);if(!a)return{};var b;/\d+/.test(a)?(b=a,a="1"):a=/i/i.test(a)?/I/.test(a)?"I":"i":/[A-Z]/.test(a)?"A":"a";return{start:b,type:a}}
function isOrderedList$$module$transform$ms_word$lists(a){if(!a.firstChild)return!1;var b=Dom$$module$transform$ms_word$lists.getStyle(a.firstChild,"fontFamily");return"Wingdings"===b||"Symbol"===b?!1:null!==extractNumber$$module$transform$ms_word$lists(a)}
function isIgnorableSpan$$module$transform$ms_word$lists(a){return"SPAN"===a.nodeName&&LIST_IGNORE_STYLE$$module$transform$ms_word$lists.test(Dom$$module$transform$ms_word$lists.getAttr(a,"style"))?!0:!Dom$$module$transform$ms_word$lists.isTextNode(a)&&isIgnorableSpan$$module$transform$ms_word$lists(a.firstChild)}
function isListParagraph$$module$transform$ms_word$lists(a){return"P"!==a.nodeName?!1:Dom$$module$transform$ms_word$lists.hasClass(a,"MsoListParagraph")||Dom$$module$transform$ms_word$lists.hasClass(a,"MsoListParagraphCxSpFirst")||Dom$$module$transform$ms_word$lists.hasClass(a,"MsoListParagraphCxSpMiddle")||Dom$$module$transform$ms_word$lists.hasClass(a,"MsoListParagraphCxSpLast")}
function isFirstListParagraph$$module$transform$ms_word$lists(a){return"P"===a.nodeName&&Dom$$module$transform$ms_word$lists.hasClass(a,"MsoListParagraphCxSpFirst")}function isSingleListParagraph$$module$transform$ms_word$lists(a){return"P"===a.nodeName&&Dom$$module$transform$ms_word$lists.hasClass(a,"MsoListParagraph")}function isLastListParagraph$$module$transform$ms_word$lists(a){return"P"===a.nodeName&&Dom$$module$transform$ms_word$lists.hasClass(a,"MsoListParagraphCxSpLast")}
function isStartOfListItem$$module$transform$ms_word$lists(a){return a.firstChild?isIgnorableSpan$$module$transform$ms_word$lists(a.firstChild):!1}
function createContainer$$module$transform$ms_word$lists(a){var b=isOrderedList$$module$transform$ms_word$lists(a)?"ol":"ul",c=a.ownerDocument.createElement(b);if("ul"===b)return c;a=getNumbering$$module$transform$ms_word$lists(a);Misc$$module$transform$ms_word$lists.defined(a.start)&&Dom$$module$transform$ms_word$lists.setAttr(c,"start",a.start);Misc$$module$transform$ms_word$lists.defined(a.type)&&Dom$$module$transform$ms_word$lists.setAttr(c,"type",a.type);return c}
function extractLevel$$module$transform$ms_word$lists(a){return(a=MSO_LIST_LEVEL$$module$transform$ms_word$lists.exec(Dom$$module$transform$ms_word$lists.getAttr(a,"style")))&&a[1]?parseInt(a[1],10):1}
function constructList$$module$transform$ms_word$lists(a,b){var c=createContainer$$module$transform$ms_word$lists(a.node),d=a.items.reduce(function(c,d){var g=d.reduce(function(a,c){return a.concat(c[b]?constructList$$module$transform$ms_word$lists(c,b):c)},[]),h=a.node.ownerDocument.createElement("li");Dom$$module$transform$ms_word$lists.copy(g,h);return c.concat(h)},[]);Dom$$module$transform$ms_word$lists.move(d,c);return c}
function createList$$module$transform$ms_word$lists(a,b){var c,d,e,f,g,h,k,l="_aloha"+(new Date).getTime();for(c=0;c<a.length;c++){f=b(a[c]);k=extractLevel$$module$transform$ms_word$lists(f);g||(h=g={parent:null,level:1,node:f,items:[]},g[l]=!0);if(k>g.level)for(d=g.level;d<k;d++)g={parent:g,level:d+1,node:f,items:[]},g[l]=!0,e=Arrays$$module$transform$ms_word$lists.last(g.parent.items),e||(e=[],g.parent.items.push(e)),e.push(g);if(k<g.level)for(d=k,e=g.level;d<e&&g.parent;d++)g=g.parent;isListParagraph$$module$transform$ms_word$lists(f)&&
isStartOfListItem$$module$transform$ms_word$lists(f)?g.items.push(Dom$$module$transform$ms_word$lists.children(f).filter(Fn$$module$transform$ms_word$lists.complement(isIgnorableSpan$$module$transform$ms_word$lists))):(e=Arrays$$module$transform$ms_word$lists.last(g.items),e||(e=[],g.items.push(e)),e.push(f))}return h&&constructList$$module$transform$ms_word$lists(h,l)}
function transform$$module$transform$ms_word$lists(a){var b=Dom$$module$transform$ms_word$lists.children(a),c=[],d,e=b.length,f,g;for(d=0;d<e;d++)if(g=b[d],isSingleListParagraph$$module$transform$ms_word$lists(g))c.push(createList$$module$transform$ms_word$lists([g],transform$$module$transform$ms_word$lists));else if(isFirstListParagraph$$module$transform$ms_word$lists(g)){if(g=Dom$$module$transform$ms_word$lists.nodeAndNextSiblings(g,isLastListParagraph$$module$transform$ms_word$lists),(f=Arrays$$module$transform$ms_word$lists.last(g).nextSibling)&&
g.push(f),f=createList$$module$transform$ms_word$lists(g,transform$$module$transform$ms_word$lists))c.push(f),d+=g.length-1}else c.push(transform$$module$transform$ms_word$lists(g));a=Dom$$module$transform$ms_word$lists.clone(a,!1);Dom$$module$transform$ms_word$lists.move(c,a);return a}var module$transform$ms_word$lists={transform:transform$$module$transform$ms_word$lists};var Dom$$module$transform$ms_word$tables=module$dom;function createTableHeadings$$module$transform$ms_word$tables(a){var b=[];a.forEach(function(a){if("TD"===a.nodeName){var d=Dom$$module$transform$ms_word$tables.children(a);a=a.ownerDocument.createElement("th");Dom$$module$transform$ms_word$tables.copy(d,a)}return b.push(a)});return b}var HEADER_ROW_INDEX$$module$transform$ms_word$tables=/mso-yfti-irow:\-1;/;
function isTableHeading$$module$transform$ms_word$tables(a){return"TR"===a.nodeName&&HEADER_ROW_INDEX$$module$transform$ms_word$tables.test(Dom$$module$transform$ms_word$tables.getAttr(a,"style"))}
function transform$$module$transform$ms_word$tables(a){var b=Dom$$module$transform$ms_word$tables.children(a),c=[],d,e,f;for(f=0;f<b.length;f++)d=transform$$module$transform$ms_word$tables(b[f]),isTableHeading$$module$transform$ms_word$tables(d)&&(d=Dom$$module$transform$ms_word$tables.clone(d),e=Dom$$module$transform$ms_word$tables.children(d),e.forEach(Dom$$module$transform$ms_word$tables.remove),Dom$$module$transform$ms_word$tables.move(createTableHeadings$$module$transform$ms_word$tables(e),d)),
c.push(d);a=Dom$$module$transform$ms_word$tables.clone(a,!1);Dom$$module$transform$ms_word$tables.move(c,a);return a}var module$transform$ms_word$tables={transform:transform$$module$transform$ms_word$tables};function transform$$module$transform$plain(a){return a.split(/\n/).reduce(function(a,c){return a.concat("<p>",c.trim()||"<br>","</p>")},[]).join("")}var module$transform$plain={transform:transform$$module$transform$plain};var Dom$$module$transform$utils=module$dom,Fn$$module$transform$utils=module$functions,Html$$module$transform$utils=module$html,Arrays$$module$transform$utils=module$arrays,Content$$module$transform$utils=module$content,DEFAULT_BLOCK_ELEMENT$$module$transform$utils="p",blacklist$$module$transform$utils=Content$$module$transform$utils.NODES_BLACKLIST.reduce(function(a,b){a[b]=!0;return a},{});function isBlacklisted$$module$transform$utils(a){return blacklist$$module$transform$utils[a.nodeName]}
function wrapSublists$$module$transform$utils(a,b,c){var d=[],e,f=a.length,g;for(g=0;g<f;g++){for(e=[];g<f&&b(a[g]);)e.push(a[g]),g++;0<e.length&&(d.push(e[0].ownerDocument.createElement(c)),Dom$$module$transform$utils.move(e,Arrays$$module$transform$utils.last(d)));g<f&&d.push(a[g])}return d}function isRendered$$module$transform$utils(a){return Html$$module$transform$utils.isRendered(a)?!Dom$$module$transform$utils.isElementNode(a)||"none"!==Dom$$module$transform$utils.getStyle(a,"display"):!1}
function cleanNodes$$module$transform$utils(a,b,c){return a.filter(Fn$$module$transform$utils.complement(isBlacklisted$$module$transform$utils)).filter(isRendered$$module$transform$utils).reduce(function(a,e){b(e).forEach(function(e){a=a.concat(c(e,b))});return a},[])}
function removeRedundantNesting$$module$transform$utils(a){return a.reduce(function(a,c){var d=Dom$$module$transform$utils.children(c);1===d.length&&Html$$module$transform$utils.hasLinebreakingStyle(d[0])&&(Html$$module$transform$utils.isGroupedElement(c)?Html$$module$transform$utils.isGroupContainer(d[0])||Dom$$module$transform$utils.removeShallow(d[0]):!Html$$module$transform$utils.isGroupContainer(c)&&Html$$module$transform$utils.hasLinebreakingStyle(c)&&(c=d[0]));d=Dom$$module$transform$utils.cloneShallow(c);
Dom$$module$transform$utils.move(removeRedundantNesting$$module$transform$utils(Dom$$module$transform$utils.children(c)),d);return a.concat(d)},[])}
function cleanNode$$module$transform$utils(a,b){return b(a).reduce(function(a,d){var e=cleanNodes$$module$transform$utils(Dom$$module$transform$utils.children(d),b,cleanNode$$module$transform$utils);"DIV"===d.nodeName&&(e=wrapSublists$$module$transform$utils(e,Html$$module$transform$utils.isInlineNode,DEFAULT_BLOCK_ELEMENT$$module$transform$utils));var f=Dom$$module$transform$utils.cloneShallow(d);Dom$$module$transform$utils.move(removeRedundantNesting$$module$transform$utils(e),f);return a.concat(f)},
[])}function rewrap$$module$transform$utils(a,b){var c=a.ownerDocument.createElement(b);Dom$$module$transform$utils.move(Dom$$module$transform$utils.children(Dom$$module$transform$utils.clone(a)),c);return c}function normalize$$module$transform$utils(a,b){var c=a.ownerDocument.createDocumentFragment();Dom$$module$transform$utils.move(cleanNode$$module$transform$utils(a,b),c);return c}
function extract$$module$transform$utils(a){a=a.replace(/\n/g," ");a=a.replace(/<iframe.*?<\/iframe>/g,"");var b=/<body.*?>/i.exec(a),c=/<\/body.*?>/i.exec(a);return b&&c?(b=a.indexOf(b[0])+b[0].length,c=a.indexOf(c[0]),a.slice(b,c)):a}var module$transform$utils={normalize:normalize$$module$transform$utils,extract:extract$$module$transform$utils,rewrap:rewrap$$module$transform$utils};var Dom$$module$transform$html=module$dom,Arrays$$module$transform$html=module$arrays,Maps$$module$transform$html=module$maps,Fn$$module$transform$html=module$functions,Html$$module$transform$html=module$html,Content$$module$transform$html=module$content,Utils$$module$transform$html=module$transform$utils,FONT_SIZES$$module$transform$html={1:"0.63em",2:"0.82em",3:"1em",4:"1.13em",5:"1.5em",6:"2em",7:"3em"};
function normalizeFont$$module$transform$html(a){var b=Dom$$module$transform$html.children(a),c=Dom$$module$transform$html.getStyle(a,"color")||Dom$$module$transform$html.getAttr(a,"color"),d=Dom$$module$transform$html.getStyle(a,"font-size")||FONT_SIZES$$module$transform$html[Dom$$module$transform$html.getAttr(a,"size")],e=Dom$$module$transform$html.getStyle(a,"font-family")||Dom$$module$transform$html.getAttr(a,"face");1===b.length&&Dom$$module$transform$html.isElementNode(b[0])?a=b[0]:(a=a.ownerDocument.createElement("span"),
Dom$$module$transform$html.move(b,a));c&&Dom$$module$transform$html.setStyle(a,"color",c);d&&Dom$$module$transform$html.setStyle(a,"font-size",d);e&&Dom$$module$transform$html.setStyle(a,"font-family",e);return a}function normalizeCenter$$module$transform$html(a){return a}
function normalizeImage$$module$transform$html(a){var b=Dom$$module$transform$html.getAttr(a,"width"),c=Dom$$module$transform$html.getAttr(a,"height");b&&Dom$$module$transform$html.setStyle(a,"width",b);c&&Dom$$module$transform$html.setStyle(a,"height",c);return a}
function normalizeAttributes$$module$transform$html(a){var b=(Content$$module$transform$html.ATTRIBUTES_WHITELIST["*"]||[]).concat(Content$$module$transform$html.ATTRIBUTES_WHITELIST[a.nodeName]||[]),c=Maps$$module$transform$html.keys(Dom$$module$transform$html.attrs(a)),b=Arrays$$module$transform$html.intersect(b,c);Arrays$$module$transform$html.difference(c,b).forEach(Fn$$module$transform$html.partial(Dom$$module$transform$html.removeAttr,a))}
function normalizeStyles$$module$transform$html(a){var b=(Content$$module$transform$html.STYLES_WHITELIST["*"]||[]).concat(Content$$module$transform$html.STYLES_WHITELIST[a.nodeName]||[]);Arrays$$module$transform$html.contains(b,"*")||(b=b.reduce(function(b,d){b[d]=Dom$$module$transform$html.getStyle(a,d);return b},{}),Dom$$module$transform$html.removeAttr(a,"style"),Maps$$module$transform$html.forEach(b,function(b,d){b&&Dom$$module$transform$html.setStyle(a,d,b)}))}
function normalizeSpan$$module$transform$html(a){if(Dom$$module$transform$html.hasAttrs(a))return a;var b=a.ownerDocument.createDocumentFragment();Dom$$module$transform$html.move(Dom$$module$transform$html.children(a),b);return b}
function clean$$module$transform$html(a){a=Dom$$module$transform$html.clone(a);if(Dom$$module$transform$html.isTextNode(a))return[a];switch(a.nodeName){case "IMG":a=normalizeImage$$module$transform$html(a);break;case "FONT":do a=normalizeFont$$module$transform$html(a);while("FONT"===a.nodeName);break;case "CENTER":a=normalizeCenter$$module$transform$html(a);break}if(Dom$$module$transform$html.isFragmentNode(a))return[a];normalizeAttributes$$module$transform$html(a);normalizeStyles$$module$transform$html(a);
"SPAN"===a.nodeName&&(a=normalizeSpan$$module$transform$html(a));var b=Dom$$module$transform$html.children(a),c;for(c=0;c<b.length;c++)if(!Content$$module$transform$html.allowsNesting(a.nodeName,b[c].nodeName))return b;return[a]}function transform$$module$transform$html(a,b){var c=Html$$module$transform$html.parse(Utils$$module$transform$html.extract(a),b),c=Utils$$module$transform$html.normalize(c,clean$$module$transform$html);return Dom$$module$transform$html.children(c)[0].innerHTML}
var module$transform$html={transform:transform$$module$transform$html};var Fn$$module$transform$ms_word$toc=module$functions,Dom$$module$transform$ms_word$toc=module$dom,Arrays$$module$transform$ms_word$toc=module$arrays,Utils$$module$transform$ms_word$toc=module$transform$utils,TOC_CLASS_NAME$$module$transform$ms_word$toc=/MsoToc(\d+)/;function extractLevel$$module$transform$ms_word$toc(a){return(a=TOC_CLASS_NAME$$module$transform$ms_word$toc.exec(Dom$$module$transform$ms_word$toc.getAttr(a,"class")))&&a[1]?parseInt(a[1],10):null}
function isTocHeading$$module$transform$ms_word$toc(a){return"P"===a.nodeName&&Dom$$module$transform$ms_word$toc.hasClass(a,"MsoTocHeading")}function isTocItem$$module$transform$ms_word$toc(a){return Dom$$module$transform$ms_word$toc.isElementNode(a)?(a=TOC_CLASS_NAME$$module$transform$ms_word$toc.exec(Dom$$module$transform$ms_word$toc.getAttr(a,"class")))?0<a.length:!1:!1}
function constructList$$module$transform$ms_word$toc(a,b){var c=a.node.ownerDocument.createElement("ul"),d=a.items.reduce(function(c,d){var g=d.reduce(function(a,c){return a.concat(c[b]?constructList$$module$transform$ms_word$toc(c,b):c)},[]),h=a.node.ownerDocument.createElement("li");Dom$$module$transform$ms_word$toc.copy(g,h);return c.concat(h)},[]);Dom$$module$transform$ms_word$toc.move(d,c);return c}
function createList$$module$transform$ms_word$toc(a,b){var c,d,e,f,g,h,k,l="_aloha"+(new Date).getTime();for(c=0;c<a.length;c++){f=b(a[c]);k=extractLevel$$module$transform$ms_word$toc(f);if(!g)h=g={parent:null,level:1,node:f,items:[]},g[l]=!0;else if(k>g.level)for(d=g.level;d<k;d++)g={parent:g,level:d+1,node:f,items:[]},g[l]=!0,e=Arrays$$module$transform$ms_word$toc.last(g.parent.items),e||(e=[],g.parent.items.push(e)),e.push(g);else if(k<g.level)for(d=k,e=g.level;d<e&&g.parent;d++)g=g.parent;g.items.push(Dom$$module$transform$ms_word$toc.children(f))}return h&&
constructList$$module$transform$ms_word$toc(h,l)}
function transform$$module$transform$ms_word$toc(a){var b=Fn$$module$transform$ms_word$toc.complement(isTocItem$$module$transform$ms_word$toc),c=Dom$$module$transform$ms_word$toc.children(a),d=[],e=c.length,f,g,h;for(f=0;f<e;f++)if(g=c[f],isTocHeading$$module$transform$ms_word$toc(g))d.push(Utils$$module$transform$ms_word$toc.rewrap(g,"h1"));else if(isTocItem$$module$transform$ms_word$toc(g)){if(h=Arrays$$module$transform$ms_word$toc.split(Dom$$module$transform$ms_word$toc.nodeAndNextSiblings(g),b)[0],
g=createList$$module$transform$ms_word$toc(h,transform$$module$transform$ms_word$toc))d.push(g),f+=h.length-1}else d.push(transform$$module$transform$ms_word$toc(g));a=Dom$$module$transform$ms_word$toc.clone(a,!1);Dom$$module$transform$ms_word$toc.move(d,a);return a}var module$transform$ms_word$toc={transform:transform$$module$transform$ms_word$toc};var Dom$$module$transform$ms_word=module$dom,Html$$module$transform$ms_word=module$html,Arrays$$module$transform$ms_word=module$arrays,Lists$$module$transform$ms_word=module$transform$ms_word$lists,Tables$$module$transform$ms_word=module$transform$ms_word$tables,Toc$$module$transform$ms_word=module$transform$ms_word$toc,Utils$$module$transform$ms_word=module$transform$utils,SUPERFLUOUS_TAG$$module$transform$ms_word=/xml|v\:\w+/i,NAMESPACED_NODENAME$$module$transform$ms_word=/o\:(\w+)/i;
function isSuperfluous$$module$transform$ms_word(a){return a.nodeType===Dom$$module$transform$ms_word.Nodes.COMMENT||SUPERFLUOUS_TAG$$module$transform$ms_word.test(a.nodeName)}function namespacedNodeName$$module$transform$ms_word(a){return(a=a.nodeName.match(NAMESPACED_NODENAME$$module$transform$ms_word))?a[1]:null}
function clean$$module$transform$ms_word(a){if(isSuperfluous$$module$transform$ms_word(a))return[];if(Dom$$module$transform$ms_word.isTextNode(a))return[Dom$$module$transform$ms_word.clone(a)];if(Dom$$module$transform$ms_word.hasClass(a,"MsoTitle"))return[Utils$$module$transform$ms_word.rewrap(a,"h1")];if(Dom$$module$transform$ms_word.hasClass(a,"MsoSubtitle"))return[Utils$$module$transform$ms_word.rewrap(a,"h2")];var b=namespacedNodeName$$module$transform$ms_word(a);return b?[Utils$$module$transform$ms_word.rewrap(a,
b)]:[Dom$$module$transform$ms_word.clone(a)]}function isMSWordContent$$module$transform$ms_word(a,b){return null!==Html$$module$transform$ms_word.parse(a,b).querySelector('[style*="mso-"],[class^="Mso"]')}
function transform$$module$transform$ms_word(a,b){var c=Html$$module$transform$ms_word.parse(Utils$$module$transform$ms_word.extract(a),b),c=Utils$$module$transform$ms_word.normalize(c,clean$$module$transform$ms_word)||c,c=Lists$$module$transform$ms_word.transform(c),c=Toc$$module$transform$ms_word.transform(c),c=Tables$$module$transform$ms_word.transform(c),c=Dom$$module$transform$ms_word.children(c);return 0===c.length?"":c[0].innerHTML}
var module$transform$ms_word={transform:transform$$module$transform$ms_word,isMSWordContent:isMSWordContent$$module$transform$ms_word};var Html$$module$transform=module$transform$html,Plain$$module$transform=module$transform$plain,MSWord$$module$transform=module$transform$ms_word,module$transform={html:Html$$module$transform.transform,plain:Plain$$module$transform.transform,msword:MSWord$$module$transform.transform};var Html$$module$traversing=module$html,Strings$$module$traversing=module$strings,Boundaries$$module$traversing=module$boundaries;function nextCharacter$$module$traversing(a){var b=Html$$module$traversing.next(a,"char");return b&&Boundaries$$module$traversing.isTextBoundary(b)?(a=Boundaries$$module$traversing.container(b),b=Boundaries$$module$traversing.offset(b),a.data.substr(b-1,1)):""}
function prev$$module$traversing(a,b){var c=Html$$module$traversing.prev(a,b);return"word"===b&&Strings$$module$traversing.WORD_BOUNDARY.test(nextCharacter$$module$traversing(c,"char"))?prev$$module$traversing(c,b):c}function next$$module$traversing(a,b){return"word"===b&&Strings$$module$traversing.WORD_BOUNDARY.test(nextCharacter$$module$traversing(a,"char"))?next$$module$traversing(Html$$module$traversing.next(a,"char"),b):Html$$module$traversing.next(a,b)}
var module$traversing={next:next$$module$traversing,prev:prev$$module$traversing};var Dom$$module$ranges=module$dom,Mutation$$module$ranges=module$mutation,Arrays$$module$ranges=module$arrays,StableRange$$module$ranges=module$stable_range,Html$$module$ranges=module$html,Traversing$$module$ranges=module$traversing,Fn$$module$ranges=module$functions,Cursors$$module$ranges=module$cursors,Boundaries$$module$ranges=module$boundaries,Paths$$module$ranges=module$paths,Maps$$module$ranges=module$maps;
function ensureBrStyleFix$$module$ranges(a){if(!a["!aloha-br-style-fix"]){var b=a.createElement("style"),c=a.createTextNode('.aloha-editable br,.aloha-editable br:after{content:"\\A";white-space:pre-line;}');Dom$$module$ranges.append(c,b);Dom$$module$ranges.append(b,a.head);a["!aloha-br-style-fix"]=!0}}function get$$module$ranges(a){a=a.getSelection();return 0<a.rangeCount?a.getRangeAt(0):null}
function create$$module$ranges(a,b,c,d){var e=a.ownerDocument.createRange();e.setStart(a,b||0);c?e.setEnd(c,d||0):e.setEnd(a,b||0);return e}function equals$$module$ranges(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset}
function fromPoint$$module$ranges(a,b,c){if(0>a||0>b)return null;if(c.caretRangeFromPoint)return c.caretRangeFromPoint(a,b);if(c.caretPositionFromPoint)return a=c.caretPositionFromPoint(a,b),create$$module$ranges(a.offsetNode,a.offset);if(c.elementFromPoint)throw"fromPoint() unimplemented for this browser";}
function parentBlock$$module$ranges(a){a=Dom$$module$ranges.isEditable(a)?Dom$$module$ranges.editingHost(a):a;a=Dom$$module$ranges.upWhile(a,function(a){return a.parentNode&&!Dom$$module$ranges.isEditable(a.parentNode)});return Dom$$module$ranges.Nodes.DOCUMENT===a.nodeType?null:a}
function fromPosition$$module$ranges(a,b,c){b=fromPoint$$module$ranges(a,b,c);if(!b)return null;if(Dom$$module$ranges.isEditableNode(b.commonAncestorContainer))return b;b=parentBlock$$module$ranges(b.commonAncestorContainer);if(!b||!b.parentNode)return null;c=c.body;var d=Dom$$module$ranges.offset(b),e=Dom$$module$ranges.nodeIndex(b);a+c.scrollLeft>d.left+c.scrollLeft+b.offsetWidth&&(e+=1);return create$$module$ranges(b.parentNode,e)}
function fromBoundaries$$module$ranges(a,b){return create$$module$ranges(Boundaries$$module$ranges.container(a),Boundaries$$module$ranges.offset(a),Boundaries$$module$ranges.container(b),Boundaries$$module$ranges.offset(b))}
function seekBoundaryPoint$$module$ranges(a,b,c,d,e,f,g,h){var k=Cursors$$module$ranges.cursorFromBoundaryPoint(b,c);if(h&&Dom$$module$ranges.isTextNode(b)&&0<c&&c<b.length&&k.next()){if(!g(k))return a;k.prev()}b=Cursors$$module$ranges.cursorFromBoundaryPoint(d,e);for(c=!1;!k.equals(b)&&g(k)&&(h?k.prev():k.next());)c=!0;c&&f(a,k);return a}
function trim$$module$ranges(a,b,c){b=b||Fn$$module$ranges.returnFalse;c=c||Fn$$module$ranges.returnFalse;if(a.collapsed)return a;var d=a.startContainer,e=a.startOffset,f=a.endContainer,g=a.endOffset;seekBoundaryPoint$$module$ranges(a,d,e,f,g,Cursors$$module$ranges.setRangeStart,b,!1);d=a.startContainer;e=a.startOffset;seekBoundaryPoint$$module$ranges(a,f,g,d,e,Cursors$$module$ranges.setRangeEnd,c,!0);return a}
function expandToWord$$module$ranges(a,b){return[Traversing$$module$ranges.prev(a,"word")||a,Traversing$$module$ranges.next(b,"word")||b]}
function expandToBlock$$module$ranges(a,b){var c=Boundaries$$module$ranges.commonContainer(a,b),c=Dom$$module$ranges.childAndParentsUntilIncl(c,function(a){return Html$$module$ranges.hasLinebreakingStyle(a)||Dom$$module$ranges.isEditingHost(a)}),d=Arrays$$module$ranges.last(c),e=Dom$$module$ranges.nodeLength(d),c=Boundaries$$module$ranges.create(d,0),d=Traversing$$module$ranges.next(Boundaries$$module$ranges.create(d,e));return[c,d]}
function expand$$module$ranges(a,b){var c=Boundaries$$module$ranges.fromRange(a);switch(b){case "word":c=expandToWord$$module$ranges(c[0],c[1]);break;case "block":c=expandToBlock$$module$ranges(c[0],c[1]);break;default:throw'"'+b+"\"? what's that?";}return fromBoundaries$$module$ranges(c[0],c[1])}
function envelopeInvisibleCharacters$$module$ranges(a){var b=Boundaries$$module$ranges.fromRangeEnd(a);if(Boundaries$$module$ranges.isTextBoundary(b)){var c=Html$$module$ranges.nextSignificantOffset(b);-1===c?a.setEnd(a.endContainer,Dom$$module$ranges.nodeLength(a.endContainer)):a.setEnd(Boundaries$$module$ranges.container(b),c)}return a}
function trimClosingOpening$$module$ranges(a,b,c){b=b||Fn$$module$ranges.returnFalse;c=c||Fn$$module$ranges.returnFalse;trim$$module$ranges(a,function(a){return a.atEnd||b(a.node)},function(a){return!a.prevSibling()||c(a.prevSibling())});return a}
function expandBoundaries$$module$ranges(a,b,c,d){c=c||Fn$$module$ranges.returnFalse;d=d||Fn$$module$ranges.returnFalse;a.prevWhile(function(a){var b=a.prevSibling();return b?d(b):!c(a.parent())});b.nextWhile(function(a){return a.atEnd?!c(a.parent()):d(a.node)})}
function trimBoundaries$$module$ranges(a,b,c,d){c=c||Fn$$module$ranges.returnFalse;d=d||Fn$$module$ranges.returnFalse;a.nextWhile(function(a){return!a.equals(b)&&(a.atEnd?!c(a.parent()):d(a.node))});b.prevWhile(function(b){var f=b.prevSibling();return!a.equals(b)&&(f?d(f):!c(b.parent()))})}function collapseToStart$$module$ranges(a){a.setEnd(a.startContainer,a.startOffset);return a}function collapseToEnd$$module$ranges(a){a.setStart(a.endContainer,a.endOffset);return a}
function trimPreceedingNode$$module$ranges(a){if(Boundaries$$module$ranges.isTextBoundary(a)||Boundaries$$module$ranges.isAtStart(a)||Html$$module$ranges.isRendered(Boundaries$$module$ranges.nodeBefore(a)))return a;var b=Dom$$module$ranges.clone(Boundaries$$module$ranges.container(a),!0);a=Boundaries$$module$ranges.offset(a)-1;Dom$$module$ranges.remove(b.childNodes[a]);return Boundaries$$module$ranges.create(b,a)}
function stepLeft$$module$ranges(a){var b=Traversing$$module$ranges.prev(a,"char");return b?b:Html$$module$ranges.hasLinebreakingStyle(Boundaries$$module$ranges.prevNode(a))?a:stepLeft$$module$ranges(Traversing$$module$ranges.prev(a,"boundary"))}function stepRight$$module$ranges(a){var b=Traversing$$module$ranges.next(a,"char");return b?b:Html$$module$ranges.hasLinebreakingStyle(Boundaries$$module$ranges.nextNode(a))?a:stepRight$$module$ranges(Traversing$$module$ranges.next(a,"boundary"))}
function expandLeft$$module$ranges(a){var b=a.cloneRange();a=trimPreceedingNode$$module$ranges(Boundaries$$module$ranges.fromRangeStart(b));b=Boundaries$$module$ranges.fromRangeEnd(b);return Boundaries$$module$ranges.isAtStart(a)||Html$$module$ranges.hasLinebreakingStyle(Boundaries$$module$ranges.prevNode(a))?null:fromBoundaries$$module$ranges(stepLeft$$module$ranges(a),b)}
function expandRight$$module$ranges(a){var b=Boundaries$$module$ranges.fromRangeStart(a);a=Boundaries$$module$ranges.fromRangeEnd(a);return Boundaries$$module$ranges.isAtEnd(a)||Html$$module$ranges.hasLinebreakingStyle(Boundaries$$module$ranges.nextNode(a))||Html$$module$ranges.isAtEnd(b)?null:fromBoundaries$$module$ranges(b,stepRight$$module$ranges(a))}function boundingRect$$module$ranges(a){a=a.getBoundingClientRect();return{top:a.top,left:a.left,width:a.width,height:a.height}}
function bounds$$module$ranges(a){var b;if(b=expandRight$$module$ranges(a))if(b=boundingRect$$module$ranges(b),0<b.width)return b;return(b=expandLeft$$module$ranges(a))?(b=boundingRect$$module$ranges(b),b.left+=b.width,b):boundingRect$$module$ranges(a)}
function box$$module$ranges(a){var b=bounds$$module$ranges(a),c=a.commonAncestorContainer.ownerDocument,d=Dom$$module$ranges.documentWindow(c),e=d.pageYOffset-c.body.clientTop,d=d.pageXOffset-c.body.clientLeft;ensureBrStyleFix$$module$ranges(c);if(0<b.width)return{top:b.top+e,left:b.left+d,width:b.width,height:b.height};a=Boundaries$$module$ranges.fromRangeStart(a);if((b=Boundaries$$module$ranges.nodeAfter(a)||Boundaries$$module$ranges.nodeBefore(a))&&!Dom$$module$ranges.isTextNode(b)&&(b=boundingRect$$module$ranges(b)))return{top:b.top+
e,left:b.left+d,width:b.width,height:b.height};var f=Dom$$module$ranges.scrollTop(c),c=Dom$$module$ranges.scrollLeft(c),b=Boundaries$$module$ranges.container(a);return{top:b.offsetTop-f+e,left:b.offsetLeft-c+d,width:b.offsetWidth,height:parseInt(Dom$$module$ranges.getComputedStyle(b,"line-height"),10)}}
function nearestEditingHost$$module$ranges(a){var b=Dom$$module$ranges.editingHost(a.startContainer);if(b)return b;b=Fn$$module$ranges.complement(Dom$$module$ranges.isEditingHost);a=new StableRange$$module$ranges(a);trim$$module$ranges(a,b,b);return Dom$$module$ranges.editingHost(a.startContainer)}
function showHint$$module$ranges(a,b){var c=b.querySelector(".aloha-caret-box-hint");c||(c=b.createElement("div"));Maps$$module$ranges.extend(c.style,{top:a.top+"px",left:a.left+"px",height:a.height+"px",width:a.width+"px",position:"absolute",background:"red",opacity:.2});Dom$$module$ranges.addClass(c,"aloha-caret-box-hint","aloha-ephemera");Dom$$module$ranges.append(c,b.body);return c}
function hideHint$$module$ranges(a){(a=a.querySelector(".aloha-caret-box-hint"))&&Dom$$module$ranges.remove(a);return a||null}
var module$ranges={box:box$$module$ranges,get:get$$module$ranges,create:create$$module$ranges,equals:equals$$module$ranges,collapseToEnd:collapseToEnd$$module$ranges,collapseToStart:collapseToStart$$module$ranges,trim:trim$$module$ranges,trimClosingOpening:trimClosingOpening$$module$ranges,trimBoundaries:trimBoundaries$$module$ranges,expandBoundaries:expandBoundaries$$module$ranges,nearestEditingHost:nearestEditingHost$$module$ranges,expand:expand$$module$ranges,envelopeInvisibleCharacters:envelopeInvisibleCharacters$$module$ranges,
fromPosition:fromPosition$$module$ranges,fromBoundaries:fromBoundaries$$module$ranges,showHint:showHint$$module$ranges,hideHint:hideHint$$module$ranges};var Dom$$module$boundary_markers=module$dom,Misc$$module$boundary_markers=module$misc,Mutation$$module$boundary_markers=module$mutation,Arrays$$module$boundary_markers=module$arrays,Strings$$module$boundary_markers=module$strings,Ranges$$module$boundary_markers=module$ranges,Paths$$module$boundary_markers=module$paths,Boundaries$$module$boundary_markers=module$boundaries;
function insert$$module$boundary_markers(a,b){var c=Boundaries$$module$boundary_markers.container(a),d=Boundaries$$module$boundary_markers.container(b),e=c.ownerDocument,d=e.createTextNode(Dom$$module$boundary_markers.isTextNode(d)?"]":"}"),c=e.createTextNode(Dom$$module$boundary_markers.isTextNode(c)?"[":"{"),e=Ranges$$module$boundary_markers.fromBoundaries(a,b);a=Mutation$$module$boundary_markers.splitBoundary(Boundaries$$module$boundary_markers.fromRangeStart(e),[e]);b=Mutation$$module$boundary_markers.splitBoundary(Boundaries$$module$boundary_markers.fromRangeEnd(e));
Dom$$module$boundary_markers.insert(d,Boundaries$$module$boundary_markers.nextNode(b),Boundaries$$module$boundary_markers.isAtEnd(b));Dom$$module$boundary_markers.insert(c,Boundaries$$module$boundary_markers.nextNode(a),Boundaries$$module$boundary_markers.isAtEnd(a));return[a,b]}
function insertSingle$$module$boundary_markers(a){var b=Boundaries$$module$boundary_markers.container(a).ownerDocument.createTextNode(Boundaries$$module$boundary_markers.isTextBoundary(a)?"\u00a6":"|");a=Mutation$$module$boundary_markers.splitBoundary(a);Dom$$module$boundary_markers.insert(b,Boundaries$$module$boundary_markers.nextNode(a),Boundaries$$module$boundary_markers.isAtEnd(a));return a}
function extract$$module$boundary_markers(a){var b=["[","{","}","]"],c=0,d=[];Dom$$module$boundary_markers.walkRec(a,function(a){if(Dom$$module$boundary_markers.isTextNode(a)){var f=Strings$$module$boundary_markers.splitIncl(a.nodeValue,/[\[\{\}\]]/g);if(Arrays$$module$boundary_markers.contains(b,f[0])||!(2>f.length)){var g=!1;f.forEach(function(f,k){g=g||0===k;if(Arrays$$module$boundary_markers.contains(b,f)){var l;if(0===c){if(l=0,"["!==f&&"{"!==f)throw"end marker before start marker";}else if(1===
c){if(l=1,"]"!==f&&"}"!==f)throw"start marker before end marker";}else throw"Too many markers";c+=1;if("["===f||"]"===f){var m=a.previousSibling;m&&Dom$$module$boundary_markers.isTextNode(m)||(m=a.ownerDocument.createTextNode(""),a.parentNode.insertBefore(m,a));d[l]=[m,m.length];g=!1}else d[l]=[a.parentNode,Dom$$module$boundary_markers.nodeIndex(a)],g=!0}else!g&&a.previousSibling&&Dom$$module$boundary_markers.isTextNode(a.previousSibling)?a.previousSibling.insertData(a.previousSibling.length,f):a.parentNode.insertBefore(a.ownerDocument.createTextNode(f),
a)});a.parentNode.removeChild(a)}}});if(2!==c)throw"Missing one or both markers";return d}
function show$$module$boundary_markers(a,b){var c=!b;b=b||a;var d=Boundaries$$module$boundary_markers.commonContainer(a,b),e=Dom$$module$boundary_markers.Nodes.DOCUMENT===d.nodeType?d:d.ownerDocument,f=Paths$$module$boundary_markers.fromBoundary(d,a),g=Paths$$module$boundary_markers.fromBoundary(d,b),h;if(d.parentNode)h=Paths$$module$boundary_markers.fromBoundary(d.parentNode,Boundaries$$module$boundary_markers.fromNode(d)),d=Boundaries$$module$boundary_markers.container(Paths$$module$boundary_markers.toBoundary(d.parentNode.cloneNode(!0),
h));else{d=d.cloneNode(!0);h=e.createDocumentFragment();var k=e.createDocumentFragment();Dom$$module$boundary_markers.append(d,k);Dom$$module$boundary_markers.append(k,h);h=[]}f=h.concat(f);g=h.concat(g);c?insertSingle$$module$boundary_markers(Paths$$module$boundary_markers.toBoundary(d,f)):insert$$module$boundary_markers(Paths$$module$boundary_markers.toBoundary(d,f),Paths$$module$boundary_markers.toBoundary(d,g));if(Dom$$module$boundary_markers.Nodes.DOCUMENT_FRAGMENT!==d.nodeType)return d.outerHTML;
c=e.createElement("div");Dom$$module$boundary_markers.append(d,c);return c.innerHTML}function rawBoundariesFromRange$$module$boundary_markers(a){return[Boundaries$$module$boundary_markers.raw(a.startContainer,a.startOffset),Boundaries$$module$boundary_markers.raw(a.endContainer,a.endOffset)]}
function hint$$module$boundary_markers(a){if(Misc$$module$boundary_markers.defined(a.length))return"string"===typeof a[0].nodeName?show$$module$boundary_markers(a):show$$module$boundary_markers(a[0],a[1]);a=rawBoundariesFromRange$$module$boundary_markers(a);return show$$module$boundary_markers(a[0],a[1])}var module$boundary_markers={hint:hint$$module$boundary_markers,insert:insert$$module$boundary_markers,extract:extract$$module$boundary_markers};var Dom$$module$editing=module$dom,Mutation$$module$editing=module$mutation,Boundaries$$module$editing=module$boundaries,Arrays$$module$editing=module$arrays,Maps$$module$editing=module$maps,Strings$$module$editing=module$strings,Fn$$module$editing=module$functions,Html$$module$editing=module$html,HtmlElements$$module$editing=module$html$elements,Ranges$$module$editing=module$ranges,StableRange$$module$editing=module$stable_range,Cursors$$module$editing=module$cursors,Content$$module$editing=module$content;
function walkSiblings$$module$editing(a,b,c,d,e,f){var g=c;Dom$$module$editing.walk(a.firstChild,function(a){a!==b?g(a,f):(g=e,d(a,f))})}function ascendWalkSiblings$$module$editing(a,b,c,d,e,f,g){var h,k=[];for(h=a.length;h--;){var l=c(a[h],g);null!=l&&(g=l);k.push(g)}k.reverse();a.length&&b&&Dom$$module$editing.walk(a[0].firstChild,d,k[0]);for(h=0;h<a.length-1;h++)walkSiblings$$module$editing(a[h+1],a[h],d,e,f,k[h+1])}
function makePointNodeStep$$module$editing(a,b,c,d){return function(e,f){e!==a||b?d(e,f):c(e,f)}}
function walkBoundaryLeftRightInbetween$$module$editing(a,b,c,d,e,f,g,h,k){var l=a.commonAncestorContainer;Dom$$module$editing.isTextNode(l)&&(l=l.parentNode);var m=a.startContainer,n=a.endContainer,q=a.startOffset,p=a.endOffset;a=a.collapsed;var r=Dom$$module$editing.nodeAtOffset(m,q),s=Dom$$module$editing.nodeAtOffset(n,p),m=Boundaries$$module$editing.isAtEnd(Boundaries$$module$editing.raw(m,q)),q=Boundaries$$module$editing.isAtEnd(Boundaries$$module$editing.raw(n,p)),t=Dom$$module$editing.childAndParentsUntilNode(r,
l),p=Dom$$module$editing.childAndParentsUntilNode(s,l),n=makePointNodeStep$$module$editing(r,m,d,g),s=makePointNodeStep$$module$editing(s,q,f,g);ascendWalkSiblings$$module$editing(t,m,b,c,n,d,k);ascendWalkSiblings$$module$editing(p,q,b,e,s,f,k);b=Arrays$$module$editing.last(t);d=Arrays$$module$editing.last(p);n=makePointNodeStep$$module$editing(r,m,h,g);Dom$$module$editing.walkUntilNode(l.firstChild,c,b,k);b&&(c=b.nextSibling,b===d?a||g(b,k):(n(b,k),Dom$$module$editing.walkUntilNode(c,h,d,k),d&&(c=
d.nextSibling,s(d,k))),d&&Dom$$module$editing.walk(c,f,k))}function walkBoundaryInsideOutside$$module$editing(a,b,c,d,e,f){walkBoundaryLeftRightInbetween$$module$editing(a,b,c,e,e,c,d,e,f)}function pushDownContext$$module$editing(a,b,c,d,e,f,g){var h=a.commonAncestorContainer;walkBoundaryInsideOutside$$module$editing(a,d,g,e,f,c);a=Dom$$module$editing.childAndParentsUntilInclNode(h,b);ascendWalkSiblings$$module$editing(a,!1,d,g,e,g,null);e(b)}
function findReusableAncestor$$module$editing(a,b,c,d,e,f){function g(a){h=h||!Html$$module$editing.isUnrenderedWhitespace(a)&&!b(a)}var h=null;walkBoundaryInsideOutside$$module$editing(a,Fn$$module$editing.noop,g,Fn$$module$editing.noop,Fn$$module$editing.noop);if(h)return null;var k=a.commonAncestorContainer;Dom$$module$editing.isTextNode(k)&&(k=k.parentNode);a=Dom$$module$editing.childAndParentsUntilIncl(k,function(a){return k!==a&&e(a)||d(a)||f(a)});c=Arrays$$module$editing.last(a);if(!e(c))return e(k)?
k:null;ascendWalkSiblings$$module$editing(a,!1,Fn$$module$editing.noop,g,Fn$$module$editing.noop,g);return h?e(k)?k:null:c}
function mutate$$module$editing(a,b){var c=a.commonAncestorContainer,d=b.isUpperBoundary,e=b.getOverride,f=b.getInheritableOverride,g=b.pushDownOverride,h=b.hasContext,k=b.hasInheritableContext,l=b.setContext,m=b.clearOverride,n=b.isObstruction,q=b.isReusable,p=b.isContextOverride,r=b.isClearable,s=b.clearOverrideRec||function(a){Dom$$module$editing.walkRec(a,m)},t=null,u=null,w=!1,v=!1,x=Dom$$module$editing.childAndParentsUntilIncl(c,function(a){return!a.parentNode||Dom$$module$editing.Nodes.DOCUMENT===
a.parentNode.nodeType||k(a)});x.forEach(function(a){v=v||d(a);var b=f(a);null==b||p(b)||(t=a,w=w||v||!r(a),null==u&&(u=b))});null==u&&(u=f(c));k(Arrays$$module$editing.last(x))&&!w?t?pushDownContext$$module$editing(a,t,u,e,m,s,g):walkBoundaryInsideOutside$$module$editing(a,e,g,m,s):(c=function(a,b){l(a,b,w)},(h=findReusableAncestor$$module$editing(a,h,e,d,q,n))?c(h):walkBoundaryInsideOutside$$module$editing(a,e,g,m,c))}
function adjustPointWrap$$module$editing(a,b,c){a.node!==b||a.atEnd||(a.node=c)}function wrap$$module$editing(a,b,c,d){if(!Content$$module$editing.allowsNesting(b.nodeName,a.nodeName))return!1;b.parentNode&&Mutation$$module$editing.removeShallowPreservingCursors(b,[c,d]);adjustPointWrap$$module$editing(c,a,b);adjustPointWrap$$module$editing(d,a,b);Dom$$module$editing.wrap(a,b);return!0}function moveBackIntoWrapper$$module$editing(a,b,c,d,e){Dom$$module$editing.insert(a,b,c)}
function fixupRange$$module$editing(a,b,c){var d=StableRange$$module$editing(a);Mutation$$module$editing.splitTextContainers(d);var e=Cursors$$module$editing.cursorFromBoundaryPoint(d.startContainer,d.startOffset),f=Cursors$$module$editing.cursorFromBoundaryPoint(d.endContainer,d.endOffset);!1!==c&&Ranges$$module$editing.trimClosingOpening(d,Html$$module$editing.isUnrenderedWhitespace,Html$$module$editing.isUnrenderedWhitespace);c=Cursors$$module$editing.cursorFromBoundaryPoint(d.startContainer,d.startOffset);
var g=Cursors$$module$editing.cursorFromBoundaryPoint(d.endContainer,d.endOffset);(b=b(d,c,g))&&b.postprocess();Cursors$$module$editing.setToRange(d,c,g);Mutation$$module$editing.joinTextNodeAdjustRange(e.node,d);Mutation$$module$editing.joinTextNodeAdjustRange(f.node,d);b&&b.postprocessTextNodes(d);d=Boundaries$$module$editing.fromRange(d);Boundaries$$module$editing.setRange(a,d[0],d[1]);return d}
function restackRec$$module$editing(a,b,c,d){if(!Dom$$module$editing.isElementNode(a)||!d(a))return null;a=Dom$$module$editing.nextWhile(a.firstChild,c);return!a||Dom$$module$editing.nextWhile(a.nextSibling,c)?null:b(a)?a:restackRec$$module$editing(a,b,c,d)}function restack$$module$editing(a,b,c,d,e,f){return b(a)?a:(d=restackRec$$module$editing(a,b,function(a){return!b(a)&&c(a)},d))&&wrap$$module$editing(a,d,e,f)?d:null}
function ensureWrapper$$module$editing(a,b,c,d,e,f,g,h){var k=a.previousSibling;k&&d(k)&&d(a)?(moveBackIntoWrapper$$module$editing(a,k,!0,g,h),e(a)):c(a)?f(a):(k=b(a.ownerDocument),wrap$$module$editing(a,k,g,h)?e(a):Dom$$module$editing.walk(a.firstChild,function(a){ensureWrapper$$module$editing(a,b,c,d,e,f,g,h)}))}
function makeFormatter$$module$editing(a,b,c,d){function e(a){r(a)&&(u(a),x(a)&&(a.previousSibling&&z.push(a.previousSibling),a.nextSibling&&z.push(a.nextSibling),Mutation$$module$editing.removeShallowPreservingCursors(a,[b,c])))}function f(a,b){var c=w(a,b),d=":"+a;(y[d]=y[d]||[]).push(c);A.push([c,a]);return c}function g(a){a=a.cloneNode(!1);u(a);return x(a)}function h(a,b){return v(b)?Arrays$$module$editing.contains(y[":"+a]||[],b)?!0:r(b)&&!s(b,a)?!1:g(b):!1}function k(a,d){ensureWrapper$$module$editing(a,
Fn$$module$editing.partial(f,d),v,Fn$$module$editing.partial(h,d),e,Fn$$module$editing.partial(t,d),b,c)}function l(a){e(a)}function m(a){Dom$$module$editing.walkRec(a,l)}function n(a,d,g){function k(a){return s(a,d)}var l=g?a.nextSibling:a.previousSibling;if(l&&(l=restack$$module$editing(l,k,Html$$module$editing.isUnrenderedWhitespace,Html$$module$editing.hasInlineStyle,b,c))){var m=Fn$$module$editing.partial(h,d),q=Fn$$module$editing.partial(f,d),n=Fn$$module$editing.partial(t,d);ensureWrapper$$module$editing(g?
l:a,q,v,m,e,n,b,c)}}var q=d.hasContext,p=d.isContextOverride,r=d.hasSomeContextValue,s=d.hasContextValue,t=d.addContextValue,u=d.removeContext,w=d.createWrapper,v=d.isReusable,x=d.isPrunable,y={},A=[],z=[];return{hasContext:q,isReusable:v,clearOverride:function(a){q(a)||e(a)},isClearable:g,pushDownOverride:function(a,b){null==b||r(a)||p(b)||k(a,b)},setContext:function(b,c,d){p(c)||(Dom$$module$editing.walk(b.firstChild,m),k(b,a))},isContextOverride:p,postprocess:function(){A.forEach(function(a){var b=
a[0];a=a[1];n(b,a,!0);n(b,a,!1)})},postprocessTextNodes:function(a){z.forEach(function(b){Mutation$$module$editing.joinTextNodeAdjustRange(b,a)})},hasInheritableContext:d.hasInheritableContext,isObstruction:d.isObstruction,getOverride:d.getOverride,getInheritableOverride:d.getInheritableOverride,isUpperBoundary:d.isUpperBoundary}}function isUpperBoundary_default$$module$editing(a){return"BODY"===a.nodeName||Html$$module$editing.hasBlockStyle(a)||Dom$$module$editing.isEditingHost(a)}
function isStyleEqual_default$$module$editing(a,b){return a===b}var wrapperProperties$$module$editing={underline:{name:"U",nodes:["U"],style:"text-decoration",value:"underline",normal:"none",normalize:{}},bold:{name:"B",nodes:["B","STRONG"],style:"font-weight",value:"bold",normal:"normal",normalize:{700:"bold",400:"normal"}},italic:{name:"I",nodes:["I","EM"],style:"font-style",value:"italic",normal:"normal",normalize:{}}};
wrapperProperties$$module$editing.emphasis=Maps$$module$editing.merge(wrapperProperties$$module$editing.italic,{name:"EM"});wrapperProperties$$module$editing.strong=Maps$$module$editing.merge(wrapperProperties$$module$editing.bold,{name:"STRONG"});wrapperProperties$$module$editing.underline=wrapperProperties$$module$editing.underline;wrapperProperties$$module$editing.bold=wrapperProperties$$module$editing.bold;wrapperProperties$$module$editing.italic=wrapperProperties$$module$editing.italic;
function getStyleSafely$$module$editing(a,b){return Dom$$module$editing.isElementNode(a)?Dom$$module$editing.getStyle(a,b):null}
function makeStyleFormatter$$module$editing(a,b,c,d,e){function f(a){n&&n.normalize[a]&&(a=n.normalize[a]);return a}function g(a){return k(f(a),b)}function h(a){return Arrays$$module$editing.contains(l,a.nodeName)?!0:"SPAN"===a.nodeName}var k=e.isStyleEqual||isStyleEqual_default$$module$editing,l=[],m=!1,n=wrapperProperties$$module$editing[a];n&&(l=n.nodes,a=n.style,b=(m=!b)?n.normal:n.value);e=Maps$$module$editing.merge({getOverride:function(b){if(Arrays$$module$editing.contains(l,b.nodeName))return n.value;
b=getStyleSafely$$module$editing(b,a);return Strings$$module$editing.isEmpty(b)?null:b},getInheritableOverride:function(b){if(Arrays$$module$editing.contains(l,b.nodeName))return n.value;b=Dom$$module$editing.getComputedStyle(b,a);return Strings$$module$editing.isEmpty(b)?null:b},hasContext:function(b){return!m&&Arrays$$module$editing.contains(l,b.nodeName)?!0:g(getStyleSafely$$module$editing(b,a))},hasInheritableContext:function(b){return!m&&Arrays$$module$editing.contains(l,b.nodeName)||m&&"BODY"===
b.nodeName?!0:m&&Html$$module$editing.isStyleInherited(a)?g(getStyleSafely$$module$editing(b,a)):g(Dom$$module$editing.getComputedStyle(b,a))},isContextOverride:function(a){return g(a)},hasSomeContextValue:function(b){return Arrays$$module$editing.contains(l,b.nodeName)?!0:!Strings$$module$editing.isEmpty(getStyleSafely$$module$editing(b,a))},hasContextValue:function(b,c){c=f(c);return Arrays$$module$editing.contains(l,b.nodeName)&&k(n.value,c)?!0:k(getStyleSafely$$module$editing(b,a),c)},addContextValue:function(b,
c){b=f(b);Arrays$$module$editing.contains(l,c.nodeName)&&k(n.value,b)||k(f(Dom$$module$editing.getComputedStyle(c,a)),b)||Dom$$module$editing.setStyle(c,a,b)},removeContext:function(b){Dom$$module$editing.removeStyle(b,a)},isPrunable:function(a){return h(a)&&!Dom$$module$editing.hasAttrs(a)},isStyleEqual:k,createWrapper:function(b,c){b=f(b);if(n&&k(n.value,b))return c.createElement(n.name);var d=c.createElement("SPAN");Dom$$module$editing.setStyle(d,a,b);return d},isReusable:h,isObstruction:Fn$$module$editing.complement(Html$$module$editing.hasInlineStyle),
isUpperBoundary:isUpperBoundary_default$$module$editing},e);return makeFormatter$$module$editing(b,c,d,e)}
function makeElemFormatter$$module$editing(a,b,c,d,e){function f(b){return a===b.nodeName||null}function g(c){return b?!1:a===c.nodeName}function h(b){return b.nodeName===a&&!Dom$$module$editing.hasAttrs(b)}function k(b){return b.nodeName===a}a=a.toUpperCase();e=Maps$$module$editing.merge({getOverride:f,getInheritableOverride:f,hasContext:g,hasInheritableContext:function(a){return b&&"BODY"===a.nodeName?!0:g(a)},isContextOverride:function(a){return b?!1:null!=a},hasSomeContextValue:k,hasContextValue:k,
addContextValue:Fn$$module$editing.noop,removeContext:Fn$$module$editing.noop,createWrapper:function(b,c){return c.createElement(a)},isReusable:h,isPrunable:function(a){return h(a)},isObstruction:Fn$$module$editing.complement(Html$$module$editing.hasInlineStyle),isUpperBoundary:isUpperBoundary_default$$module$editing},e);return makeFormatter$$module$editing(a,c,d,e)}
function wrapElem$$module$editing(a,b,c,d,e){e=e||{};var f=Ranges$$module$editing.fromBoundaries(b,c);return f.collapsed?[b,c]:fixupRange$$module$editing(f,function(b,c,f){c=makeElemFormatter$$module$editing(a,d,c,f,e);mutate$$module$editing(b,c);return c})}
function style$$module$editing(a,b,c,d,e){var f=Ranges$$module$editing.fromBoundaries(c,d);e=e||{};return f.collapsed?[c,d]:fixupRange$$module$editing(f,function(c,d,f){d=makeStyleFormatter$$module$editing(a,b,d,f,e);mutate$$module$editing(c,d);return d})}function format$$module$editing(a,b,c){a=resolveStyleName$$module$editing(a);return!1===a?[b,c]:style$$module$editing(a,!0,b,c)}
function resolveStyleName$$module$editing(a){for(var b in wrapperProperties$$module$editing)if(-1!==wrapperProperties$$module$editing[b].nodes.indexOf(a))return b;return!1}function trimExpandBoundaries$$module$editing(a,b,c,d,e){var f=a.equals(b);Ranges$$module$editing.trimBoundaries(a,b,c,e);Ranges$$module$editing.expandBoundaries(a,b,d,e);f&&b.setFrom(a)}
function splitBoundaryPoint$$module$editing(a,b,c,d,e,f){function g(a,b){return b||f.until(a)}function h(a,b){if(!b){var g=a.parentNode;k&&g.previousSibling===k||(k=f.clone(g),e.push(g),Dom$$module$editing.insert(k,g,!1),c.node!==g||c.atEnd||(c.node=k),d.node===g&&(d.node=k));moveBackIntoWrapper$$module$editing(a,k,!0,c,d)}}var k=null;a=Dom$$module$editing.childAndParentsUntilIncl(a,f.below);var l=a.pop();l&&f.below(l)&&ascendWalkSiblings$$module$editing(a,b,g,h,Fn$$module$editing.noop,Fn$$module$editing.noop);
return l}function normalizeBoundary$$module$editing(a){if(HtmlElements$$module$editing.skipUnrenderedToStartOfLine(a))return!0;if(!HtmlElements$$module$editing.skipUnrenderedToEndOfLine(a))return!1;if("BR"===a.node.nodeName){a.skipNext();var b=a.clone();HtmlElements$$module$editing.skipUnrenderedToEndOfLine(b)&&b.atEnd&&a.setFrom(b)}return!0}
function splitRangeAtBoundaries$$module$editing(a,b,c,d){var e=d.normalizeRange?b:b.clone(),f=d.normalizeRange?c:c.clone();normalizeBoundary$$module$editing(e);normalizeBoundary$$module$editing(f);Cursors$$module$editing.setToRange(a,e,f);var e=[],f=Dom$$module$editing.nodeAtOffset(a.startContainer,a.startOffset),g=Dom$$module$editing.nodeAtOffset(a.endContainer,a.endOffset),h=Boundaries$$module$editing.isAtEnd(Boundaries$$module$editing.raw(a.startContainer,a.startOffset));a=Boundaries$$module$editing.isAtEnd(Boundaries$$module$editing.raw(a.endContainer,
a.endOffset));var k=splitBoundaryPoint$$module$editing(f,h,b,c,e,d),l=splitBoundaryPoint$$module$editing(g,a,b,c,e,d);e.forEach(function(a){!a.firstChild&&a.parentNode&&Mutation$$module$editing.removeShallowPreservingCursors(a,[b,c])});d.normalizeRange&&trimExpandBoundaries$$module$editing(b,c,null,function(a){return a===k||a===l})}
function split$$module$editing(a,b){b=b||{};b=Maps$$module$editing.merge({clone:Dom$$module$editing.cloneShallow,until:Fn$$module$editing.returnFalse,below:Dom$$module$editing.isEditingHost,normalizeRange:!0},b);return fixupRange$$module$editing(a,function(a,d,e){splitRangeAtBoundaries$$module$editing(a,d,e,b);return null})}
function remove$$module$editing(a){fixupRange$$module$editing(a,function(a,c,d){var e=function(c){Mutation$$module$editing.removePreservingRange(c,a)};walkBoundaryLeftRightInbetween$$module$editing(a,Fn$$module$editing.noop,Fn$$module$editing.noop,e,e,Fn$$module$editing.noop,Fn$$module$editing.noop,e,null);return{postprocessTextNodes:Fn$$module$editing.noop,postprocess:function(){var e=Html$$module$editing.removeBreak(Boundaries$$module$editing.fromRangeStart(a),Boundaries$$module$editing.fromRangeEnd(a))[0],
e=Cursors$$module$editing.createFromBoundary(Boundaries$$module$editing.container(e),Boundaries$$module$editing.offset(e));c.setFrom(e);d.setFrom(e)}}},!1);return Boundaries$$module$editing.fromRange(a)}function breakline$$module$editing(a,b,c){var d=Ranges$$module$editing.collapseToEnd(StableRange$$module$editing(a));b=(c?Html$$module$editing.insertLineBreak:Html$$module$editing.insertBreak)(Boundaries$$module$editing.fromRangeStart(d),b);Boundaries$$module$editing.setRange(a,b,b);return[b,b]}
function insert$$module$editing(a,b){var c=Ranges$$module$editing.collapseToEnd(StableRange$$module$editing(a));split$$module$editing(c,{below:function(a){return Content$$module$editing.allowsNesting(a.nodeName,b.nodeName)}});c=Mutation$$module$editing.insertNodeAtBoundary(b,Boundaries$$module$editing.fromRangeStart(c));Boundaries$$module$editing.setRange(a,c,Boundaries$$module$editing.create(Boundaries$$module$editing.container(c),Boundaries$$module$editing.offset(c)+1));return c}
var module$editing={wrap:wrapElem$$module$editing,format:format$$module$editing,style:style$$module$editing,split:split$$module$editing,remove:remove$$module$editing,breakline:breakline$$module$editing,insert:insert$$module$editing};var Dom$$module$links=module$dom,Html$$module$links=module$html,Ranges$$module$links=module$ranges,Arrays$$module$links=module$arrays,Mutation$$module$links=module$mutation,Boundaries$$module$links=module$boundaries,LinkUtil$$module$links=module$links$link_util,LinkSelection$$module$links=module$links$link_selection;function isValidRangeForCreateLink$$module$links(a){return!a.collapsed&&(!a.textContent||0===a.textContent.trim().length)}
function createAnchors$$module$links(a,b){var c=Boundaries$$module$links.document(a);return LinkSelection$$module$links.collectLinkableNodeGroups(a,b).reduce(function(a,b){var f=c.createElement("a");Dom$$module$links.insert(f,b[0]);Dom$$module$links.move(b,f);return a.concat(f)},[])}
function create$$module$links(a,b,c,d){Html$$module$links.isBoundariesEqual(b,c)?(c=Boundaries$$module$links.document(b).createElement("a"),c.innerHTML=a,Mutation$$module$links.insertNodeAtBoundary(c,b,!0),b=[c]):b=createAnchors$$module$links(b,c);b.forEach(function(b){Dom$$module$links.setAttr(b,"href",a)});d&&b.reduce(function(a,b){a.push(b);return a},d);return[Boundaries$$module$links.fromNode(b[0]),Boundaries$$module$links.jumpOver(Boundaries$$module$links.fromNode(Arrays$$module$links.last(b)))]}
function isEqualNodeShallow$$module$links(a,b){return Dom$$module$links.cloneShallow(a).isEqualNode(Dom$$module$links.cloneShallow(b))}function areJoinable$$module$links(a,b){return!Dom$$module$links.isTextNode(a)&&isEqualNodeShallow$$module$links(a,b)}function joinNodes$$module$links(a,b){for(var c;a&&b&&areJoinable$$module$links(a,b);)c=LinkUtil$$module$links.nextRenderedNode(a.firstChild),b.appendChild(c),Dom$$module$links.remove(a),a=c,b=b.firstChild}
function removeIfLink$$module$links(a){if(LinkUtil$$module$links.isAnchorNode(a)){var b=LinkUtil$$module$links.nextRenderedNode(a.firstChild),c=LinkUtil$$module$links.prevRenderedNode(a.previousSibling);joinNodes$$module$links(b,c);b=LinkUtil$$module$links.prevRenderedNode(a.lastChild);c=LinkUtil$$module$links.nextRenderedNode(a.nextSibling);joinNodes$$module$links(c,b);Dom$$module$links.removeShallow(a)}}
function removeChildrenLinks$$module$links(a){Dom$$module$links.isElementNode(a)&&Arrays$$module$links.coerce(a.querySelectorAll("a")).forEach(removeIfLink$$module$links)}function removeParentLinksAndGetNext$$module$links(a){for(var b;!a.nextSibling&&a.parentNode;)b=a.parentNode,removeIfLink$$module$links(a),a=b;b=a.nextSibling;removeIfLink$$module$links(a);return b}
function remove$$module$links(a,b){var c=LinkUtil$$module$links.boundaryLinkable(Boundaries$$module$links.container(a),Boundaries$$module$links.offset(a)),d=LinkUtil$$module$links.boundaryLinkable(Boundaries$$module$links.container(b),Boundaries$$module$links.offset(b)),c=Boundaries$$module$links.container(c),d=Boundaries$$module$links.container(d);removeChildrenLinks$$module$links(c);for(removeChildrenLinks$$module$links(d);c&&!Dom$$module$links.isSameNode(c,d);)(c=removeParentLinksAndGetNext$$module$links(c))&&
removeChildrenLinks$$module$links(c);for(;d&&d.parentNode&&LinkUtil$$module$links.isLinkable(d);)removeIfLink$$module$links(d),d=d.parentNode}var module$links={create:create$$module$links,remove:remove$$module$links};var Dom$$module$formatting=module$dom,Lists$$module$formatting=module$lists,Links$$module$formatting=module$links,Editing$$module$formatting=module$editing,Boundaries$$module$formatting=module$boundaries,Html$$module$formatting=module$html$predicates;function inlineFormat$$module$formatting(a,b,c){return Editing$$module$formatting.format(a,b,c)}
function blockFormat$$module$formatting(a,b,c){var d=Boundaries$$module$formatting.container(b);Html$$module$formatting.isBlockNode(d)&&(d=Boundaries$$module$formatting.nextNode(b));Dom$$module$formatting.isTextNode(d)&&(d=d.parentNode);if(Html$$module$formatting.isGroupContainer(d)||Html$$module$formatting.isGroupedElement(d)||Dom$$module$formatting.isEditingHost(d))return[b,c];a=Boundaries$$module$formatting.document(b).createElement(a);Dom$$module$formatting.replaceShallow(d,a);return[Boundaries$$module$formatting.fromNode(a),
Boundaries$$module$formatting.fromEndOfNode(a)]}function format$$module$formatting(a,b,c){if("a"===a.toLowerCase())return Links$$module$formatting.create("",b,c);var d={nodeName:a};return Html$$module$formatting.isTextLevelSemanticNode(d)?inlineFormat$$module$formatting(a,b,c):Html$$module$formatting.isListContainer(d)?Lists$$module$formatting.toggle(a,b,c):Html$$module$formatting.isBlockNode(d)?blockFormat$$module$formatting(a,b,c):[b,c]}var module$formatting={format:format$$module$formatting};var Arrays$$module$undo=module$arrays,Maps$$module$undo=module$maps,Dom$$module$undo=module$dom,Mutation$$module$undo=module$mutation,Boundaries$$module$undo=module$boundaries,Fn$$module$undo=module$functions,Ranges$$module$undo=module$ranges,__hack1__$$module$undo=module$content,__hack2__$$module$undo=module$traversing;function assertEqual$$module$undo(a,b){if(a!==b)throw Error("assertion error "+a+" !== "+b);}
function assertNotEqual$$module$undo(a,b){if(a===b)throw Error("assertion error "+a+" === "+b);}function assertFalse$$module$undo(a){assertEqual$$module$undo(a,!1)}function assertTrue$$module$undo(a){assertEqual$$module$undo(a,!0)}function assertError$$module$undo(){throw Error();}function beforeNodeBoundary$$module$undo(a){return[a.parentNode,Dom$$module$undo.nodeIndex(a)]}function nodeAtBoundary$$module$undo(a){return Dom$$module$undo.nodeAtOffset(a[0],a[1])}
function nodeBeforeBoundary$$module$undo(a){a=Boundaries$$module$undo.normalize(a);return Boundaries$$module$undo.isNodeBoundary(a)?Boundaries$$module$undo.isAtStart(a)?null:Dom$$module$undo.nthChild(a[0],a[1]-1):a[0]}function nodeAfterBoundary$$module$undo(a){a=Boundaries$$module$undo.normalize(a);return Boundaries$$module$undo.isNodeBoundary(a)?Boundaries$$module$undo.isAtEnd(a)?null:Dom$$module$undo.nthChild(a[0],a[1]):a[0].nextSibling}
function precedingTextLength$$module$undo(a){a=Boundaries$$module$undo.normalize(a);var b=nodeBeforeBoundary$$module$undo(a),c=0;Boundaries$$module$undo.isNodeBoundary(a)||(c+=a[1],b=b.previousSibling);for(;b&&Dom$$module$undo.isTextNode(b);)c+=Dom$$module$undo.nodeLength(b),b=b.previousSibling;return c}
function Context$$module$undo(a,b){b=Maps$$module$undo.merge({maxCombineChars:20,maxHistory:1E3},b);var c={elem:a,observer:null,stack:[],frame:null,opts:b,history:[],historyIndex:0};c.observer=!b.noMutationObserver&&window.MutationObserver?ChangeObserverUsingMutationObserver$$module$undo():ChangeObserverUsingSnapshots$$module$undo();return c}function makeChangeSet$$module$undo(a,b,c){return{changes:b,meta:a,selection:c}}
function pathEquals$$module$undo(a,b){return Arrays$$module$undo.equal(a,b,Arrays$$module$undo.equal)}function stepDownPath$$module$undo(a,b,c){a.push([c,b])}function nodePath$$module$undo(a,b){for(var c=[];b&&a!==b;){var d=b.parentNode;if(!d)return[];stepDownPath$$module$undo(c,d.nodeName,Dom$$module$undo.normalizedNodeIndex(b));b=d}c.reverse();return c}
function boundaryFromPath$$module$undo(a,b){for(var c=0;c<b.length-1;c++){var d=b[c];assertEqual$$module$undo(d[1],a.nodeName);a=Dom$$module$undo.normalizedNthChild(a,d[0])}c=Arrays$$module$undo.last(b);d=c[0];a=Dom$$module$undo.nextWhile(a,Dom$$module$undo.isEmptyTextNode);assertEqual$$module$undo(c[1],a.nodeName);if(Dom$$module$undo.isTextNode(a)){for(assertNotEqual$$module$undo(d,0);d>Dom$$module$undo.nodeLength(a);)assertTrue$$module$undo(Dom$$module$undo.isTextNode(a)),d-=Dom$$module$undo.nodeLength(a),
a=a.nextSibling;Dom$$module$undo.isTextNode(a)||(assertEqual$$module$undo(d,0),a=a.parentNode,d=Dom$$module$undo.nodeIndex(a))}else d=Dom$$module$undo.realFromNormalizedIndex(a,d);return Boundaries$$module$undo.normalize([a,d])}function endOfNodePath$$module$undo(a,b){var c=nodePath$$module$undo(a,b),d=Dom$$module$undo.normalizedNumChildren(b);stepDownPath$$module$undo(c,b.nodeName,d);return c}
function pathFromBoundary$$module$undo(a,b){b=Boundaries$$module$undo.normalize(b);var c,d=precedingTextLength$$module$undo(b);d?(c=nodeBeforeBoundary$$module$undo(b),c=Dom$$module$undo.prevWhile(c,Dom$$module$undo.isEmptyTextNode),c=nodePath$$module$undo(a,c),stepDownPath$$module$undo(c,"#text",d)):c=Boundaries$$module$undo.isAtEnd(b)?endOfNodePath$$module$undo(a,b[0]):nodePath$$module$undo(a,nodeAfterBoundary$$module$undo(b));return c}
function incompletePathFromBoundary$$module$undo(a,b){b=Boundaries$$module$undo.normalize(b);var c=nodeAfterBoundary$$module$undo(b);precedingTextLength$$module$undo(b)&&(c=Dom$$module$undo.nextWhile(c,Dom$$module$undo.isTextNode));return c?nodePath$$module$undo(a,c):endOfNodePath$$module$undo(a,b[0])}function pathBeforeNode$$module$undo(a,b){return pathFromBoundary$$module$undo(a,beforeNodeBoundary$$module$undo(b))}
function recordRange$$module$undo(a,b){if(!b)return null;var c=pathFromBoundary$$module$undo(a,Boundaries$$module$undo.fromRangeStart(b)),d=pathFromBoundary$$module$undo(a,Boundaries$$module$undo.fromRangeEnd(b));return c&&d?{start:c,end:d}:null}function takeRecords$$module$undo(a,b){if(b.opts.noObserve)a.observer.discardChanges();else{var c=a.observer.takeChanges();c.length&&b.records.push({changes:c})}}
function partitionRecords$$module$undo(a,b,c,d){(d.opts.partitionRecords&&!d.opts.noObserve||!!c.opts.noObserve!==!!d.opts.noObserve)&&takeRecords$$module$undo(a,b)}function close$$module$undo(a){a.frame&&(a.observer.disconnect(),a.frame=null)}
function enter$$module$undo(a,b){b=b||{};var c=a.frame,d=a.observer,e=a.elem,f={opts:Maps$$module$undo.merge(b,{noObserve:b.noObserve||c&&c.opts.noObserve}),records:[],oldRange:recordRange$$module$undo(e,b.oldRange),newRange:null};c?(partitionRecords$$module$undo(a,c,f,c),a.stack.push(c)):d.observeAll(e);a.frame=f}
function leave$$module$undo(a,b){var c=a.frame,d=a.stack.pop();d?partitionRecords$$module$undo(a,c,c,d):(takeRecords$$module$undo(a,c),close$$module$undo(a));var e=c.opts.noObserve;assertFalse$$module$undo(!(e||!b||!b.changes));e&&b&&b.changes&&b.changes.length&&c.records.push({changes:b.changes});c.newRange=recordRange$$module$undo(a.elem,b&&b.newRange);d&&(d.records.push({frame:c}),a.frame=d);return c}
function capture$$module$undo(a,b,c){enter$$module$undo(a,b);b=c();return leave$$module$undo(a,b)}function captureOffTheRecord$$module$undo(a,b,c){b=capture$$module$undo(a,Maps$$module$undo.merge(b,{noObserve:!0}),c);(a=a.frame)&&a.records.pop();return b}function makeInsertDeleteChange$$module$undo(a,b,c){return{type:a,path:b,content:c}}function makeInsertChange$$module$undo(a,b){return makeInsertDeleteChange$$module$undo("insert",a,b)}
function makeDeleteChange$$module$undo(a,b){return makeInsertDeleteChange$$module$undo("delete",a,b)}function makeUpdateAttrChange$$module$undo(a,b,c){var d=[];Maps$$module$undo.forEach(c,function(a){var c=a.name,g=a.ns;d.push({name:c,ns:g,oldValue:a.oldValue,newValue:Dom$$module$undo.getAttrNS(b,g,c)})});return{type:"update-attr",path:a,attrs:d}}function makeRangeUpdateChange$$module$undo(a,b){return{type:"update-range",oldRange:a,newRange:b}}
var INSERT$$module$undo=0,UPDATE_ATTR$$module$undo=1,UPDATE_TEXT$$module$undo=2,DELETE_FLAG$$module$undo=4,DELETE$$module$undo=DELETE_FLAG$$module$undo,COMPOUND_DELETE$$module$undo=DELETE_FLAG$$module$undo+1;function makeDelete$$module$undo(a,b,c){return{type:DELETE$$module$undo,node:a,target:b,prevSibling:c,contained:[],updateAttr:null,updateText:null}}function makeMultiDelete$$module$undo(a,b,c){return{type:COMPOUND_DELETE$$module$undo,records:a,target:b,prevSibling:c}}
function makeInsert$$module$undo(a){return{type:INSERT$$module$undo,node:a,contained:[]}}function makeUpdateAttr$$module$undo(a,b){return{type:UPDATE_ATTR$$module$undo,node:a,attrs:{}}}function makeUpdateText$$module$undo(a,b){return{type:UPDATE_TEXT$$module$undo,node:a,oldValue:b}}
function normalizeInsertDeletePreserveAnchors$$module$undo(a,b,c,d){a.forEach(function(a){var f=Dom$$module$undo.ensureExpandoId(a.node),g=a.type;if(DELETE$$module$undo===g){var g=a.prevSibling,h=a.target,k=g?c:d,l=Dom$$module$undo.ensureExpandoId(g?g:h),m=k[l]=k[l]||[];b[f]?delete b[f]:m.push(a);if(a=c[f])delete c[f],!m.length&&a.length&&(f=a[0],f.prevSibling=g,f.target=h),k[l]=m.concat(a)}else INSERT$$module$undo===g?(assertFalse$$module$undo(!!b[f]),b[f]=a):assertError$$module$undo()})}
function records$$module$undo(a){return COMPOUND_DELETE$$module$undo===a.type?a.records:[a]}function insertFollowedByDelete$$module$undo(a,b){var c=b.prevSibling,d=b.target,e=a.node;return c?c===e||Dom$$module$undo.contains(c,e)?!0:!Dom$$module$undo.followedBy(c,e)&&!Dom$$module$undo.contains(e,c):d===e||Dom$$module$undo.contains(d,e)?!1:!Dom$$module$undo.followedBy(d,e)&&!Dom$$module$undo.contains(e,d)}
function insertFollowedByInsert$$module$undo(a,b){return Dom$$module$undo.followedBy(a.node,b.node)}function prevSiblingFollowedByDelete$$module$undo(a,b){var c=b.prevSibling,d=b.target;return c?Dom$$module$undo.contains(c,a)?!0:Dom$$module$undo.contains(a,c)?!1:Dom$$module$undo.followedBy(a,c):a===d||Dom$$module$undo.contains(d,a)||Dom$$module$undo.contains(a,d)?!1:Dom$$module$undo.followedBy(a,d)}
function deleteFollowedByDelete$$module$undo(a,b){var c=a.prevSibling,d=b.prevSibling,e=a.target,f=b.target;return c?prevSiblingFollowedByDelete$$module$undo(c,b):d?!prevSiblingFollowedByDelete$$module$undo(d,a):Dom$$module$undo.followedBy(e,f)}
function compareRecords$$module$undo(a,b){var c=DELETE_FLAG$$module$undo&a.type,d=DELETE_FLAG$$module$undo&b.type,e;c&&d?e=deleteFollowedByDelete$$module$undo(a,b):c||d?!c&&d?e=insertFollowedByDelete$$module$undo(a,b):c&&!d&&(e=!insertFollowedByDelete$$module$undo(b,a)):e=insertFollowedByInsert$$module$undo(a,b);return e?-1:1}
function sortRecordTree$$module$undo(a){a.sort(compareRecords$$module$undo);a.forEach(function(a){records$$module$undo(a).forEach(function(a){a.contained&&DELETE_FLAG$$module$undo&a.type&&sortRecordTree$$module$undo(a.contained)})})}
function fillOutContained$$module$undo(a,b){var c={};b.forEach(function(a){records$$module$undo(a).forEach(function(a){var b=a.type;if(b&DELETE_FLAG$$module$undo||b===INSERT$$module$undo){var b=Dom$$module$undo.ensureExpandoId(a.node),d=c[b]||[];d.push(a);c[b]=d}})});var d=Dom$$module$undo.ensureExpandoId(a);assertFalse$$module$undo(!!c[d]);var e=makeInsert$$module$undo(a);c[d]=[e];b.forEach(function(a){var b=Dom$$module$undo.upWhile(DELETE$$module$undo&a.type?a.target:a.node.parentNode,function(a){return!c[Dom$$module$undo.ensureExpandoId(a)]});
b&&c[Dom$$module$undo.ensureExpandoId(b)].forEach(function(b){b.contained.push(a)})});return e.contained}
function makeRecordTree$$module$undo(a,b,c,d){function e(a){var b=Dom$$module$undo.ensureExpandoId(a.node);DELETE$$module$undo===a.type&&(a.updateAttr=c[b],a.updateText=d[b]);delete c[b];delete d[b]}var f={},g={},h={};normalizeInsertDeletePreserveAnchors$$module$undo(b,h,f,g);b=Maps$$module$undo.vals(f).concat(Maps$$module$undo.vals(g));b=b.filter(function(a){return a.length});b=b.map(function(a){var b=a[0];a.forEach(e);return makeMultiDelete$$module$undo(a,b.target,b.prevSibling)});h=Maps$$module$undo.vals(h);
h.forEach(e);a=fillOutContained$$module$undo(a,b.concat(h).concat(Maps$$module$undo.vals(c)).concat(Maps$$module$undo.vals(d)));sortRecordTree$$module$undo(a);return a}function delPath$$module$undo(a,b,c){var d=b.prevSibling;d?(b=Dom$$module$undo.nodeIndex(d)+1,d=[d.parentNode,b]):d=[b.target,0];return c?incompletePathFromBoundary$$module$undo(a,d):pathFromBoundary$$module$undo(a,d)}
function reconstructNodeFromDelRecord$$module$undo(a){var b=a.node,c;Dom$$module$undo.isTextNode(b)?c=(a=a.updateText)?b.ownerDocument.createTextNode(a.oldValue):Dom$$module$undo.clone(b):(c=Dom$$module$undo.clone(b),(b=a.updateAttr)&&Maps$$module$undo.forEach(b.attrs,function(a){Dom$$module$undo.setAttrNS(c,a.ns,a.name,a.oldValue)}));return c}
function generateChanges$$module$undo(a,b,c,d){var e=null,f=null;d.forEach(function(d){var h=d.type,k;if(COMPOUND_DELETE$$module$undo===h){f=null;k=a.concat(delPath$$module$undo(b,d));var l=a.concat(delPath$$module$undo(b,d,!0)),m=null;d.records.forEach(function(a){var b=a.contained;b.length&&(generateChanges$$module$undo(l,a.node,c,b),m=null);a=reconstructNodeFromDelRecord$$module$undo(a);m?m.push(a):(m=[a],c.push(makeDeleteChange$$module$undo(k,m)))})}else INSERT$$module$undo===h?(h=d.node,k=a.concat(pathBeforeNode$$module$undo(b,
h)),f&&f===h.previousSibling?e.push(Dom$$module$undo.clone(h)):(e=[Dom$$module$undo.clone(h)],c.push(makeInsertChange$$module$undo(k,e))),f=h):UPDATE_ATTR$$module$undo===h?(f=null,h=d.node,k=a.concat(pathBeforeNode$$module$undo(b,h)),c.push(makeUpdateAttrChange$$module$undo(k,h,d.attrs))):UPDATE_TEXT$$module$undo===h?(f=null,h=d.node,k=a.concat(pathBeforeNode$$module$undo(b,h)),c.push(makeDeleteChange$$module$undo(k,[h.ownerDocument.createTextNode(d.oldValue)])),c.push(makeInsertChange$$module$undo(k,
[Dom$$module$undo.clone(h)]))):assertError$$module$undo()})}
function changesFromMutationRecords$$module$undo(a,b){var c={},d={},e=[];b.forEach(function(a){var b=a.target,f=a.oldValue,g=a.type,n;if("attributes"===g)g=a.attributeName,a=a.attributeNamespace,n=Dom$$module$undo.ensureExpandoId(b),n=(c[n]=c[n]||makeUpdateAttr$$module$undo(b,{})).attrs,f={oldValue:f,name:g,ns:a},g=g+" "+a,n[g]=n[g]||f;else if("characterData"===g)n=Dom$$module$undo.ensureExpandoId(b),d[n]=d[n]||makeUpdateText$$module$undo(b,f);else if("childList"===g){var q=a.previousSibling;Arrays$$module$undo.coerce(a.removedNodes).forEach(function(a){e.push(makeDelete$$module$undo(a,
b,q))});Arrays$$module$undo.coerce(a.addedNodes).forEach(function(a){e.push(makeInsert$$module$undo(a))})}else assertError$$module$undo()});var f=makeRecordTree$$module$undo(a,e,c,d),g=[];generateChanges$$module$undo([],a,g,f);return g}function changesFromSnapshots$$module$undo(a,b){var c=[];stepDownPath$$module$undo(c,b.nodeName,0);var d=[];d.push(makeDeleteChange$$module$undo(c,Dom$$module$undo.children(a)));d.push(makeInsertChange$$module$undo(c,Dom$$module$undo.children(b)));return d}
function ChangeObserverUsingMutationObserver$$module$undo(){function a(){var a=c.concat(d.takeRecords());c.length=0;return changesFromMutationRecords$$module$undo(b,a)}var b=null,c=[],d=new MutationObserver(function(a){c=c.concat(a)});return{observeAll:function(a){d.observe(a,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0});b=a},takeChanges:a,discardChanges:a,disconnect:function(){b=null;c.length=0;d.disconnect();d=null}}}
function ChangeObserverUsingSnapshots$$module$undo(){var a=null,b=null;return{observeAll:function(c){a=c;b=Dom$$module$undo.clone(c)},takeChanges:function(){if(Dom$$module$undo.isEqualNode(b,a))return[];var c=b,d=Dom$$module$undo.clone(a);b=d;return changesFromSnapshots$$module$undo(c,d)},discardChanges:function(){b=Dom$$module$undo.clone(a)},disconnect:function(){b=a=null}}}
function applyChange$$module$undo(a,b,c,d,e){var f=b.type,g,h;"update-attr"===f?(g=boundaryFromPath$$module$undo(a,b.path),h=nodeAfterBoundary$$module$undo(g),b.attrs.forEach(function(a){Dom$$module$undo.setAttrNS(h,a.ns,a.name,a.newValue)})):"update-range"===f?(f=b.newRange,c&&f&&(b=boundaryFromPath$$module$undo(a,f.start),a=boundaryFromPath$$module$undo(a,f.end),Boundaries$$module$undo.setRange(c,b,a))):"insert"===f?(g=boundaryFromPath$$module$undo(a,b.path),b.content.forEach(function(a){a=Dom$$module$undo.clone(a);
Dom$$module$undo.isTextNode(a)&&e.push(a);g=Mutation$$module$undo.insertNodeAtBoundary(a,g,!0,d)})):"delete"===f?(g=boundaryFromPath$$module$undo(a,b.path),g=Mutation$$module$undo.splitBoundary(g,d),h=nodeAtBoundary$$module$undo(g),b.content.forEach(function(a){var b;if(Dom$$module$undo.isTextNode(a))for(var c=Dom$$module$undo.nodeLength(a);c;){assertEqual$$module$undo(h.nodeName,a.nodeName);var f=Dom$$module$undo.nodeLength(h);c>=f?(b=h.nextSibling,Mutation$$module$undo.removePreservingRanges(h,
d),c-=f):(g=Mutation$$module$undo.splitBoundary([h,c],d),c=nodeBeforeBoundary$$module$undo(g),b=nodeAfterBoundary$$module$undo(g),Mutation$$module$undo.removePreservingRanges(c,d),c=0,e.push(b));h=b}else b=h.nextSibling,assertEqual$$module$undo(h.nodeName,a.nodeName),Mutation$$module$undo.removePreservingRanges(h,d),h=b})):assertError$$module$undo()}
function applyChanges$$module$undo(a,b,c){var d=[];b.forEach(function(b){applyChange$$module$undo(a,b,null,c,d)});d.forEach(function(a){Mutation$$module$undo.joinTextNode(a,c)})}function applyChangeSet$$module$undo(a,b,c,d){applyChanges$$module$undo(a,b.changes,d);c&&b.selection&&applyChange$$module$undo(a,b.selection,c,d,[])}
function inverseChange$$module$undo(a){var b=a.type,c;"update-attr"===b?c=Maps$$module$undo.merge(a,{attrs:a.attrs.map(function(a){return Maps$$module$undo.merge(a,{oldValue:a.newValue,newValue:a.oldValue})})}):"update-range"===b?c=Maps$$module$undo.merge(a,{oldRange:a.newRange,newRange:a.oldRange}):"insert"===b?c=Maps$$module$undo.merge(a,{type:"delete"}):"delete"===b?c=Maps$$module$undo.merge(a,{type:"insert"}):assertError$$module$undo();return c}
function inverseChangeSet$$module$undo(a){var b=a.changes.slice(0).reverse().map(inverseChange$$module$undo);return makeChangeSet$$module$undo(a.meta,b,inverseChange$$module$undo(a.selection))}function collectChanges$$module$undo(a,b){var c=[];b.records.forEach(function(b){var e=b.frame;b=e?collectChanges$$module$undo(a,e):b.changes;c=c.concat(b)});return c}
function changeSetFromFrameHavingChanges$$module$undo(a,b,c){a=makeRangeUpdateChange$$module$undo(b.oldRange,b.newRange);return makeChangeSet$$module$undo(b.opts.meta,c,a)}function changeSetFromFrame$$module$undo(a,b){var c=collectChanges$$module$undo(a,b);return changeSetFromFrameHavingChanges$$module$undo(a,b,c)}
function partitionedChangeSetsFromFrame$$module$undo(a,b){var c=[];b.records.forEach(function(d){var e;(e=d.frame)?(d=collectChanges$$module$undo(a,e),e=changeSetFromFrameHavingChanges$$module$undo(a,e,d)):e=changeSetFromFrameHavingChanges$$module$undo(a,b,d.changes);c.push(e)});return c}
function combineChanges$$module$undo(a,b,c){var d=a.changes,e=b.changes;if(!d.length||!e.length)return null;var f=a.meta&&a.meta.type,g=b.meta&&b.meta.type;if("typing"!==f&&"enter"!==f||"typing"!==g)return null;var d=d[0],e=e[0],f=d.path,g=e.path,h=Arrays$$module$undo.last(f),k=Arrays$$module$undo.last(g);h&&"#text"!==h[1]&&(h=["#text",0],f=f.concat([h]));if("insert"!==d.type||d.type!==e.type||"#text"!==h[1]||h[1]!==k[1]||1!==d.content.length||1!==e.content.length||!Dom$$module$undo.isTextNode(d.content[0])||
!Dom$$module$undo.isTextNode(e.content[0])||c.maxCombineChars<=Dom$$module$undo.nodeLength(d.content[0])||h[0]+Dom$$module$undo.nodeLength(d.content[0])!==k[0]||!pathEquals$$module$undo(f.slice(0,f.length-1),g.slice(0,g.length-1)))return null;c=Dom$$module$undo.clone(d.content[0]);c.insertData(Dom$$module$undo.nodeLength(c),e.content[0].data);c=makeInsertChange$$module$undo(f,[c]);b=makeRangeUpdateChange$$module$undo(a.selection.oldRange,b.selection.newRange);return makeChangeSet$$module$undo(a.meta,
[c],b)}
function advanceHistory$$module$undo(a){assertFalse$$module$undo(!!a.stack.length);var b=a.history,c=a.historyIndex,d=a.frame;takeRecords$$module$undo(a,d);var e=partitionedChangeSetsFromFrame$$module$undo(a,d);e.length&&(b.length=c,c=Arrays$$module$undo.last(b),1===e.length&&c&&!a.interrupted&&(c=combineChanges$$module$undo(c,e[0],a.opts))&&(b.pop(),e=[c]),a.interrupted=!1,b=b.concat(e),e=a.opts.maxHistory,b.length>e&&(b=b.slice(b.length-e,b.length)),d.records=[],a.history=b,a.historyIndex=b.length)}
function undo$$module$undo(a,b,c){advanceHistory$$module$undo(a);var d=a.history,e=a.historyIndex;if(e){var e=e-1,f=inverseChangeSet$$module$undo(d[e]);captureOffTheRecord$$module$undo(a,{meta:{type:"undo"}},function(){applyChangeSet$$module$undo(a.elem,f,b,c)});a.historyIndex=e}}
function redo$$module$undo(a,b,c){advanceHistory$$module$undo(a);var d=a.history,e=a.historyIndex;if(e!==d.length){var f=d[e],e=e+1;captureOffTheRecord$$module$undo(a,{meta:{type:"redo"}},function(){applyChangeSet$$module$undo(a.elem,f,b,c)});a.historyIndex=e}}
var module$undo={Context:Context$$module$undo,enter:enter$$module$undo,close:close$$module$undo,leave:leave$$module$undo,capture:capture$$module$undo,pathFromBoundary:pathFromBoundary$$module$undo,changeSetFromFrame:changeSetFromFrame$$module$undo,inverseChangeSet:inverseChangeSet$$module$undo,applyChangeSet:applyChangeSet$$module$undo,advanceHistory:advanceHistory$$module$undo,makeInsertChange:makeInsertChange$$module$undo,undo:undo$$module$undo,redo:redo$$module$undo};var Dom$$module$editables=module$dom,Undo$$module$editables=module$undo,Boundaries$$module$editables=module$boundaries;function fromElem$$module$editables(a,b){return a.editables[Dom$$module$editables.ensureExpandoId(b)]}function fromBoundary$$module$editables(a,b){var c=Boundaries$$module$editables.container(b);return(c=Dom$$module$editables.upWhile(c,function(b){return!a.editables[Dom$$module$editables.ensureExpandoId(b)]}))&&fromElem$$module$editables(a,c)}
function Editable$$module$editables(a){var b=Undo$$module$editables.Context(a);return{id:Dom$$module$editables.ensureExpandoId(a),elem:a,undoContext:b}}function dissocFromEditor$$module$editables(a,b){delete a.editables[b.id]}function assocIntoEditor$$module$editables(a,b){a.editables[b.id]=b}function close$$module$editables(a){Undo$$module$editables.close(a.undoContext)}
function handle$$module$editables(a){if("mousemove"===a.type||!a.range)return a;var b=Dom$$module$editables.editingHost(a.range.commonAncestorContainer);if(!b)return a;a.editable=fromElem$$module$editables(a.editor,b);return a}var module$editables={Editable:Editable$$module$editables,fromElem:fromElem$$module$editables,fromBoundary:fromBoundary$$module$editables,assocIntoEditor:assocIntoEditor$$module$editables,dissocFromEditor:dissocFromEditor$$module$editables,close:close$$module$editables,handle:handle$$module$editables};var Ranges$$module$keys=module$ranges,Strings$$module$keys=module$strings,Editables$$module$keys=module$editables,Boundaries$$module$keys=module$boundaries,CODES$$module$keys={alt:18,backspace:8,capslock:20,ctrl:17,"delete":46,enter:13,escape:27,f1:112,f12:123,shift:16,space:32,tab:9,undo:90,bold:66,italic:73,underline:85,left:37,up:38,right:39,down:40,selectAll:65},ARROWS$$module$keys={37:"left",38:"up",39:"right",40:"down"};
function isTextInput$$module$keys(a){return"keypress"===a.type&&!a.altKey&&!a.ctrlKey&&!Strings$$module$keys.isControlCharacter(String.fromCharCode(a.which))}function metaKeys$$module$keys(a){var b=[];a.metaKey&&b.push("meta");a.ctrlKey&&CODES$$module$keys.ctrl!==a.which&&b.push("ctrl");a.altKey&&CODES$$module$keys.alt!==a.which&&b.push("alt");a.shiftKey&&CODES$$module$keys.shift!==a.which&&b.push("shift");return b.join("+")}var EVENTS$$module$keys={keyup:!0,keydown:!0,keypress:!0};
function handle$$module$keys(a){var b=a.nativeEvent;if(!b)return a;a.meta=metaKeys$$module$keys(b);EVENTS$$module$keys[a.type]&&(a.which=b.which,a.isTextInput=isTextInput$$module$keys(b),a.chr=String.fromCharCode(b.which));return a}var module$keys={CODES:CODES$$module$keys,EVENTS:EVENTS$$module$keys,ARROWS:ARROWS$$module$keys,handle:handle$$module$keys};var Fn$$module$selections=module$functions,Dom$$module$selections=module$dom,Keys$$module$selections=module$keys,Maps$$module$selections=module$maps,Mouse$$module$selections=module$mouse,Events$$module$selections=module$events,Ranges$$module$selections=module$ranges,Browsers$$module$selections=module$browsers,Overrides$$module$selections=module$overrides,Animation$$module$selections=module$animation,Boundaries$$module$selections=module$boundaries,Traversing$$module$selections=module$traversing,Colors$$module$selections=
module$colors;function hideCarets$$module$selections(a){a=a.querySelectorAll("div.aloha-caret");var b=[];[].forEach.call(a,function(a){"block"===Dom$$module$selections.getStyle(a,"display")&&(b.push(a),Dom$$module$selections.setStyle(a,"display","none"))});return b}function unhideCarets$$module$selections(a){a.forEach(function(a){Dom$$module$selections.setStyle(a,"display","block")})}
function show$$module$selections(a,b){var c=Ranges$$module$selections.box(Ranges$$module$selections.fromBoundaries(b,b));Maps$$module$selections.extend(a.style,{top:c.top+"px",left:c.left+"px",height:c.height+"px",width:"1px",display:"block"})}function stylesFromOverrides$$module$selections(a){var b={};b.padding=a.bold?"1px":"0px";b[Browsers$$module$selections.VENDOR_PREFIX+"transform"]=a.italic?"rotate(16deg)":"";b.background=a.color||"black";return b}
function isReversed$$module$selections(a,b,c,d){return a===c&&b>d||Dom$$module$selections.followedBy(c,a)}function up$$module$selections(a,b,c){return Ranges$$module$selections.fromPosition(a.left,a.top-b,c)}function down$$module$selections(a,b,c){return Ranges$$module$selections.fromPosition(a.left,a.top+a.height+b,c)}
function mergeRanges$$module$selections(a,b,c){var d,e,f;"start"===c?(d=a.startContainer,e=a.startOffset,f=b.endContainer,a=b.endOffset):(d=b.startContainer,e=b.startOffset,f=a.endContainer,a=a.endOffset);return isReversed$$module$selections(d,e,f,a)?{range:Ranges$$module$selections.create(f,a,d,e),focus:"start"===c?"end":"start"}:{range:Ranges$$module$selections.create(d,e,f,a),focus:c}}
function climb$$module$selections(a,b,c,d){var e="start"===c?Ranges$$module$selections.collapseToStart(b.cloneRange()):Ranges$$module$selections.collapseToEnd(b.cloneRange()),f=Ranges$$module$selections.box(e),g=b.commonAncestorContainer.ownerDocument,h=Dom$$module$selections.documentWindow(g),k=h.pageXOffset-g.body.clientLeft;f.top-=h.pageYOffset-g.body.clientTop;f.left-=k;k=h=f.height/2;d="up"===d?up$$module$selections:down$$module$selections;for(var l=d(f,k,g);l&&Ranges$$module$selections.equals(l,
e);)k+=h,l=d(f,k,g);if(l)return Events$$module$selections.hasKeyModifier(a,"shift")?mergeRanges$$module$selections(l,b,c):{range:l,focus:c}}
function step$$module$selections(a,b,c,d){var e,f,g=Events$$module$selections.hasKeyModifier(a,"shift"),h=b.cloneRange(),k="left"===d?Traversing$$module$selections.prev:Traversing$$module$selections.next;if(b.collapsed||!g)c="left"===d?"start":"end";"start"===c?(e=Boundaries$$module$selections.fromRangeStart,d=Boundaries$$module$selections.setRangeStart,f=Ranges$$module$selections.collapseToStart):(e=Boundaries$$module$selections.fromRangeEnd,d=Boundaries$$module$selections.setRangeEnd,f=Ranges$$module$selections.collapseToEnd);
if(b.collapsed||g)Ranges$$module$selections.envelopeInvisibleCharacters(b),a=Events$$module$selections.hasKeyModifier(a,"ctrl")||Events$$module$selections.hasKeyModifier(a,"alt")?"word":"visual",b=e(b),d(h,k(b,a)||b);g||f(h);return{range:h,focus:c}}var movements$$module$selections={};movements$$module$selections[Keys$$module$selections.CODES.up]=function(a,b,c){return climb$$module$selections(a,b,c,"up")};
movements$$module$selections[Keys$$module$selections.CODES.down]=function(a,b,c){return climb$$module$selections(a,b,c,"down")};movements$$module$selections[Keys$$module$selections.CODES.left]=function(a,b,c){return step$$module$selections(a,b,c,"left")};movements$$module$selections[Keys$$module$selections.CODES.right]=function(a,b,c){return step$$module$selections(a,b,c,"right")};function keypress$$module$selections(a,b,c){return{range:b,focus:c}}
function keydown$$module$selections(a,b,c){return(movements$$module$selections[a.which]||keypress$$module$selections)(a,b,c)}function dblclick$$module$selections(a,b,c,d,e){return{range:Ranges$$module$selections.expand(b,"word"),focus:"end"}}function tplclick$$module$selections(a,b,c,d,e){return{range:Ranges$$module$selections.expand(b,"block"),focus:"end"}}function mouseup$$module$selections(a,b,c,d,e){return e?mergeRanges$$module$selections(b,d,c):{range:b,focus:c}}
function mousedown$$module$selections(a,b,c,d,e){if(!e)return{range:b,focus:c};a=b.startContainer;b=b.startOffset;"start"===c?(e=d.endContainer,d=d.endOffset):(e=d.startContainer,d=d.startOffset);isReversed$$module$selections(a,b,e,d)?(c="end",d=Ranges$$module$selections.create(e,d,a,b)):(c="start",d=Ranges$$module$selections.create(a,b,e,d));return{range:d,focus:c}}function dragndrop$$module$selections(a,b){return{range:b,focus:"end"}}
function resize$$module$selections(a,b,c){return{range:b,focus:c}}function paste$$module$selections(a,b,c){return{range:a.range,focus:"end"}}
var handlers$$module$selections={keydown:keydown$$module$selections,keypress:keypress$$module$selections,dblclick:dblclick$$module$selections,tplclick:tplclick$$module$selections,mouseup:mouseup$$module$selections,mousedown:mousedown$$module$selections,mousemove:Fn$$module$selections.returnFalse,dragover:dragndrop$$module$selections,drop:dragndrop$$module$selections,resize:resize$$module$selections,paste:paste$$module$selections};
function normalizeEventType$$module$selections(a,b,c,d,e,f,g){if(!Mouse$$module$selections.EVENTS[a.type])return a.type;var h="mousedown"===a.type;if(!(b&&c&&h&&500>new Date-e)&&h)return a.type;if(f)return h?"tplclick":"dblclick";if(g)return"tplclick";if(!h)return a.type;c="start"===d?Ranges$$module$selections.collapseToStart(c.cloneRange()):Ranges$$module$selections.collapseToEnd(c.cloneRange());return Ranges$$module$selections.equals(b,c)?"dblclick":a.type}
function process$$module$selections(a,b,c,d,e,f){if(a=handlers$$module$selections[b](a,c,d,e,f))a.doubleclicking="dblclick"===b,a.tripleclicking="tplclick"===b;return a}
function blinking$$module$selections(a){function b(c,d,k){Animation$$module$selections.animate(c,d,Animation$$module$selections.easeLinear,k,function(c,d,g){if(!f)return!0;Dom$$module$selections.setStyle(a,"opacity",c);1>d||(0===c?e.push(setTimeout(function(){b(0,1,100)},300)):1===c&&e.push(setTimeout(function(){b(1,0,100)},500)))})}function c(){f=!1;Dom$$module$selections.setStyle(a,"opacity",1);e.forEach(clearTimeout);e=[]}function d(){c();f=!0;e.push(setTimeout(function(){b(1,0,100)},500))}var e=
[],f=!0;return{stop:c,start:d,restart:function(){c();e.push(setTimeout(d,300))}}}
function Context$$module$selections(a){var b=a.createElement("div");Maps$$module$selections.extend(b.style,{color:"#000",zIndex:"9999",display:"none",position:"absolute"});Dom$$module$selections.addClass(b,"aloha-caret","aloha-ephemera");Dom$$module$selections.insert(b,a.body,!0);return{caretOpacity:0,blinking:blinking$$module$selections(b),caret:b,range:null,focus:"end",dragging:!1,mousedown:!1,doubleclicking:!1,tripleclicking:!1,formatting:[],overrides:[]}}
function newContext$$module$selections(a,b,c){c=Maps$$module$selections.extend({},b,c);switch(a.type){case "mousedown":c.time=new Date;c.dragging=!1;c.mousedown=!0;break;case "mouseup":c.mousedown=!1;break;case "mousemove":c.dragging=b.mousedown}return c}
function fromEvent$$module$selections(a){var b=a.nativeEvent;return Mouse$$module$selections.EVENTS[a.type]?Ranges$$module$selections.fromPosition(b.clientX,b.clientY,(b.target||b.srcElement).ownerDocument):a.range?a.range:Ranges$$module$selections.get((b.target||b.srcElement).ownerDocument)}
function scrollTo$$module$selections(a){var b=Ranges$$module$selections.box(Ranges$$module$selections.fromBoundaries(a,a));Dom$$module$selections.documentWindow(Boundaries$$module$selections.document(a)).scrollTo(b.left,b.top)}
function ensureInViewport$$module$selections(a){var b=Ranges$$module$selections.box(Ranges$$module$selections.fromBoundaries(a,a)),c=Boundaries$$module$selections.document(a);a=Dom$$module$selections.documentWindow(c);var d=a.pageYOffset-c.body.clientTop,c=a.pageXOffset-c.body.clientLeft,e=a.innerHeight,f=a.innerWidth,g=b.height,h=b.top,b=b.left,k=0,l=0;h<d?k=h-g:h>d+e&&(k=h-e+g+g);b<c?l=b-g:b>c+f&&(l=b-f+g+g);(k||l)&&a.scrollTo(l||c,k||d)}
function mapOverrides$$module$selections(a,b,c){a=Maps$$module$selections.merge(Maps$$module$selections.mapTuples(a),Maps$$module$selections.mapTuples(Overrides$$module$selections.harvest(c)),Maps$$module$selections.mapTuples(b));a.color||(a.color=Dom$$module$selections.getComputedStyle(Dom$$module$selections.isTextNode(c)?c.parentNode:c,"color"));return a}
function handle$$module$selections(a){if(!a.editable||!handlers$$module$selections[a.type])return a;var b,c=a.editor.selectionContext;if("mousemove"===a.type)return b=a.editor.selectionContext=newContext$$module$selections(a,c),!c.dragging&&b.dragging&&(Dom$$module$selections.setStyle(b.caret,"display","none"),b.blinking.stop()),a;"mousedown"===a.type?c.blinking.stop():"mouseup"===a.type?c.blinking.start():"keydown"===a.type&&c.blinking.restart();Dom$$module$selections.setStyle(c.caret,"display",
"none");var d=fromEvent$$module$selections(a);if(!d)return a;var e=normalizeEventType$$module$selections(a,d,c.range,c.focus,c.time,c.doubleclicking,c.tripleclicking);b=newContext$$module$selections(a,c,process$$module$selections(a,e,d,c.focus,c.range,c.dragging||Events$$module$selections.hasKeyModifier(a,"shift")));a.editor.selectionContext=b;d=b.range;if(!Dom$$module$selections.isEditableNode(d.commonAncestorContainer))return a;(c="keydown"===e&&movements$$module$selections[a.which]||a.editor.CARET_CLASS===
a.nativeEvent.target.className)&&a.nativeEvent.preventDefault();!c&&"mousedown"===e&&Events$$module$selections.hasKeyModifier(a,"shift")&&(d="start"===b.focus?Ranges$$module$selections.collapseToEnd(d):Ranges$$module$selections.collapseToStart(d));a.range=d;return a}
function isCaretMovingEvent$$module$selections(a){if("keypress"===a.type||"paste"===a.type||Keys$$module$selections.ARROWS[a.which]||Keys$$module$selections.CODES.undo==a.which&&("meta"===a.meta||"ctrl"===a.meta||"shift"===a.meta))return!0}
function select$$module$selections(a){var b=a.editor.selectionContext;if(b.range&&"mousemove"!==a.type){var c=Boundaries$$module$selections.fromRange(b.range),d=c["start"===b.focus?0:1];show$$module$selections(b.caret,d);Maps$$module$selections.extend(b.caret.style,stylesFromOverrides$$module$selections(mapOverrides$$module$selections(b.formatting,b.overrides,Boundaries$$module$selections.container(d))));Boundaries$$module$selections.select(c[0],c[1]);isCaretMovingEvent$$module$selections(a)&&ensureInViewport$$module$selections(d)}}
var module$selections={show:show$$module$selections,select:select$$module$selections,handle:handle$$module$selections,Context:Context$$module$selections,hideCarets:hideCarets$$module$selections,unhideCarets:unhideCarets$$module$selections,scrollTo:scrollTo$$module$selections};var Dom$$module$dragdrop=module$dom,Maps$$module$dragdrop=module$maps,Ranges$$module$dragdrop=module$ranges,Editing$$module$dragdrop=module$editing,Selections$$module$dragdrop=module$selections,DRAGGING_CARET_OFFSET$$module$dragdrop=-10,DEFAULTS$$module$dragdrop={dropEffect:"none",element:null,"target ":null,data:["text/plain",""]};function Context$$module$dragdrop(a){return Maps$$module$dragdrop.merge({},DEFAULTS$$module$dragdrop,a)}
function isDraggable$$module$dragdrop(a){if(!Dom$$module$dragdrop.isElementNode(a))return!1;var b=a.getAttribute("draggable");return"false"===b?!1:"true"===b||"IMG"===a.nodeName?!0:"A"===a.nodeName&&a.getAttribute("href")}function moveNode$$module$dragdrop(a,b){var c=b.previousSibling;Editing$$module$dragdrop.insert(a,b);c&&c.nextSibling&&Dom$$module$dragdrop.merge(c,c.nextSibling);Ranges$$module$dragdrop.collapseToEnd(a)}
function handleDragStart$$module$dragdrop(a){var b=a.editor.dndContext;a.nativeEvent.dataTransfer.setData(b.data[0],b.data[1])}function handleDragOver$$module$dragdrop(a){var b=a.nativeEvent,c=b.target.ownerDocument,d=b.clientX+DRAGGING_CARET_OFFSET$$module$dragdrop,e=b.clientY+DRAGGING_CARET_OFFSET$$module$dragdrop,f=Selections$$module$dragdrop.hideCarets(c);a.range=Ranges$$module$dragdrop.fromPosition(d,e,c);Selections$$module$dragdrop.unhideCarets(f);b.preventDefault()}
function handleDrop$$module$dragdrop(a){var b=a.nativeEvent,c=b.target.ownerDocument,d=b.clientX+DRAGGING_CARET_OFFSET$$module$dragdrop+8,e=b.clientY+DRAGGING_CARET_OFFSET$$module$dragdrop,f=Selections$$module$dragdrop.hideCarets(c);a.range=Ranges$$module$dragdrop.fromPosition(d,e,c);Selections$$module$dragdrop.unhideCarets(f);a.range&&moveNode$$module$dragdrop(a.range,a.editor.dndContext.element);b.stopPropagation&&b.stopPropagation();b.preventDefault()}
var handlers$$module$dragdrop={dragstart:handleDragStart$$module$dragdrop,dragover:handleDragOver$$module$dragdrop,drop:handleDrop$$module$dragdrop};function handle$$module$dragdrop(a){if(a.editor.dndContext&&handlers$$module$dragdrop[a.type])handlers$$module$dragdrop[a.type](a);return a}var module$dragdrop={handle:handle$$module$dragdrop,Context:Context$$module$dragdrop,isDraggable:isDraggable$$module$dragdrop};var Dom$$module$blocks=module$dom,Events$$module$blocks=module$events,DragDrop$$module$blocks=module$dragdrop,Browsers$$module$blocks=module$browsers,Editables$$module$blocks=module$editables,draggingStyles$$module$blocks=[[Browsers$$module$blocks.VENDOR_PREFIX+"transition",Browsers$$module$blocks.VENDOR_PREFIX+"transform 0.2s ease-out"],[Browsers$$module$blocks.VENDOR_PREFIX+"transform","scale(0.9)"],["opacity","0.5"]];
function read$$module$blocks(a){return JSON.parse(a.getAttribute("data-aloha"))}function write$$module$blocks(a,b){a.setAttribute("data-aloha",JSON.stringify(b))}function copyContext$$module$blocks(a){return DragDrop$$module$blocks.Context({dropEffect:"copy",element:a.cloneNode(!0),target:a,data:["text/html",a.outerHTML]})}function moveContext$$module$blocks(a){return DragDrop$$module$blocks.Context({dropEffect:"move",element:a,target:a,data:["text/html",a.outerHTML]})}
function isBlockEvent$$module$blocks(a){return"IMG"===a.nativeEvent.target.nodeName||Dom$$module$blocks.hasClass(a.nativeEvent.target,a.editor.BLOCK_CLASS)}function handleAloha$$module$blocks(a){a=a.editable.elem.querySelectorAll(".aloha-block,img");[].forEach.call(a,function(a){a.setAttribute("contentEditable","false");Dom$$module$blocks.setStyle(a,"cursor",Browsers$$module$blocks.VENDOR_PREFIX+"grab")})}
function handleMouseDown$$module$blocks(a){var b=a.nativeEvent.target;isBlockEvent$$module$blocks(a)&&DragDrop$$module$blocks.isDraggable(b)&&(a.editor.dndContext=Events$$module$blocks.hasKeyModifier(a,"ctrl")?copyContext$$module$blocks(b):moveContext$$module$blocks(b))}
function handleDragStart$$module$blocks(a){if(isBlockEvent$$module$blocks(a)){var b=a.editor.dndContext;draggingStyles$$module$blocks.forEach(function(a){Dom$$module$blocks.setStyle(b.target,a[0],a[1]);Dom$$module$blocks.setStyle(b.element,a[0],a[1])})}}
function handleDragEnd$$module$blocks(a){if(isBlockEvent$$module$blocks(a)){var b=a.editor.dndContext;draggingStyles$$module$blocks.forEach(function(a){Dom$$module$blocks.setStyle(b.target,a[0],"");Dom$$module$blocks.setStyle(b.element,a[0],"")})}}function handleDragOver$$module$blocks(a){var b=Dom$$module$blocks.editingHost(a.editor.dndContext.element.parentNode);a.editable=b&&Editables$$module$blocks.fromElem(a.editor,b)}
var handlers$$module$blocks={aloha:handleAloha$$module$blocks,mousedown:handleMouseDown$$module$blocks,dragstart:handleDragStart$$module$blocks,dragend:handleDragEnd$$module$blocks,dragover:handleDragOver$$module$blocks};function handle$$module$blocks(a){if(handlers$$module$blocks[a.type])handlers$$module$blocks[a.type](a);return a}var module$blocks={read:read$$module$blocks,write:write$$module$blocks,handle:handle$$module$blocks};var Dom$$module$paste=module$dom,Html$$module$paste=module$html,Undo$$module$paste=module$undo,Arrays$$module$paste=module$arrays,Events$$module$paste=module$events,Ranges$$module$paste=module$ranges,Content$$module$paste=module$content,Editing$$module$paste=module$editing,Mutation$$module$paste=module$mutation,Transform$$module$paste=module$transform,Boundaries$$module$paste=module$boundaries,Selections$$module$paste=module$selections,WordTransform$$module$paste=module$transform$ms_word,Fn$$module$paste=
module$functions,Mime$$module$paste={plain:"text/plain",html:"text/html"};function isPasteEvent$$module$paste(a){return"paste"===a.type||void 0!==a.clipboardData}function holds$$module$paste(a,b){return Arrays$$module$paste.contains(a.clipboardData.types,b)}function getData$$module$paste(a,b){return a.clipboardData.getData(b)}function moveBeforeBoundary$$module$paste(a,b){return Mutation$$module$paste.insertNodeAtBoundary(b,a,!0)}
function insert$$module$paste(a,b,c){var d=Boundaries$$module$paste.document(a),e=Editing$$module$paste.remove(Ranges$$module$paste.fromBoundaries(a,b))[0];b=Html$$module$paste.parse(c,d);a=Dom$$module$paste.children(b);if(0===a.length)return e;Dom$$module$paste.setAttr(b,"contentEditable",!0);b=a[0];Dom$$module$paste.isTextNode(b)||Html$$module$paste.isVoidType(b)||Html$$module$paste.isGroupContainer(b)||(a=Dom$$module$paste.children(b).concat(a.slice(1)));if(0===a.length)return e;a.forEach(function(a){Html$$module$paste.hasLinebreakingStyle(a)&&
(e=Mutation$$module$paste.splitBoundaryUntil(e,function(b){b=Boundaries$$module$paste.container(b);return Dom$$module$paste.isEditingHost(b.parentNode)||Content$$module$paste.allowsNesting(b.nodeName,a.nodeName)}));e=Mutation$$module$paste.insertNodeAtBoundary(a,e,!0)});a=Arrays$$module$paste.last(a);if("P"===a.nodeName||"DIV"===a.nodeName)b=Boundaries$$module$paste.nextNode(e),Html$$module$paste.hasInlineStyle(b)?Dom$$module$paste.move(Dom$$module$paste.nodeAndNextSiblings(b,Html$$module$paste.hasLinebreakingStyle),
a):Html$$module$paste.isVoidType(b)||Html$$module$paste.isGroupContainer(b)||(e=Dom$$module$paste.children(a).reduce(moveBeforeBoundary$$module$paste,Boundaries$$module$paste.create(b,0)),Dom$$module$paste.remove(a));return e}
function extractContent$$module$paste(a,b){if(holds$$module$paste(a,Mime$$module$paste.html)){var c=getData$$module$paste(a,Mime$$module$paste.html);return WordTransform$$module$paste.isMSWordContent(c,b)?Transform$$module$paste.html(Transform$$module$paste.msword(c,b),b):Transform$$module$paste.html(c,b)}return holds$$module$paste(a,Mime$$module$paste.plain)?Transform$$module$paste.plain(getData$$module$paste(a,Mime$$module$paste.plain),b):""}
function handle$$module$paste(a){var b=a.nativeEvent;if(!b||!isPasteEvent$$module$paste(b))return a;Events$$module$paste.suppress(b);var c=Boundaries$$module$paste.get((b.target||b.srcElement).ownerDocument);if(!c)return a;var d=extractContent$$module$paste(b,a.editable.elem.ownerDocument);if(!d)return a;Undo$$module$paste.capture(a.editable.undoContext,{meta:{type:"paste"}},function(){var b=insert$$module$paste(c[0],c[1],d);a.range=Ranges$$module$paste.fromBoundaries(b,b)});return a}
var module$paste={handle:handle$$module$paste};var Boundaries$$module$image=module$boundaries,Dom$$module$image=module$dom,ImageSelection$$module$image=module$image$image_selection,Paste$$module$image=module$paste,Ranges$$module$image=module$ranges;function setImageAttributes$$module$image(a,b){Object.keys(b).forEach(function(c){Dom$$module$image.setAttr(a,c,b[c])})}function createImage$$module$image(a,b){var c=b.createElement("img");setImageAttributes$$module$image(c,a);return c}
function insertFromRange$$module$image(a,b){var c=a.commonAncestorContainer.ownerDocument,d=createImage$$module$image(b,c),e=c.createElement("p");e.appendChild(d);d=c.createDocumentFragment();d.appendChild(e);Paste$$module$image.insertIntoDomFromRange(a,d,{},c)}function insert$$module$image(a,b){var c=Ranges$$module$image.get(b);c&&insertFromRange$$module$image(c,a)}
function setAttributesFromRange$$module$image(a,b){var c=Boundaries$$module$image.fromRange(a);ImageSelection$$module$image.imagesFromBoundaries(c).forEach(function(a){setImageAttributes$$module$image(a,b)})}function setAttributes$$module$image(a,b){var c=Ranges$$module$image.get(b);c&&setAttributesFromRange$$module$image(c,a)}var module$image={insert:insert$$module$image,insertFromRange:insertFromRange$$module$image,setAttributesFromRange:setAttributesFromRange$$module$image,setAttributes:setAttributes$$module$image};var Dom$$module$typing=module$dom,Keys$$module$typing=module$keys,Html$$module$typing=module$html,Maps$$module$typing=module$maps,Undo$$module$typing=module$undo,Ranges$$module$typing=module$ranges,Editing$$module$typing=module$editing,Mutation$$module$typing=module$mutation,Traversing$$module$typing=module$traversing,Boundaries$$module$typing=module$boundaries,Overrides$$module$typing=module$overrides,Fn$$module$typing=module$functions;
function undoable$$module$typing(a,b,c){var d=b.range;Undo$$module$typing.capture(b.editable.undoContext,{meta:{type:a},oldRange:d},function(){d=c();return{newRange:d}});return d}
function remove$$module$typing(a,b){var c=b.range,d;c.collapsed&&(a?(d=Boundaries$$module$typing.fromRangeEnd(c),Boundaries$$module$typing.setRangeEnd(c,Traversing$$module$typing.next(d))):(d=Boundaries$$module$typing.fromRangeStart(c),Boundaries$$module$typing.setRangeStart(c,Traversing$$module$typing.prev(d))));Editing$$module$typing.remove(Ranges$$module$typing.envelopeInvisibleCharacters(c),b.editable);Html$$module$typing.prop(c.commonAncestorContainer);return c}
function format$$module$typing(a,b){var c=Boundaries$$module$typing.fromRange(b.range);if(Html$$module$typing.isBoundariesEqual(c[0],c[1])){var d=Overrides$$module$typing.nodeToState[a];if(d){var e=b.editor.selectionContext;e.overrides=e.overrides.concat([Overrides$$module$typing.toggle(Overrides$$module$typing.harvest(Boundaries$$module$typing.container(c[0])),d,!0)])}return b.range}c=Editing$$module$typing.format(a,c[0],c[1]);return Ranges$$module$typing.fromBoundaries(c[0],c[1])}
function breakline$$module$typing(a,b){a||(b.editor.selectionContext.formatting=b.editor.selectionContext.formatting.concat(Overrides$$module$typing.harvest(b.range.startContainer)));Editing$$module$typing.breakline(b.range,b.editable.settings.defaultBlockNodeName,a);return b.range}
function insertText$$module$typing(a){var b=a.editable,c=a.range,d=a.chr,e=Boundaries$$module$typing.fromRangeStart(c);"\t"===d&&(d="\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0");if(" "===d){var f=Dom$$module$typing.upWhile(Boundaries$$module$typing.container(e),Dom$$module$typing.isTextNode),f=Dom$$module$typing.getComputedStyle(f,"white-space");Html$$module$typing.isWhiteSpacePreserveStyle(f)||(d="\u00a0")}e=Overrides$$module$typing.consume(e,a.editor.selectionContext.formatting.concat(a.editor.selectionContext.overrides));
a.editor.selectionContext.overrides=[];a.editor.selectionContext.formatting=[];Boundaries$$module$typing.setRange(c,e,e);a=Undo$$module$typing.pathFromBoundary(b.elem,e);var f=[b.elem.ownerDocument.createTextNode(d)],g=Undo$$module$typing.makeInsertChange(a,f);Undo$$module$typing.capture(b.undoContext,{noObserve:!0},function(){Mutation$$module$typing.insertTextAtBoundary(d,e,!0,[c]);return{changes:[g]}});return c}
function toggleUndo$$module$typing(a,b){a(b.editable.undoContext,b.range,[b.range]);return b.range}function selectEditable$$module$typing(a){var b=Dom$$module$typing.editingHost(a.range.commonAncestorContainer);b&&(a.range=Ranges$$module$typing.fromBoundaries(Boundaries$$module$typing.create(b,0),Boundaries$$module$typing.fromEndOfNode(b)));return a.range}
var deleteBackward$$module$typing={clearOverrides:!0,preventDefault:!0,undo:"delete",mutate:Fn$$module$typing.partial(remove$$module$typing,!1)},deleteForward$$module$typing={clearOverrides:!0,preventDefault:!0,undo:"delete",mutate:Fn$$module$typing.partial(remove$$module$typing,!0)},breakBlock$$module$typing={deleteRange:!0,preventDefault:!0,undo:"enter",mutate:Fn$$module$typing.partial(breakline$$module$typing,!1)},breakLine$$module$typing={deleteRange:!0,preventDefault:!0,undo:"enter",mutate:Fn$$module$typing.partial(breakline$$module$typing,
!0)},formatBold$$module$typing={preventDefault:!0,undo:"bold",mutate:Fn$$module$typing.partial(format$$module$typing,"B")},formatItalic$$module$typing={preventDefault:!0,undo:"italic",mutate:Fn$$module$typing.partial(format$$module$typing,"I")},formatUnderline$$module$typing={preventDefault:!0,undo:"underline",mutate:Fn$$module$typing.partial(format$$module$typing,"U")},inputText$$module$typing={deleteRange:!0,preventDefault:!0,undo:"typing",mutate:insertText$$module$typing},selectAll$$module$typing=
{preventDefault:!0,clearOverrides:!0,mutate:selectEditable$$module$typing},undo$$module$typing={clearOverrides:!0,preventDefault:!0,mutate:Fn$$module$typing.partial(toggleUndo$$module$typing,Undo$$module$typing.undo)},redo$$module$typing={preventDefault:!0,clearOverrides:!0,mutate:Fn$$module$typing.partial(toggleUndo$$module$typing,Undo$$module$typing.redo)},actions$$module$typing={breakBlock:breakBlock$$module$typing,breakLine:breakLine$$module$typing,deleteBackward:deleteBackward$$module$typing,
deleteForward:deleteForward$$module$typing,formatBold:formatBold$$module$typing,formatItalic:formatItalic$$module$typing,inputText:inputText$$module$typing,redo:redo$$module$typing,undo:undo$$module$typing},handlers$$module$typing={keydown:{},keypress:{},keyup:{}};
handlers$$module$typing.keydown[Keys$$module$typing.CODES.up]=handlers$$module$typing.keydown[Keys$$module$typing.CODES.down]=handlers$$module$typing.keydown[Keys$$module$typing.CODES.left]=handlers$$module$typing.keydown[Keys$$module$typing.CODES.right]={clearOverrides:!0};handlers$$module$typing.keydown[Keys$$module$typing.CODES["delete"]]=deleteForward$$module$typing;handlers$$module$typing.keydown[Keys$$module$typing.CODES.backspace]=deleteBackward$$module$typing;
handlers$$module$typing.keydown[Keys$$module$typing.CODES.enter]=breakBlock$$module$typing;handlers$$module$typing.keydown["shift+"+Keys$$module$typing.CODES.enter]=breakLine$$module$typing;handlers$$module$typing.keydown["ctrl+"+Keys$$module$typing.CODES.bold]=handlers$$module$typing.keydown["meta+"+Keys$$module$typing.CODES.bold]=formatBold$$module$typing;
handlers$$module$typing.keydown["ctrl+"+Keys$$module$typing.CODES.italic]=handlers$$module$typing.keydown["meta+"+Keys$$module$typing.CODES.italic]=formatItalic$$module$typing;handlers$$module$typing.keydown["ctrl+"+Keys$$module$typing.CODES.underline]=handlers$$module$typing.keydown["meta+"+Keys$$module$typing.CODES.underline]=formatUnderline$$module$typing;
handlers$$module$typing.keydown["ctrl+"+Keys$$module$typing.CODES.selectAll]=handlers$$module$typing.keydown["meta+"+Keys$$module$typing.CODES.selectAll]=selectAll$$module$typing;handlers$$module$typing.keydown["ctrl+"+Keys$$module$typing.CODES.undo]=handlers$$module$typing.keydown["meta+"+Keys$$module$typing.CODES.undo]=undo$$module$typing;handlers$$module$typing.keydown["ctrl+shift+"+Keys$$module$typing.CODES.undo]=handlers$$module$typing.keydown["meta+shift+"+Keys$$module$typing.CODES.undo]=redo$$module$typing;
handlers$$module$typing.keydown[Keys$$module$typing.CODES.tab]=inputText$$module$typing;handlers$$module$typing.keypress.input=inputText$$module$typing;function handler$$module$typing(a){var b=a.meta?a.meta+"+":"";return handlers$$module$typing[a.type]&&handlers$$module$typing[a.type][b+a.which]||a.isTextInput&&handlers$$module$typing.keypress.input}
function handle$$module$typing(a){if(!a.editable)return a;var b=handler$$module$typing(a);if(!b)return a;var c=a.range;b.preventDefault&&a.nativeEvent.preventDefault();b.clearOverrides&&(a.editor.selectionContext.overrides=[],a.editor.selectionContext.formatting=[]);c&&b.mutate&&(b.undo?undoable$$module$typing(b.undo,a,function(){b.deleteRange&&!c.collapsed&&remove$$module$typing(!1,a);a.range=b.mutate(a);Html$$module$typing.prop(c.commonAncestorContainer)}):a.range=b.mutate(a));return a}
var module$typing={handle:handle$$module$typing,actions:actions$$module$typing};var module$api={},exports$$module$api=module$api,Arrays$$module$api=module$arrays,Blocks$$module$api=module$blocks,Boromir$$module$api=module$boromir,Boundaries$$module$api=module$boundaries,BoundaryMarkers$$module$api=module$boundary_markers,Browsers$$module$api=module$browsers,Colors$$module$api=module$colors,Content$$module$api=module$content,DelayedMap$$module$api=module$delayed_map,Dom$$module$api=module$dom,DragDrop$$module$api=module$dragdrop,Editables$$module$api=module$editables,Editing$$module$api=
module$editing,Events$$module$api=module$events,Formatting$$module$api=module$formatting,Fn$$module$api=module$functions,Html$$module$api=module$html,Images$$module$api=module$image,Keys$$module$api=module$keys,Links$$module$api=module$links,Lists$$module$api=module$lists,Maps$$module$api=module$maps,Mouse$$module$api=module$mouse,Mutation$$module$api=module$mutation,Overrides$$module$api=module$overrides,Paste$$module$api=module$paste,Paths$$module$api=module$paths,Ranges$$module$api=module$ranges,
Record$$module$api=module$record,SelectionChange$$module$api=module$selection_change,Selections$$module$api=module$selections,Strings$$module$api=module$strings,Transform$$module$api=module$transform,Traversing$$module$api=module$traversing,Typing$$module$api=module$typing,Undo$$module$api=module$undo,exports$$module$api={};exports$$module$api.Boromir=Boromir$$module$api;exports$$module$api.DelayedMap=DelayedMap$$module$api;exports$$module$api.Record=Record$$module$api;
exports$$module$api.arrays=Arrays$$module$api;exports$$module$api.arrays.contains=Arrays$$module$api.contains;exports$$module$api.arrays.difference=Arrays$$module$api.difference;exports$$module$api.arrays.equal=Arrays$$module$api.equal;exports$$module$api.arrays.intersect=Arrays$$module$api.intersect;exports$$module$api.arrays.second=Arrays$$module$api.second;exports$$module$api.arrays.last=Arrays$$module$api.last;exports$$module$api.arrays.coerce=Arrays$$module$api.coerce;
exports$$module$api.arrays.mapcat=Arrays$$module$api.mapcat;exports$$module$api.arrays.partition=Arrays$$module$api.partition;exports$$module$api.arrays.some=Arrays$$module$api.some;exports$$module$api.arrays.someIndex=Arrays$$module$api.someIndex;exports$$module$api.arrays.split=Arrays$$module$api.split;exports$$module$api.arrays.unique=Arrays$$module$api.unique;exports$$module$api.blocks=Blocks$$module$api;exports$$module$api.blocks.read=Blocks$$module$api.read;
exports$$module$api.blocks.write=Blocks$$module$api.write;exports$$module$api.blocks.handle=Blocks$$module$api.handle;exports$$module$api.boundaries=Boundaries$$module$api;exports$$module$api.boundaries.get=Boundaries$$module$api.get;exports$$module$api.boundaries.select=Boundaries$$module$api.select;exports$$module$api.boundaries.raw=Boundaries$$module$api.raw;exports$$module$api.boundaries.create=Boundaries$$module$api.create;exports$$module$api.boundaries.normalize=Boundaries$$module$api.normalize;
exports$$module$api.boundaries.equals=Boundaries$$module$api.equals;exports$$module$api.boundaries.container=Boundaries$$module$api.container;exports$$module$api.boundaries.offset=Boundaries$$module$api.offset;exports$$module$api.boundaries.document=Boundaries$$module$api.document;exports$$module$api.boundaries.fromRange=Boundaries$$module$api.fromRange;exports$$module$api.boundaries.fromRanges=Boundaries$$module$api.fromRanges;exports$$module$api.boundaries.fromRangeStart=Boundaries$$module$api.fromRangeStart;
exports$$module$api.boundaries.fromRangeEnd=Boundaries$$module$api.fromRangeEnd;exports$$module$api.boundaries.fromNode=Boundaries$$module$api.fromNode;exports$$module$api.boundaries.fromEndOfNode=Boundaries$$module$api.fromEndOfNode;exports$$module$api.boundaries.setRange=Boundaries$$module$api.setRange;exports$$module$api.boundaries.setRanges=Boundaries$$module$api.setRanges;exports$$module$api.boundaries.setRangeStart=Boundaries$$module$api.setRangeStart;
exports$$module$api.boundaries.setRangeEnd=Boundaries$$module$api.setRangeEnd;exports$$module$api.boundaries.isAtStart=Boundaries$$module$api.isAtStart;exports$$module$api.boundaries.isAtEnd=Boundaries$$module$api.isAtEnd;exports$$module$api.boundaries.isAtRawStart=Boundaries$$module$api.isAtRawStart;exports$$module$api.boundaries.isAtRawEnd=Boundaries$$module$api.isAtRawEnd;exports$$module$api.boundaries.isTextBoundary=Boundaries$$module$api.isTextBoundary;
exports$$module$api.boundaries.isNodeBoundary=Boundaries$$module$api.isNodeBoundary;exports$$module$api.boundaries.next=Boundaries$$module$api.next;exports$$module$api.boundaries.prev=Boundaries$$module$api.prev;exports$$module$api.boundaries.nextRawBoundary=Boundaries$$module$api.nextRawBoundary;exports$$module$api.boundaries.prevRawBoundary=Boundaries$$module$api.prevRawBoundary;exports$$module$api.boundaries.jumpOver=Boundaries$$module$api.jumpOver;exports$$module$api.boundaries.nextWhile=Boundaries$$module$api.nextWhile;
exports$$module$api.boundaries.prevWhile=Boundaries$$module$api.prevWhile;exports$$module$api.boundaries.stepWhile=Boundaries$$module$api.stepWhile;exports$$module$api.boundaries.walkWhile=Boundaries$$module$api.walkWhile;exports$$module$api.boundaries.nextNode=Boundaries$$module$api.nextNode;exports$$module$api.boundaries.prevNode=Boundaries$$module$api.prevNode;exports$$module$api.boundaries.nodeAfter=Boundaries$$module$api.nodeAfter;exports$$module$api.boundaries.nodeBefore=Boundaries$$module$api.nodeBefore;
exports$$module$api.boundaries.precedingTextLength=Boundaries$$module$api.precedingTextLength;exports$$module$api.boundaries.commonContainer=Boundaries$$module$api.commonContainer;exports$$module$api.boundarymarkers=BoundaryMarkers$$module$api;exports$$module$api.boundarymarkers.hint=BoundaryMarkers$$module$api.hint;exports$$module$api.boundarymarkers.insert=BoundaryMarkers$$module$api.insert;exports$$module$api.boundarymarkers.extract=BoundaryMarkers$$module$api.extract;
exports$$module$api.browsers=Browsers$$module$api;exports$$module$api.browsers.ie7=Browsers$$module$api.ie7;exports$$module$api.browsers.chrome=Browsers$$module$api.chrome;exports$$module$api.browsers.webkit=Browsers$$module$api.webkit;exports$$module$api.browsers.safari=Browsers$$module$api.safari;exports$$module$api.browsers.vendor=Browsers$$module$api.vendor;exports$$module$api.browsers.version=Browsers$$module$api.version;exports$$module$api.browsers.VENDOR_PREFIX=Browsers$$module$api.VENDOR_PREFIX;
exports$$module$api.colors=Colors$$module$api;exports$$module$api.colors.hex=Colors$$module$api.hex;exports$$module$api.colors.rgb=Colors$$module$api.rgb;exports$$module$api.colors.cross=Colors$$module$api.cross;exports$$module$api.colors.equals=Colors$$module$api.equals;exports$$module$api.colors.toString=Colors$$module$api.toString;exports$$module$api.content=Content$$module$api;exports$$module$api.content.allowsNesting=Content$$module$api.allowsNesting;
exports$$module$api.content.NODES_BLACKLIST=Content$$module$api.NODES_BLACKLIST;exports$$module$api.content.STYLES_WHITELIST=Content$$module$api.STYLES_WHITELIST;exports$$module$api.content.ATTRIBUTES_WHITELIST=Content$$module$api.ATTRIBUTES_WHITELIST;exports$$module$api.dom=Dom$$module$api;exports$$module$api.dom.Nodes=Dom$$module$api.Nodes;exports$$module$api.dom.offset=Dom$$module$api.offset;exports$$module$api.dom.cloneShallow=Dom$$module$api.cloneShallow;exports$$module$api.dom.clone=Dom$$module$api.clone;
exports$$module$api.dom.text=Dom$$module$api.text;exports$$module$api.dom.children=Dom$$module$api.children;exports$$module$api.dom.nthChild=Dom$$module$api.nthChild;exports$$module$api.dom.numChildren=Dom$$module$api.numChildren;exports$$module$api.dom.nodeIndex=Dom$$module$api.nodeIndex;exports$$module$api.dom.nodeLength=Dom$$module$api.nodeLength;exports$$module$api.dom.hasChildren=Dom$$module$api.hasChildren;exports$$module$api.dom.nodeAtOffset=Dom$$module$api.nodeAtOffset;
exports$$module$api.dom.normalizedNthChild=Dom$$module$api.normalizedNthChild;exports$$module$api.dom.normalizedNodeIndex=Dom$$module$api.normalizedNodeIndex;exports$$module$api.dom.realFromNormalizedIndex=Dom$$module$api.realFromNormalizedIndex;exports$$module$api.dom.normalizedNumChildren=Dom$$module$api.normalizedNumChildren;exports$$module$api.dom.isTextNode=Dom$$module$api.isTextNode;exports$$module$api.dom.isElementNode=Dom$$module$api.isElementNode;exports$$module$api.dom.isFragmentNode=Dom$$module$api.isFragmentNode;
exports$$module$api.dom.isEmptyTextNode=Dom$$module$api.isEmptyTextNode;exports$$module$api.dom.isSameNode=Dom$$module$api.isSameNode;exports$$module$api.dom.equals=Dom$$module$api.equals;exports$$module$api.dom.contains=Dom$$module$api.contains;exports$$module$api.dom.followedBy=Dom$$module$api.followedBy;exports$$module$api.dom.hasText=Dom$$module$api.hasText;exports$$module$api.dom.outerHtml=Dom$$module$api.outerHtml;exports$$module$api.dom.append=Dom$$module$api.append;
exports$$module$api.dom.merge=Dom$$module$api.merge;exports$$module$api.dom.moveNextAll=Dom$$module$api.moveNextAll;exports$$module$api.dom.moveBefore=Dom$$module$api.moveBefore;exports$$module$api.dom.moveAfter=Dom$$module$api.moveAfter;exports$$module$api.dom.move=Dom$$module$api.move;exports$$module$api.dom.copy=Dom$$module$api.copy;exports$$module$api.dom.wrap=Dom$$module$api.wrap;exports$$module$api.dom.wrapWith=Dom$$module$api.wrapWith;exports$$module$api.dom.insert=Dom$$module$api.insert;
exports$$module$api.dom.insertAfter=Dom$$module$api.insertAfter;exports$$module$api.dom.replace=Dom$$module$api.replace;exports$$module$api.dom.replaceShallow=Dom$$module$api.replaceShallow;exports$$module$api.dom.remove=Dom$$module$api.remove;exports$$module$api.dom.removeShallow=Dom$$module$api.removeShallow;exports$$module$api.dom.removeChildren=Dom$$module$api.removeChildren;exports$$module$api.dom.addClass=Dom$$module$api.addClass;exports$$module$api.dom.removeClass=Dom$$module$api.removeClass;
exports$$module$api.dom.hasClass=Dom$$module$api.hasClass;exports$$module$api.dom.attrNames=Dom$$module$api.attrNames;exports$$module$api.dom.hasAttrs=Dom$$module$api.hasAttrs;exports$$module$api.dom.attrs=Dom$$module$api.attrs;exports$$module$api.dom.setAttr=Dom$$module$api.setAttr;exports$$module$api.dom.setAttrNS=Dom$$module$api.setAttrNS;exports$$module$api.dom.getAttr=Dom$$module$api.getAttr;exports$$module$api.dom.getAttrNS=Dom$$module$api.getAttrNS;exports$$module$api.dom.removeAttr=Dom$$module$api.removeAttr;
exports$$module$api.dom.removeAttrNS=Dom$$module$api.removeAttrNS;exports$$module$api.dom.removeAttrs=Dom$$module$api.removeAttrs;exports$$module$api.dom.removeStyle=Dom$$module$api.removeStyle;exports$$module$api.dom.setStyle=Dom$$module$api.setStyle;exports$$module$api.dom.getStyle=Dom$$module$api.getStyle;exports$$module$api.dom.getComputedStyle=Dom$$module$api.getComputedStyle;exports$$module$api.dom.getComputedStyles=Dom$$module$api.getComputedStyles;exports$$module$api.dom.query=Dom$$module$api.query;
exports$$module$api.dom.nextNonAncestor=Dom$$module$api.nextNonAncestor;exports$$module$api.dom.nextWhile=Dom$$module$api.nextWhile;exports$$module$api.dom.nextUntil=Dom$$module$api.nextUntil;exports$$module$api.dom.nextSibling=Dom$$module$api.nextSibling;exports$$module$api.dom.nextSiblings=Dom$$module$api.nextSiblings;exports$$module$api.dom.prevWhile=Dom$$module$api.prevWhile;exports$$module$api.dom.prevUntil=Dom$$module$api.prevUntil;exports$$module$api.dom.prevSibling=Dom$$module$api.prevSibling;
exports$$module$api.dom.prevSiblings=Dom$$module$api.prevSiblings;exports$$module$api.dom.nodeAndNextSiblings=Dom$$module$api.nodeAndNextSiblings;exports$$module$api.dom.nodeAndPrevSiblings=Dom$$module$api.nodeAndPrevSiblings;exports$$module$api.dom.walk=Dom$$module$api.walk;exports$$module$api.dom.walkRec=Dom$$module$api.walkRec;exports$$module$api.dom.walkUntilNode=Dom$$module$api.walkUntilNode;exports$$module$api.dom.forward=Dom$$module$api.forward;exports$$module$api.dom.backward=Dom$$module$api.backward;
exports$$module$api.dom.findForward=Dom$$module$api.findForward;exports$$module$api.dom.findBackward=Dom$$module$api.findBackward;exports$$module$api.dom.upWhile=Dom$$module$api.upWhile;exports$$module$api.dom.climbUntil=Dom$$module$api.climbUntil;exports$$module$api.dom.childAndParentsUntil=Dom$$module$api.childAndParentsUntil;exports$$module$api.dom.childAndParentsUntilIncl=Dom$$module$api.childAndParentsUntilIncl;exports$$module$api.dom.childAndParentsUntilNode=Dom$$module$api.childAndParentsUntilNode;
exports$$module$api.dom.childAndParentsUntilInclNode=Dom$$module$api.childAndParentsUntilInclNode;exports$$module$api.dom.stringify=Dom$$module$api.stringify;exports$$module$api.dom.stringifyReplacer=Dom$$module$api.stringifyReplacer;exports$$module$api.dom.parseReviver=Dom$$module$api.parseReviver;exports$$module$api.dom.ensureExpandoId=Dom$$module$api.ensureExpandoId;exports$$module$api.dom.enableSelection=Dom$$module$api.enableSelection;exports$$module$api.dom.disableSelection=Dom$$module$api.disableSelection;
exports$$module$api.dom.isEditable=Dom$$module$api.isEditable;exports$$module$api.dom.isEditableNode=Dom$$module$api.isEditableNode;exports$$module$api.dom.isEditingHost=Dom$$module$api.isEditingHost;exports$$module$api.dom.isContentEditable=Dom$$module$api.isContentEditable;exports$$module$api.dom.documentWindow=Dom$$module$api.documentWindow;exports$$module$api.dom.editingHost=Dom$$module$api.editingHost;exports$$module$api.dom.editableParent=Dom$$module$api.editableParent;
exports$$module$api.dom.scrollTop=Dom$$module$api.scrollTop;exports$$module$api.dom.scrollLeft=Dom$$module$api.scrollLeft;exports$$module$api.dragdrop=DragDrop$$module$api;exports$$module$api.dragdrop.handle=DragDrop$$module$api.handle;exports$$module$api.dragdrop.Context=DragDrop$$module$api.Context;exports$$module$api.dragdrop.isDraggable=DragDrop$$module$api.isDraggable;exports$$module$api.editables=Editables$$module$api;exports$$module$api.editables.Editable=Editables$$module$api.Editable;
exports$$module$api.editables.fromElem=Editables$$module$api.fromElem;exports$$module$api.editables.fromBoundary=Editables$$module$api.fromBoundary;exports$$module$api.editables.assocIntoEditor=Editables$$module$api.assocIntoEditor;exports$$module$api.editables.dissocFromEditor=Editables$$module$api.dissocFromEditor;exports$$module$api.editables.close=Editables$$module$api.close;exports$$module$api.editables.handle=Editables$$module$api.handle;exports$$module$api.editing=Editing$$module$api;
exports$$module$api.editing.wrap=Editing$$module$api.wrap;exports$$module$api.editing.format=Editing$$module$api.format;exports$$module$api.editing.style=Editing$$module$api.style;exports$$module$api.editing.split=Editing$$module$api.split;exports$$module$api.editing.remove=Editing$$module$api.remove;exports$$module$api.editing.breakline=Editing$$module$api.breakline;exports$$module$api.editing.insert=Editing$$module$api.insert;exports$$module$api.formatting=Formatting$$module$api;
exports$$module$api.formatting.format=Formatting$$module$api.format;exports$$module$api.events=Events$$module$api;exports$$module$api.events.add=Events$$module$api.add;exports$$module$api.events.remove=Events$$module$api.remove;exports$$module$api.events.setup=Events$$module$api.setup;exports$$module$api.events.hasKeyModifier=Events$$module$api.hasKeyModifier;exports$$module$api.events.dispatch=Events$$module$api.dispatch;exports$$module$api.events.nextTick=Events$$module$api.nextTick;
exports$$module$api.events.preventDefault=Events$$module$api.preventDefault;exports$$module$api.events.stopPropagation=Events$$module$api.stopPropagation;exports$$module$api.events.suppress=Events$$module$api.suppress;exports$$module$api.fn=Fn$$module$api;exports$$module$api.fn.identity=Fn$$module$api.identity;exports$$module$api.fn.noop=Fn$$module$api.noop;exports$$module$api.fn.returnTrue=Fn$$module$api.returnTrue;exports$$module$api.fn.returnFalse=Fn$$module$api.returnFalse;
exports$$module$api.fn.complement=Fn$$module$api.complement;exports$$module$api.fn.partial=Fn$$module$api.partial;exports$$module$api.fn.outparameter=Fn$$module$api.outparameter;exports$$module$api.fn.strictEquals=Fn$$module$api.strictEquals;exports$$module$api.fn.comp=Fn$$module$api.comp;exports$$module$api.fn.and=Fn$$module$api.and;exports$$module$api.fn.constantly=Fn$$module$api.constantly;exports$$module$api.fn.is=Fn$$module$api.is;exports$$module$api.fn.isNou=Fn$$module$api.isNou;
exports$$module$api.fn.asMethod=Fn$$module$api.asMethod;exports$$module$api.fn.extendType=Fn$$module$api.extendType;exports$$module$api.html=Html$$module$api;exports$$module$api.html.isRendered=Html$$module$api.isRendered;exports$$module$api.html.isUnrendered=Html$$module$api.isUnrendered;exports$$module$api.html.isUnrenderedWhitespace=Html$$module$api.isUnrenderedWhitespace;exports$$module$api.html.parse=Html$$module$api.parse;exports$$module$api.html.isVoidType=Html$$module$api.isVoidType;
exports$$module$api.html.isStyleInherited=Html$$module$api.isStyleInherited;exports$$module$api.html.isWhiteSpacePreserveStyle=Html$$module$api.isWhiteSpacePreserveStyle;exports$$module$api.html.hasBlockStyle=Html$$module$api.hasBlockStyle;exports$$module$api.html.hasInlineStyle=Html$$module$api.hasInlineStyle;exports$$module$api.html.hasLinebreakingStyle=Html$$module$api.hasLinebreakingStyle;exports$$module$api.html.prop=Html$$module$api.prop;exports$$module$api.html.insertBreak=Html$$module$api.insertBreak;
exports$$module$api.html.removeBreak=Html$$module$api.removeBreak;exports$$module$api.html.insertLineBreak=Html$$module$api.insertLineBreak;exports$$module$api.html.prev=Html$$module$api.prev;exports$$module$api.html.next=Html$$module$api.next;exports$$module$api.html.prevNode=Html$$module$api.prevNode;exports$$module$api.html.nextNode=Html$$module$api.nextNode;exports$$module$api.html.prevSignificantOffset=Html$$module$api.prevSignificantOffset;exports$$module$api.html.nextSignificantOffset=Html$$module$api.nextSignificantOffset;
exports$$module$api.html.prevSignificantBoundary=Html$$module$api.prevSignificantBoundary;exports$$module$api.html.nextSignificantBoundary=Html$$module$api.nextSignificantBoundary;exports$$module$api.html.isAtStart=Html$$module$api.isAtStart;exports$$module$api.html.isAtEnd=Html$$module$api.isAtEnd;exports$$module$api.html.isBoundariesEqual=Html$$module$api.isBoundariesEqual;exports$$module$api.html.isBlockNode=Html$$module$api.isBlockNode;exports$$module$api.html.isGroupContainer=Html$$module$api.isGroupContainer;
exports$$module$api.html.isGroupedElement=Html$$module$api.isGroupedElement;exports$$module$api.html.isHeading=Html$$module$api.isHeading;exports$$module$api.html.isInlineNode=Html$$module$api.isInlineNode;exports$$module$api.html.isListContainer=Html$$module$api.isListContainer;exports$$module$api.html.isListItem=Html$$module$api.isListItem;exports$$module$api.html.isTableContainer=Html$$module$api.isTableContainer;exports$$module$api.html.isTextLevelSemanticNode=Html$$module$api.isTextLevelSemanticNode;
exports$$module$api.html.isVoidNode=Html$$module$api.isVoidNode;exports$$module$api.images=Images$$module$api;exports$$module$api.images.insert=Images$$module$api.insert;exports$$module$api.images.setAttributes=Images$$module$api.setAttributes;exports$$module$api.keys=Keys$$module$api;exports$$module$api.keys.handle=Keys$$module$api.handle;exports$$module$api.keys.ARROWS=Keys$$module$api.ARROWS;exports$$module$api.keys.CODES=Keys$$module$api.CODES;exports$$module$api.links=Links$$module$api;
exports$$module$api.links.create=Links$$module$api.create;exports$$module$api.links.remove=Links$$module$api.remove;exports$$module$api.lists=Lists$$module$api;exports$$module$api.lists.format=Lists$$module$api.format;exports$$module$api.lists.unformat=Lists$$module$api.unformat;exports$$module$api.lists.toggle=Lists$$module$api.toggle;exports$$module$api.maps=Maps$$module$api;exports$$module$api.maps.isEmpty=Maps$$module$api.isEmpty;exports$$module$api.maps.fillKeys=Maps$$module$api.fillKeys;
exports$$module$api.maps.keys=Maps$$module$api.keys;exports$$module$api.maps.vals=Maps$$module$api.vals;exports$$module$api.maps.selectVals=Maps$$module$api.selectVals;exports$$module$api.maps.filter=Maps$$module$api.filter;exports$$module$api.maps.forEach=Maps$$module$api.forEach;exports$$module$api.maps.extend=Maps$$module$api.extend;exports$$module$api.maps.merge=Maps$$module$api.merge;exports$$module$api.maps.isMap=Maps$$module$api.isMap;exports$$module$api.maps.clone=Maps$$module$api.clone;
exports$$module$api.maps.cloneSet=Maps$$module$api.cloneSet;exports$$module$api.maps.cloneDelete=Maps$$module$api.cloneDelete;exports$$module$api.maps.create=Maps$$module$api.create;exports$$module$api.maps.mapTuples=Maps$$module$api.mapTuples;exports$$module$api.mouse=Mouse$$module$api;exports$$module$api.mouse.handle=Mouse$$module$api.handle;exports$$module$api.mouse.EVENTS=Mouse$$module$api.EVENTS;exports$$module$api.mutation=Mutation$$module$api;exports$$module$api.mutation.removeNode=Mutation$$module$api.removeNode;
exports$$module$api.mutation.removeShallowPreservingCursors=Mutation$$module$api.removeShallowPreservingCursors;exports$$module$api.mutation.removePreservingRange=Mutation$$module$api.removePreservingRange;exports$$module$api.mutation.removePreservingRanges=Mutation$$module$api.removePreservingRanges;exports$$module$api.mutation.insertTextAtBoundary=Mutation$$module$api.insertTextAtBoundary;exports$$module$api.mutation.insertNodeAtBoundary=Mutation$$module$api.insertNodeAtBoundary;
exports$$module$api.mutation.splitTextNode=Mutation$$module$api.splitTextNode;exports$$module$api.mutation.splitTextContainers=Mutation$$module$api.splitTextContainers;exports$$module$api.mutation.joinTextNodeAdjustRange=Mutation$$module$api.joinTextNodeAdjustRange;exports$$module$api.mutation.joinTextNode=Mutation$$module$api.joinTextNode;exports$$module$api.mutation.splitBoundary=Mutation$$module$api.splitBoundary;exports$$module$api.mutation.splitBoundaryUntil=Mutation$$module$api.splitBoundaryUntil;
exports$$module$api.overrides=Overrides$$module$api;exports$$module$api.overrides.toggle=Overrides$$module$api.toggle;exports$$module$api.overrides.harvest=Overrides$$module$api.harvest;exports$$module$api.overrides.consume=Overrides$$module$api.consume;exports$$module$api.overrides.nodeToState=Overrides$$module$api.nodeToState;exports$$module$api.paste=Paste$$module$api;exports$$module$api.handle=Paste$$module$api.handle;exports$$module$api.paths=Paths$$module$api;
exports$$module$api.paths.toBoundary=Paths$$module$api.toBoundary;exports$$module$api.paths.fromBoundary=Paths$$module$api.fromBoundary;exports$$module$api.ranges=Ranges$$module$api;exports$$module$api.ranges.box=Ranges$$module$api.box;exports$$module$api.ranges.get=Ranges$$module$api.get;exports$$module$api.ranges.create=Ranges$$module$api.create;exports$$module$api.ranges.equals=Ranges$$module$api.equals;exports$$module$api.ranges.collapseToEnd=Ranges$$module$api.collapseToEnd;
exports$$module$api.ranges.collapseToStart=Ranges$$module$api.collapseToStart;exports$$module$api.ranges.trim=Ranges$$module$api.trim;exports$$module$api.ranges.trimClosingOpening=Ranges$$module$api.trimClosingOpening;exports$$module$api.ranges.trimBoundaries=Ranges$$module$api.trimBoundaries;exports$$module$api.ranges.expandBoundaries=Ranges$$module$api.expandBoundaries;exports$$module$api.ranges.nearestEditingHost=Ranges$$module$api.nearestEditingHost;exports$$module$api.ranges.expand=Ranges$$module$api.expand;
exports$$module$api.ranges.envelopeInvisibleCharacters=Ranges$$module$api.envelopeInvisibleCharacters;exports$$module$api.ranges.fromPosition=Ranges$$module$api.fromPosition;exports$$module$api.ranges.fromBoundaries=Ranges$$module$api.fromBoundaries;exports$$module$api.ranges.showHint=Ranges$$module$api.showHint;exports$$module$api.ranges.hideHint=Ranges$$module$api.hideHint;exports$$module$api.selectionchange=SelectionChange$$module$api;exports$$module$api.selectionchange.handler=SelectionChange$$module$api.handler;
exports$$module$api.selectionchange.addHandler=SelectionChange$$module$api.addHandler;exports$$module$api.selectionchange.removeHandler=SelectionChange$$module$api.removeHandler;exports$$module$api.selections=Selections$$module$api;exports$$module$api.selections.show=Selections$$module$api.show;exports$$module$api.selections.handle=Selections$$module$api.handle;exports$$module$api.selections.Context=Selections$$module$api.Context;exports$$module$api.selections.hideCarets=Selections$$module$api.hideCarets;
exports$$module$api.selections.unhideCarets=Selections$$module$api.unhideCarets;exports$$module$api.selections.scrollTo=Selections$$module$api.scrollTo;exports$$module$api.strings=Strings$$module$api;exports$$module$api.strings.addToList=Strings$$module$api.addToList;exports$$module$api.strings.removeFromList=Strings$$module$api.removeFromList;exports$$module$api.strings.uniqueList=Strings$$module$api.uniqueList;exports$$module$api.strings.words=Strings$$module$api.words;
exports$$module$api.strings.splitIncl=Strings$$module$api.splitIncl;exports$$module$api.strings.dashesToCamelCase=Strings$$module$api.dashesToCamelCase;exports$$module$api.strings.camelCaseToDashes=Strings$$module$api.camelCaseToDashes;exports$$module$api.strings.isEmpty=Strings$$module$api.isEmpty;exports$$module$api.strings.isControlCharacter=Strings$$module$api.isControlCharacter;exports$$module$api.strings.CONTROL_CHARACTER=Strings$$module$api.CONTROL_CHARACTER;
exports$$module$api.strings.SPACE=Strings$$module$api.SPACE;exports$$module$api.strings.NOT_SPACE=Strings$$module$api.NOT_SPACE;exports$$module$api.strings.WHITE_SPACE=Strings$$module$api.WHITE_SPACE;exports$$module$api.strings.WHITE_SPACES=Strings$$module$api.WHITE_SPACES;exports$$module$api.strings.ZERO_WIDTH_SPACE=Strings$$module$api.ZERO_WIDTH_SPACE;exports$$module$api.strings.NON_BREAKING_SPACE=Strings$$module$api.NON_BREAKING_SPACE;exports$$module$api.strings.WORD_BOUNDARY=Strings$$module$api.WORD_BOUNDARY;
exports$$module$api.strings.WORD_BOUNDARY_FROM_END=Strings$$module$api.WORD_BOUNDARY_FROM_END;exports$$module$api.strings.WORD_BREAKING_CHARACTER=Strings$$module$api.WORD_BREAKING_CHARACTER;exports$$module$api.strings.TERMINAL_WHITE_SPACES=Strings$$module$api.TERMINAL_WHITE_SPACES;exports$$module$api.strings.ZERO_WIDTH_CHARACTERS=Strings$$module$api.ZERO_WIDTH_CHARACTERS;exports$$module$api.strings.WHITE_SPACE_CHARACTERS=Strings$$module$api.WHITE_SPACE_CHARACTERS;
exports$$module$api.strings.WORD_BREAKING_CHARACTERS=Strings$$module$api.WORD_BREAKING_CHARACTERS;exports$$module$api.strings.NON_BREAKING_SPACE_CHARACTERS=Strings$$module$api.NON_BREAKING_SPACE_CHARACTERS;exports$$module$api.transform=Transform$$module$api;exports$$module$api.transform.html=Transform$$module$api.html;exports$$module$api.transform.plain=Transform$$module$api.plain;exports$$module$api.transform.msword=Transform$$module$api.msword;exports$$module$api.traversing=Traversing$$module$api;
exports$$module$api.traversing.next=Traversing$$module$api.next;exports$$module$api.traversing.prev=Traversing$$module$api.prev;exports$$module$api.typing=Typing$$module$api;exports$$module$api.typing.handle=Typing$$module$api.handle;exports$$module$api.typing.actions=Typing$$module$api.actions;exports$$module$api.undo=Undo$$module$api;exports$$module$api.undo.Context=Undo$$module$api.Context;exports$$module$api.undo.enter=Undo$$module$api.enter;exports$$module$api.undo.close=Undo$$module$api.close;
exports$$module$api.undo.leave=Undo$$module$api.leave;exports$$module$api.undo.capture=Undo$$module$api.capture;exports$$module$api.undo.pathFromBoundary=Undo$$module$api.pathFromBoundary;exports$$module$api.undo.changeSetFromFrame=Undo$$module$api.changeSetFromFrame;exports$$module$api.undo.inverseChangeSet=Undo$$module$api.inverseChangeSet;exports$$module$api.undo.applyChangeSet=Undo$$module$api.applyChangeSet;exports$$module$api.undo.advanceHistory=Undo$$module$api.advanceHistory;
exports$$module$api.undo.makeInsertChange=Undo$$module$api.makeInsertChange;exports$$module$api.undo.undo=Undo$$module$api.undo;exports$$module$api.undo.redo=Undo$$module$api.redo;module$api=exports$$module$api;var Api$$module$aloha=module$api,Dom$$module$aloha=module$dom,Boundaries$$module$aloha=module$boundaries,Blocks$$module$aloha=module$blocks,DragDrop$$module$aloha=module$dragdrop,Editables$$module$aloha=module$editables,Events$$module$aloha=module$events,Fn$$module$aloha=module$functions,Keys$$module$aloha=module$keys,Maps$$module$aloha=module$maps,Mouse$$module$aloha=module$mouse,Paste$$module$aloha=module$paste,Ranges$$module$aloha=module$ranges,Selections$$module$aloha=module$selections,Typing$$module$aloha=
module$typing,Undo$$module$aloha=module$undo,doc$$module$aloha=document,win$$module$aloha=Dom$$module$aloha.documentWindow(doc$$module$aloha);
function handle$$module$aloha(a){if(!a.nativeEvent)return a;a.type=a.nativeEvent.type;var b=a.nativeEvent.target||a.nativeEvent.srcElement,b=b&&(b.ownerDocument||b.document);if(!b)return a;b=Ranges$$module$aloha.get(b);if(!b)return a;a.range=b;if(b=Editables$$module$aloha.fromBoundary(a.editor,Boundaries$$module$aloha.fromRangeStart(b)))a.editable=b;return a}
function editor$$module$aloha(a,b){var c=b||{nativeEvent:a};c.editor=editor$$module$aloha;Selections$$module$aloha.select(Fn$$module$aloha.comp.apply(editor$$module$aloha.stack,editor$$module$aloha.stack)(handle$$module$aloha(c)))}editor$$module$aloha.editables={};editor$$module$aloha.BLOCK_CLASS="aloha-block";editor$$module$aloha.CARET_CLASS="aloha-caret";editor$$module$aloha.selectionContext=Selections$$module$aloha.Context(doc$$module$aloha);
editor$$module$aloha.stack=[Selections$$module$aloha.handle,Typing$$module$aloha.handle,Blocks$$module$aloha.handle,DragDrop$$module$aloha.handle,Paste$$module$aloha.handle,Editables$$module$aloha.handle,Mouse$$module$aloha.handle,Keys$$module$aloha.handle];Events$$module$aloha.setup(doc$$module$aloha,editor$$module$aloha);Events$$module$aloha.add(win$$module$aloha,"resize",editor$$module$aloha);
function aloha$$module$aloha(a){var b=Editables$$module$aloha.Editable(a);Dom$$module$aloha.setStyle(a,"cursor","text");b.settings={defaultBlockNodeName:"p"};Editables$$module$aloha.assocIntoEditor(editor$$module$aloha,b);Undo$$module$aloha.enter(b.undoContext,{meta:{type:"external"},partitionRecords:!0});editor$$module$aloha(null,{type:"aloha",editable:b})}
function mahalo$$module$aloha(a){var b=Editables$$module$aloha.fromElem(editor$$module$aloha,a);Editables$$module$aloha.close(b);Editables$$module$aloha.dissocFromEditor(editor$$module$aloha,b);a.removeAttribute("contentEditable");editor$$module$aloha(null,{type:"mahalo",editable:b})}Api$$module$aloha.aloha=aloha$$module$aloha;Api$$module$aloha.mahalo=mahalo$$module$aloha;Api$$module$aloha.editor=editor$$module$aloha;
win$$module$aloha.aloha=aloha$$module$aloha=Maps$$module$aloha.extend(aloha$$module$aloha,Api$$module$aloha);var egg$$module$aloha="%c       _       _                      _ _ _\n  __ _| | ___ | |__   __ _    ___  __| (_) |_ ___  _ __\n / _` | |/ _ \\| '_ \\ / _` |  / _ \\/ _` | | __/ _ \\| '__|\n| (_| | | (_) | | | | (_| | |  __/ (_| | | || (_) | |\n \\__,_|_|\\___/|_| |_|\\__,_|  \\___|\\__,_|_|\\__\\___/|_|.org\n\n%c Aloha! \n Help us shape the future of content editing on the web! \n Join the team at %c http://github.com/alohaeditor \u2665 ";
console.log(egg$$module$aloha,"color: #09d;","font-size: 14px; background: #09d; color: #fff; padding: 0.5em 0; line-height: 2em;","font-size: 14px; background: #fe7; color: #111; padding: 0.5em 0; line-height: 2em;");var module$aloha=aloha$$module$aloha;}())
